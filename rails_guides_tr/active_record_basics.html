<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Active Record Temelleri — Ruby on Rails Guides</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css" data-turbolinks-track="reload">
  <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
  <link rel="stylesheet" type="text/css" href="stylesheets/highlight.css" data-turbolinks-track="reload">
  <link href="images/favicon.ico" rel="icon" type="image/x-icon" />
  <script src="javascripts/turbolinks.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/clipboard.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/guides.js" data-turbolinks-track="reload"></script>
  <meta property="og:title" content="Active Record Temelleri — Ruby on Rails Guides" />
  <meta name="description" content="Active Record TemelleriBu klavuz Active Record&#39;a bir başlangıçtır.Bu klavuzu bitirdikten sonra şunları öğrenmiş olacaksınız: Object Relational Mapping (Nesne İlişkileriyle Eşleme) ve Active Record nedir ve Rails içinde nasıl kullanılır. Active Record Model-View-Controller yapısında nasıl yer alır. İlişkisel veritabanında saklanan veriler Active Record modelleri kullanarak nasıl işlenir. Active Record şemasında isimlendirme kuralları. Veritabanı migrasyonları, doğrulamaları ve prosedürlerinde temel yapılar." />
  <meta property="og:description" content="Active Record TemelleriBu klavuz Active Record&#39;a bir başlangıçtır.Bu klavuzu bitirdikten sonra şunları öğrenmiş olacaksınız: Object Relational Mapping (Nesne İlişkileriyle Eşleme) ve Active Record nedir ve Rails içinde nasıl kullanılır. Active Record Model-View-Controller yapısında nasıl yer alır. İlişkisel veritabanında saklanan veriler Active Record modelleri kullanarak nasıl işlenir. Active Record şemasında isimlendirme kuralları. Veritabanı migrasyonları, doğrulamaları ve prosedürlerinde temel yapılar." />
  <meta property="og:locale" content="en_US" />
  <meta property="og:site_name" content="Ruby on Rails Guides" />
  <meta property="og:image" content="https://avatars.githubusercontent.com/u/4223" />
  <meta property="og:type" content="website" />
</head>
<body class="guide">
  <div>
    <div id="version-badge">edge</div>
  </div>
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">More at <a href="https://rubyonrails.org/">rubyonrails.org:</a> </strong>
      <span class="red-button more-info-button">
        More Ruby on Rails
      </span>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="https://rubyonrails.org/blog">Blog</a></li>
        <li class="more-info"><a href="https://guides.rubyonrails.org/">Guides</a></li>
        <li class="more-info"><a href="https://api.rubyonrails.org/">API</a></li>
        <li class="more-info"><a href="https://discuss.rubyonrails.org/">Forum</a></li>
        <li class="more-info"><a href="https://github.com/rails/rails">Contribute on GitHub</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="index.html" title="Return to home page">Guides.rubyonrails.org</a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="index.html">Home</a></li>
        <li class="guides-index guides-index-large">
          <a href="index.html" id="guidesMenu" class="guides-index-item nav-item">Guides Index</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr />
            <dl class="guides-section-container">
                <div class="guides-section">
                  <dt>Buradan Başlayın</dt>
                  <dd><a href="getting_started.html">Rails&#39;e Başlamak</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Modeller</dt>
                  <dd><a href="active_record_basics.html">Active Record Temelleri</a></dd>
                  <dd><a href="active_record_migrations.html">Active Record Migrations</a></dd>
                  <dd><a href="active_record_validations.html">Active Record Validations</a></dd>
                  <dd><a href="active_record_callbacks.html">Active Record Callbacks</a></dd>
                  <dd><a href="association_basics.html">Active Record Associations</a></dd>
                  <dd><a href="active_record_querying.html">Active Record Query Interface</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Views</dt>
                  <dd><a href="layouts_and_rendering.html">Layouts and Rendering in Rails</a></dd>
                  <dd><a href="form_helpers.html">Action View Form Helpers</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Controllers</dt>
                  <dd><a href="action_controller_overview.html">Action Controller Overview</a></dd>
                  <dd><a href="routing.html">Rails Routing from the Outside In</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Other Components</dt>
                  <dd><a href="active_support_core_extensions.html">Active Support Core Extensions</a></dd>
                  <dd><a href="action_mailer_basics.html">Action Mailer Basics</a></dd>
                  <dd><a href="active_job_basics.html">Active Job Basics</a></dd>
                  <dd><a href="active_storage_overview.html">Active Storage Overview</a></dd>
                  <dd><a href="action_cable_overview.html">Action Cable Overview</a></dd>
                  <dd><a href="webpacker.html">Webpacker</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Digging Deeper</dt>
                  <dd><a href="i18n.html">Rails Internationalization (I18n) API</a></dd>
                  <dd><a href="testing.html">Testing Rails Applications</a></dd>
                  <dd><a href="security.html">Securing Rails Applications</a></dd>
                  <dd><a href="debugging_rails_applications.html">Debugging Rails Applications</a></dd>
                  <dd><a href="configuring.html">Configuring Rails Applications</a></dd>
                  <dd><a href="command_line.html">The Rails Command Line</a></dd>
                  <dd><a href="asset_pipeline.html">The Asset Pipeline</a></dd>
                  <dd><a href="working_with_javascript_in_rails.html">Working with JavaScript in Rails</a></dd>
                  <dd><a href="autoloading_and_reloading_constants.html">Autoloading and Reloading Constants</a></dd>
                  <dd><a href="classic_to_zeitwerk_howto.html">Classic to Zeitwerk HOWTO</a></dd>
                  <dd><a href="caching_with_rails.html">Caching with Rails: An Overview</a></dd>
                  <dd><a href="api_app.html">Using Rails for API-only Applications</a></dd>
                  <dd><a href="active_record_multiple_databases.html">Multiple Databases with Active Record</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Extending Rails</dt>
                  <dd><a href="rails_on_rack.html">Rails on Rack</a></dd>
                  <dd><a href="generators.html">Creating and Customizing Rails Generators &amp; Templates</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Contributions</dt>
                  <dd><a href="contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</a></dd>
                  <dd><a href="api_documentation_guidelines.html">API Documentation Guidelines</a></dd>
                  <dd><a href="ruby_on_rails_guides_guidelines.html">Guides Guidelines</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Policies</dt>
                  <dd><a href="maintenance_policy.html">Maintenance Policy</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Release Notes</dt>
                  <dd><a href="upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</a></dd>
                  <dd><a href="7_0_release_notes.html">Version 7.0 - December 2021</a></dd>
                  <dd><a href="6_1_release_notes.html">Version 6.1 - December 2020</a></dd>
                  <dd><a href="6_0_release_notes.html">Version 6.0 - August 2019</a></dd>
                  <dd><a href="5_2_release_notes.html">Version 5.2 - April 2018</a></dd>
                  <dd><a href="5_1_release_notes.html">Version 5.1 - April 2017</a></dd>
                  <dd><a href="5_0_release_notes.html">Version 5.0 - June 2016</a></dd>
                  <dd><a href="4_2_release_notes.html">Version 4.2 - December 2014</a></dd>
                  <dd><a href="4_1_release_notes.html">Version 4.1 - April 2014</a></dd>
                  <dd><a href="4_0_release_notes.html">Version 4.0 - June 2013</a></dd>
                  <dd><a href="3_2_release_notes.html">Version 3.2 - January 2012</a></dd>
                  <dd><a href="3_1_release_notes.html">Version 3.1 - August 2011</a></dd>
                  <dd><a href="3_0_release_notes.html">Version 3.0 - August 2010</a></dd>
                  <dd><a href="2_3_release_notes.html">Version 2.3 - March 2009</a></dd>
                  <dd><a href="2_2_release_notes.html">Version 2.2 - November 2008</a></dd>
                </div>
            </dl>
          </div>
        </li>
        <li><a class="nav-item" href="contributing_to_ruby_on_rails.html">Contribute</a></li>
        <li class="guides-index guides-index-small">
          <select class="guides-index-item nav-item">
            <option value="index.html">Guides Index</option>
              <optgroup label="Buradan Başlayın">
                  <option value="getting_started.html">Rails&#39;e Başlamak</option>
              </optgroup>
              <optgroup label="Modeller">
                  <option value="active_record_basics.html">Active Record Temelleri</option>
                  <option value="active_record_migrations.html">Active Record Migrations</option>
                  <option value="active_record_validations.html">Active Record Validations</option>
                  <option value="active_record_callbacks.html">Active Record Callbacks</option>
                  <option value="association_basics.html">Active Record Associations</option>
                  <option value="active_record_querying.html">Active Record Query Interface</option>
              </optgroup>
              <optgroup label="Views">
                  <option value="layouts_and_rendering.html">Layouts and Rendering in Rails</option>
                  <option value="form_helpers.html">Action View Form Helpers</option>
              </optgroup>
              <optgroup label="Controllers">
                  <option value="action_controller_overview.html">Action Controller Overview</option>
                  <option value="routing.html">Rails Routing from the Outside In</option>
              </optgroup>
              <optgroup label="Other Components">
                  <option value="active_support_core_extensions.html">Active Support Core Extensions</option>
                  <option value="action_mailer_basics.html">Action Mailer Basics</option>
                  <option value="active_job_basics.html">Active Job Basics</option>
                  <option value="active_storage_overview.html">Active Storage Overview</option>
                  <option value="action_cable_overview.html">Action Cable Overview</option>
                  <option value="webpacker.html">Webpacker</option>
              </optgroup>
              <optgroup label="Digging Deeper">
                  <option value="i18n.html">Rails Internationalization (I18n) API</option>
                  <option value="testing.html">Testing Rails Applications</option>
                  <option value="security.html">Securing Rails Applications</option>
                  <option value="debugging_rails_applications.html">Debugging Rails Applications</option>
                  <option value="configuring.html">Configuring Rails Applications</option>
                  <option value="command_line.html">The Rails Command Line</option>
                  <option value="asset_pipeline.html">The Asset Pipeline</option>
                  <option value="working_with_javascript_in_rails.html">Working with JavaScript in Rails</option>
                  <option value="autoloading_and_reloading_constants.html">Autoloading and Reloading Constants</option>
                  <option value="classic_to_zeitwerk_howto.html">Classic to Zeitwerk HOWTO</option>
                  <option value="caching_with_rails.html">Caching with Rails: An Overview</option>
                  <option value="api_app.html">Using Rails for API-only Applications</option>
                  <option value="active_record_multiple_databases.html">Multiple Databases with Active Record</option>
              </optgroup>
              <optgroup label="Extending Rails">
                  <option value="rails_on_rack.html">Rails on Rack</option>
                  <option value="generators.html">Creating and Customizing Rails Generators &amp; Templates</option>
              </optgroup>
              <optgroup label="Contributions">
                  <option value="contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</option>
                  <option value="api_documentation_guidelines.html">API Documentation Guidelines</option>
                  <option value="ruby_on_rails_guides_guidelines.html">Guides Guidelines</option>
              </optgroup>
              <optgroup label="Policies">
                  <option value="maintenance_policy.html">Maintenance Policy</option>
              </optgroup>
              <optgroup label="Release Notes">
                  <option value="upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</option>
                  <option value="7_0_release_notes.html">Version 7.0 - December 2021</option>
                  <option value="6_1_release_notes.html">Version 6.1 - December 2020</option>
                  <option value="6_0_release_notes.html">Version 6.0 - August 2019</option>
                  <option value="5_2_release_notes.html">Version 5.2 - April 2018</option>
                  <option value="5_1_release_notes.html">Version 5.1 - April 2017</option>
                  <option value="5_0_release_notes.html">Version 5.0 - June 2016</option>
                  <option value="4_2_release_notes.html">Version 4.2 - December 2014</option>
                  <option value="4_1_release_notes.html">Version 4.1 - April 2014</option>
                  <option value="4_0_release_notes.html">Version 4.0 - June 2013</option>
                  <option value="3_2_release_notes.html">Version 3.2 - January 2012</option>
                  <option value="3_1_release_notes.html">Version 3.1 - August 2011</option>
                  <option value="3_0_release_notes.html">Version 3.0 - August 2010</option>
                  <option value="2_3_release_notes.html">Version 2.3 - March 2009</option>
                  <option value="2_2_release_notes.html">Version 2.2 - November 2008</option>
              </optgroup>
          </select>
        </li>
      </ul>
    </div>
  </div>
  <hr class="hide" />

  <div id="feature">
    <div class="wrapper">
      <h2>Active Record Temelleri</h2><p>Bu klavuz Active Record&#39;a bir başlangıçtır.</p><p>Bu klavuzu bitirdikten sonra şunları öğrenmiş olacaksınız:</p>
<ul>
<li>Object Relational Mapping (Nesne İlişkileriyle Eşleme) ve Active Record nedir ve Rails içinde 
nasıl kullanılır.</li>
<li>Active Record Model-View-Controller yapısında nasıl yer alır.</li>
<li>İlişkisel veritabanında saklanan veriler Active Record modelleri kullanarak nasıl işlenir.</li>
<li>Active Record şemasında isimlendirme kuralları.</li>
<li>Veritabanı migrasyonları, doğrulamaları ve prosedürlerinde temel yapılar.</li>
</ul>


                <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <ol class="chapters">
<li>
<a href="#active-record-nedir-questionmark">Active Record Nedir?</a>

<ul>
<li><a href="#active-record-patterni">Active Record Patterni</a></li>
<li><a href="#nesne-i%CC%87li%C5%9Fkisel-e%C5%9Fleme">Nesne İlişkisel Eşleme</a></li>
<li><a href="#bir-orm-framework-olarak-active-record">Bir ORM Framework Olarak Active Record</a></li>
</ul>
</li>
<li>
<a href="#active-record-da-konfig%C3%BCrasyon-yerine-kabuller">Active Record'da Konfigürasyon Yerine Kabuller</a>

<ul>
<li><a href="#i%CC%87simlendirme-kabulleri">İsimlendirme Kabulleri</a></li>
<li><a href="#%C5%9Fema-kabulleri">Şema Kabulleri</a></li>
</ul>
</li>
<li><a href="#active-record-modellerini-%C3%BCretmek">Active Record Modellerini Üretmek</a></li>
<li><a href="#i%CC%87simlendirme-kabulleri-%C3%BCzerine-yazmak">İsimlendirme Kabulleri Üzerine Yazmak</a></li>
<li>
<a href="#crud-veriyi-okumak-ve-yazmak">CRUD: Veriyi Okumak ve Yazmak</a>

<ul>
<li><a href="#create-%C3%BCret">Create - Üret</a></li>
<li><a href="#read-oku">Read - Oku</a></li>
<li><a href="#update-g%C3%BCncelle">Update - Güncelle</a></li>
<li><a href="#delete-sil">Delete - Sil</a></li>
</ul>
</li>
<li><a href="#do%C4%9Frulamalar">Doğrulamalar</a></li>
<li><a href="#callbacks">Callbacks</a></li>
<li><a href="#migrations">Migrations</a></li>
</ol>

          </div>

    </div>
  </div>

  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <h3 id="active-record-nedir-questionmark"><a class="anchorlink" href="#active-record-nedir-questionmark">1 Active Record Nedir?</a></h3><p>Active Record <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">MVC</a> 
yapısındaki M dir - model - sistemin , üzerinde çalışılan veriden sorumlu katmanıdır. 
Active Record veritabanında kalıcı şekilde depolama gerektiren verilerin karşılığı olan
nesnelerin üretilmesi ve kullanımını kolaylaştrır. Bir nesne ilişkisel eşleme sistemi 
olan Active Record paterninin bir uygulamasıdır.</p><h4 id="active-record-patterni"><a class="anchorlink" href="#active-record-patterni">1.1 Active Record Patterni</a></h4><p><a href="https://www.martinfowler.com/eaaCatalog/activeRecord.html">Active Record Martin Fowler tarafından </a>
<em>Patterns of Enterprise Application Architecture</em> kitabında tanımlandı. 
Active Record'da nesneler hem kalıcı veriyi içerirken hem de bu veri üzerindeki davranışları 
içerir. Active Record, veri erişim lojiğinin nesnenin parçası olmasının, bu nesneyi 
kullananları veriyi veritababnına nasıl yazıp okuyacaklarına dair eğiteceği fikrini 
taşır.</p><h4 id="nesne-i̇lişkisel-eşleme"><a class="anchorlink" href="#nesne-i%CC%87li%C5%9Fkisel-e%C5%9Fleme">1.2 Nesne İlişkisel Eşleme</a></h4><p><a href="https://en.wikipedia.org/wiki/Object-relational_mapping">Object Relational Mapping</a>, 
genellikle baş harflerinden oluşan ORM ile anılır. İlişkisel veritabanı sistemlerinde 
gelişmiş nesne yapıları veritabanı tablolarına eşleyen bir tekniktir. ORM kullanarak 
bir uygulamadaki nesnelerin özellikleri ve ilişkileri veritabanına saklanır ya da okunur.
Kolayca , SQL kod yazmadan ve veritabanı erişim kodlarını çok az kullanarak </p><div class="note"><p>Active Record'u tamamen anlamak için relational database management systems (RDBMS) ve
structured query language (SQL) temel seviyede bilinmesi iyi olacaktır. Daha fazla bilgi 
isterseniz lütfen <a href="https://www.w3schools.com/sql/default.asp">bu tutorial</a> 
(veya <a href="http://www.sqlcourse.com/">bu tutorial</a>) okuyun ya da 
başka bir yerden kendiniz de öğrenebilirsiniz.</p></div><h4 id="bir-orm-framework-olarak-active-record"><a class="anchorlink" href="#bir-orm-framework-olarak-active-record">1.3 Bir ORM Framework Olarak Active Record</a></h4><p>Active Record bize farklı mekanizmalar verir, en önemli yetenekler şunlar:</p>
<ul>
<li>Modellerin ve verilerinin temsili.</li>
<li>Modeller arasındaki ilişkilerin temsili.</li>
<li>İlişkili (akraba) modeller üzerinden kalıtım hiyerarşileri.</li>
<li>Veritabanına kalıcı olarak saklanmadan önce modellerin doğrulamalarının yapılması.</li>
<li>Nesne-temelli bir şekil ile veritabanı işlemlerinin yapılması.</li>
</ul>
<h3 id="active-record-da-konfigürasyon-yerine-kabuller"><a class="anchorlink" href="#active-record-da-konfig%C3%BCrasyon-yerine-kabuller">2 Active Record'da Konfigürasyon Yerine Kabuller</a></h3><p>Başka diller ya da frameworklar ile uygulama yaparken bir çok konfigürasyon kodu 
yazmak gerekebilir. Bu kısmen tüm ORM frameworklarda geçerlidir. Ancak eğer Rails'in 
kabullerini izlerseniz Active Record modellerini tanımlarken çok az konfigürasyon 
kodu (bazen hiç) yazmanıza gerek kalır. Ana fikir şudur, eğer uygulamalarınızda hep 
benzer konfigürasyonlar yapıp duruyorsanız bu default yol olarak kullanılmalıdır. 
Böylece sadece standart kabuller dışında kalan istisna durumlarda konfigürasyona 
ihtiyacınız kalır.</p><h4 id="i̇simlendirme-kabulleri"><a class="anchorlink" href="#i%CC%87simlendirme-kabulleri">2.1 İsimlendirme Kabulleri</a></h4><p>Default olarak modeller ve üretilmesi gereken veritabanı tabloları arasında eşleşme 
yapmak için Active Record bazı isimlendirme kabulleri kullanır. Rails sınıfa verdiğiniz 
ismi çoğul yaparak veritabanı tablosu adını belirler. Yani <code>Book</code> adında bir modeliniz 
varsa karşılığı olarak veritabanında <strong>books</strong> adında bir tablonuz olmalıdır. Rails 
çoğullama mekanizması regular ve unregular kelimelerin çoğullanması (ve tekillenmesi)
işinde çok kuvvetlidir. İki ya da daha fazla kelimeden oluşan model sınıf isimleri 
Ruby kabullerine göre olmalıdır, CamelCase formunda, buradan üretilen tablo isimleri 
ise snake_case formunda olacaktır. Örnekler:</p>
<ul>
<li>Model Sınıf Adı - Tekil , her kelimenin ilk harfi büyük (örn. <code>BookClub</code>).</li>
<li>Veritabanı Tablosu - Çoğul , kelimeler arasında altçizgi var (örn. <code>book_clubs</code>).</li>
</ul>

<table>
<thead>
<tr>
<th>Model / Class</th>
<th>Table / Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Article</code></td>
<td><code>articles</code></td>
</tr>
<tr>
<td><code>LineItem</code></td>
<td><code>line_items</code></td>
</tr>
<tr>
<td><code>Deer</code></td>
<td><code>deers</code></td>
</tr>
<tr>
<td><code>Mouse</code></td>
<td><code>mice</code></td>
</tr>
<tr>
<td><code>Person</code></td>
<td><code>people</code></td>
</tr>
</tbody>
</table>
<h4 id="şema-kabulleri"><a class="anchorlink" href="#%C5%9Fema-kabulleri">2.2 Şema Kabulleri</a></h4><p>Active Record veritabanı tablosu sütun adlarında bu sütunun amacına göre 
isimlendirme kabullerini kullanır.</p>
<ul>
<li>
<strong>Foreign keys</strong> - Bu alanlar şu paternde isimlendirilmelidir
<code>tekil_tablo_adı_id</code> (örn. <code>items</code> tablosu ile ilişkili sütun adı <code>item_id</code>, 
<code>orders</code> tablosu ile ilişkili sütun adı <code>order_id</code>). Bu sütunlar modelleriniz 
arasında ilişkilendirme yapacağınız zaman Active Record tarafından kullanılır.</li>
<li>
<strong>Primary keys</strong> - Default olarak Active Record <code>id</code> adlı integer değerli bir 
sütunu tabloda primary key olarak kabul eder (PostgreSQL ve MySQL için <code>bigint</code> 
ve SQLite için <code>integer</code>). Tabloları üretmek için <a href="active_record_migrations.html">Active Record Migrasyonlar</a> kullanılırken bu sütun otomatik olarak üretilir.</li>
</ul>
<p>Ayrıca Active Record oluşumlarına ek özellikler katan bazı opsiyonel sütun 
isimleri vardır:</p>
<ul>
<li>
<code>created_at</code> - Kayıt ilk üretildiği anda otomatik olarak bulunulan ana ait tarih 
saat değerini alır.</li>
<li>
<code>updated_at</code> - Kayıt ilk üretildiği ya da güncellendiği anda otomatik olarak 
bulunulan ana ait tarih saat değerini alır.</li>
<li>
<code>lock_version</code> - Bir modele <a href="https://edgeapi.rubyonrails.org/classes/ActiveRecord/Locking.html">optimistic
locking</a> ekler.</li>
<li>
<code>type</code> - Modelin <a href="https://edgeapi.rubyonrails.org/classes/ActiveRecord/Base.html#class-ActiveRecord::Base-label-Single+table+inheritance">Single Table
Inheritance</a> olduğunu belirtir.</li>
<li>
<code>(ilişkilendirme_adı)_type</code> - <a href="association_basics.html#polymorphic-associations">polymorphic ilişkilendirmeler</a> için type bilgisini saklar.</li>
<li>
<code>(tablo_adı)_count</code> - İlişkilendirmelerde kayıta bağlı diğer tablodaki kayıt 
sayısını tutar. Mesela <code>Article</code> sınıfında eğer bir çok <code>Comment</code> kaydına bağlıysa 
<code>comments_count</code> o makaleye yapılan yorum sayısını içeren alandır.</li>
</ul>
<div class="note"><p>Bu sütun isimleri opsiyonel olmasına rağmen Active Record tarafından yerleri 
ayrılmıştır. Ekstra işlevler istemiyorsanız ayrılmış kelimelerden uzak durun. Örneğin 
<code>type</code> ayrılmış kelimedir ve eğer Single Table Inheritance (STI) kullanmıyorsanız bu 
isimde bir sütun koymayın mesela "context" deyin. Özelliği naıl olsa kullanmıyorum deyip 
o özelliğe ait ayrılmış kelimeyi kullanmayın.</p></div><h3 id="active-record-modellerini-üretmek"><a class="anchorlink" href="#active-record-modellerini-%C3%BCretmek">3 Active Record Modellerini Üretmek</a></h3><p>Active Record modellerini üretmek için <code>ApplicationRecord</code> sınıfının bir alt sınıfını 
üretmeniz yeterlidir:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Product</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class Product &lt; ApplicationRecord
end
">Copy</button>
</div>
<p>Bu veritabanında <code>products</code> tablosuna eşleştirilmiş <code>Product</code> adında bir model 
oluşturur. Bunu yaparak ayrıca modelinizin özelliklerine erişir gibi eşleşmiş 
olduğu tablonun sütunlarına erişebilirsiniz. Diyelim <code>products</code> tablosu SQL 
kullanarak üretildi ve yapısı şöyle:</p><div class="code_container">
<pre><code class="highlight sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">products</span> <span class="p">(</span>
  <span class="n">id</span> <span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">auto_increment</span><span class="p">,</span>
  <span class="n">name</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span>  <span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">);</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="CREATE TABLE products (
  id int(11) NOT NULL auto_increment,
  name varchar(255),
  PRIMARY KEY  (id)
);
">Copy</button>
</div>
<p>Yukarıdaki şema iki sütunlu bir tablo tanımlıyor: <code>id</code> ve <code>name</code>. Bu tablodaki her 
kayıt bu iki parametrenin birleşmesinden oluşur. Bu sayede aşağıdaki gibi kodlarla 
kayıtlar üzerinde çalışabilirsiniz:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="nb">p</span> <span class="o">=</span> <span class="no">Product</span><span class="p">.</span><span class="nf">new</span>
<span class="nb">p</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s2">"Some Book"</span>
<span class="nb">puts</span> <span class="nb">p</span><span class="p">.</span><span class="nf">name</span> <span class="c1"># "Some Book"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='p = Product.new
p.name = "Some Book"
puts p.name # "Some Book"
'>Copy</button>
</div>
<h3 id="i̇simlendirme-kabulleri-üzerine-yazmak"><a class="anchorlink" href="#i%CC%87simlendirme-kabulleri-%C3%BCzerine-yazmak">4 İsimlendirme Kabulleri Üzerine Yazmak</a></h3><p>Eğer farklı bir isimlendirme kullanmak isterseniz ya da Rails uygulamanızı eski 
bir veritabanı ile kullanmak isterseniz ne olacak? Problem yok, default isimlendirme 
kuralları üzerine kolayca yazabilirsiniz.</p><p><code>ApplicationRecord</code> sınıfı <code>ActiveRecord::Base</code> sınıfından kalıtımla üretilmiştir 
ve bir çok yardımcı metodlar içerir. <code>ActiveRecord::Base.table_name=</code> formatını 
kullanarak veritabanı tablo adınızı belirtebilirsiniz:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Product</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="nb">self</span><span class="p">.</span><span class="nf">table_name</span> <span class="o">=</span> <span class="s2">"my_products"</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='class Product &lt; ApplicationRecord
  self.table_name = "my_products"
end
'>Copy</button>
</div>
<p>Böyle yaparsanız test tanımlamanızı içeren sınıf adını (my_products.yml)
 <code>set_fixture_class</code> metodu kullanarak bildirmek zorundasınız:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">ProductTest</span> <span class="o">&lt;</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">TestCase</span>
  <span class="n">set_fixture_class</span> <span class="ss">my_products: </span><span class="no">Product</span>
  <span class="n">fixtures</span> <span class="ss">:my_products</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class ProductTest &lt; ActiveSupport::TestCase
  set_fixture_class my_products: Product
  fixtures :my_products
  # ...
end
">Copy</button>
</div>
<p>Ayrıca tablonun primary key sütunu için <code>id</code> den başka isim vermek için 
<code>ActiveRecord::Base.primary_key=</code> metodunu kullanabilirsiniz:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Product</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="nb">self</span><span class="p">.</span><span class="nf">primary_key</span> <span class="o">=</span> <span class="s2">"product_id"</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='class Product &lt; ApplicationRecord
  self.primary_key = "product_id"
end
'>Copy</button>
</div>
<div class="note"><p>Active Record adı <code>id</code> olan ama primary key olmayan sütunu desteklemez.</p></div><h3 id="crud-veriyi-okumak-ve-yazmak"><a class="anchorlink" href="#crud-veriyi-okumak-ve-yazmak">5 CRUD: Veriyi Okumak ve Yazmak</a></h3><p>CRUD veriler üzerinde işlem yaparken kullandığımız dört kelimenin baş harflerinden 
oluşur: <strong>C</strong>reate, <strong>R</strong>ead, <strong>U</strong>pdate ve <strong>D</strong>elete. Active Record tablolarında 
saklanan verilere erişmek ve işlemek için gereken metodları otomatik olarak üretir.</p><h4 id="create-üret"><a class="anchorlink" href="#create-%C3%BCret">5.1 Create - Üret</a></h4><p>Active Record nesneleri bir hash veya bir blok olarak özellik değerleri verilerek 
üretildiği gibi nesne üretildikten sonra da özellik değerleri verilebilir. <code>new</code> 
metodu sadece yeni bir nesne dönerken, <code>create</code> metodu hem yeni nesneyi döner hem 
de veritabanına kaydeder.</p><p>Örneğin, bir <code>User</code> modeli <code>name</code> ve <code>occupation</code> özellikleri ile veriliyorsa 
<code>create</code> metodu yeni kayıt oluşturur ve veritabanına kaydeder:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="ss">name: </span><span class="s2">"David"</span><span class="p">,</span> <span class="ss">occupation: </span><span class="s2">"Code Artist"</span><span class="p">)</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='user = User.create(name: "David", occupation: "Code Artist")
'>Copy</button>
</div>
<p><code>new</code> metodu kullanarak bir nesne oluşumu üretilir ama kaydedilmez:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">new</span>
<span class="n">user</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s2">"David"</span>
<span class="n">user</span><span class="p">.</span><span class="nf">occupation</span> <span class="o">=</span> <span class="s2">"Code Artist"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='user = User.new
user.name = "David"
user.occupation = "Code Artist"
'>Copy</button>
</div>
<p><code>user.save</code> çağrısı yapılırsa kayıt veritabanına kaydedilir.</p><p>Son olarak, eğer blok verildiyse <code>create</code> de <code>new</code> de yeni üretilen nesneyi 
blok içine gönderir:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">u</span><span class="o">|</span>
  <span class="n">u</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s2">"David"</span>
  <span class="n">u</span><span class="p">.</span><span class="nf">occupation</span> <span class="o">=</span> <span class="s2">"Code Artist"</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='user = User.new do |u|
  u.name = "David"
  u.occupation = "Code Artist"
end
'>Copy</button>
</div>
<h4 id="read-oku"><a class="anchorlink" href="#read-oku">5.2 Read - Oku</a></h4><p>Active Record veritabanındaki verilere erişmek için zengin bir API sahibidir. 
Aşağıda Active Record tarafından sağlanan birkaç veri erişim metodu görebilirsiniz.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># Tüm kullanıcı kayıtlarını içeren bir kolleksiyon döner</span>
<span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">all</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# Tüm kullanıcı kayıtlarını içeren bir kolleksiyon döner
users = User.all
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># tablodaki ilk kullanıcı kaydını döner</span>
<span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">first</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# tablodaki ilk kullanıcı kaydını döner
user = User.first
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># name özelliği David olan ilk kullanıcıyı döner</span>
<span class="n">david</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find_by</span><span class="p">(</span><span class="ss">name: </span><span class="s1">'David'</span><span class="p">)</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# name özelliği David olan ilk kullanıcıyı döner
david = User.find_by(name: 'David')
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># işi Code Artist ve adı David olan tüm kullanıcıları </span>
<span class="c1"># created_at sütunu verisine göre azalan sıralama</span>
<span class="n">users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">name: </span><span class="s1">'David'</span><span class="p">,</span> <span class="ss">occupation: </span><span class="s1">'Code Artist'</span><span class="p">).</span><span class="nf">order</span><span class="p">(</span><span class="ss">created_at: :desc</span><span class="p">)</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# işi Code Artist ve adı David olan tüm kullanıcıları 
# created_at sütunu verisine göre azalan sıralama
users = User.where(name: 'David', occupation: 'Code Artist').order(created_at: :desc)
">Copy</button>
</div>
<p>Active Record modellerinde sorgular hakkında daha fazla bilgi 
<a href="active_record_querying.html">Active Record Sorgu Arabirimi</a> klavuzunda.</p><h4 id="update-güncelle"><a class="anchorlink" href="#update-g%C3%BCncelle">5.3 Update - Güncelle</a></h4><p>Bir Active Record nesnesi veritabanından okunduktan sonra özellikleri değiştirilip, 
veritabanına kaydedilebilir.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find_by</span><span class="p">(</span><span class="ss">name: </span><span class="s1">'David'</span><span class="p">)</span>
<span class="n">user</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Dave'</span>
<span class="n">user</span><span class="p">.</span><span class="nf">save</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="user = User.find_by(name: 'David')
user.name = 'Dave'
user.save
">Copy</button>
</div>
<p>Bunu kısaca özellik isimlerine hash eşleme ile de yapabiliriz, bu durumda şöyle yazılır:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find_by</span><span class="p">(</span><span class="ss">name: </span><span class="s1">'David'</span><span class="p">)</span>
<span class="n">user</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="ss">name: </span><span class="s1">'Dave'</span><span class="p">)</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="user = User.find_by(name: 'David')
user.update(name: 'Dave')
">Copy</button>
</div>
<p>Bu şekil birçok özelliği bir kerede değiştirmek için kullanışlıdır. Diğer taraftan 
bir grup kaydın hepsinde değişiklik yapmak isterseniz <code>update_all</code> sınıf metodu 
işinizi görecektir:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">User</span><span class="p">.</span><span class="nf">update_all</span> <span class="s2">"max_login_attempts = 3, must_change_password = 'true'"</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="User.update_all &quot;max_login_attempts = 3, must_change_password = 'true'&quot;
">Copy</button>
</div>
<p>Bu aşağıdakini yazmakla aynı işi yapar:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">User</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="ss">:all</span><span class="p">,</span> <span class="ss">max_login_attempts: </span><span class="mi">3</span><span class="p">,</span> <span class="ss">must_change_password: </span><span class="kp">true</span><span class="p">)</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="User.update(:all, max_login_attempts: 3, must_change_password: true)
">Copy</button>
</div>
<h4 id="delete-sil"><a class="anchorlink" href="#delete-sil">5.4 Delete - Sil</a></h4><p>Benzer şekilde bir kayıt Active Record objesine alındıktan sonra yok edilebilir, 
bu veritabanından da kaydı silecektir.</p><div class="code_container">
<pre><code class="highlight ruby"><span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find_by</span><span class="p">(</span><span class="ss">name: </span><span class="s1">'David'</span><span class="p">)</span>
<span class="n">user</span><span class="p">.</span><span class="nf">destroy</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="user = User.find_by(name: 'David')
user.destroy
">Copy</button>
</div>
<p>Eğer bir grup kaydı yok etmek isterseniz <code>destroy_by</code> ya da <code>destroy_all</code> metodlarını
kullanabilirsiniz:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="c1"># adı David olan tüm kullanıcıları bul ve sil</span>
<span class="no">User</span><span class="p">.</span><span class="nf">destroy_by</span><span class="p">(</span><span class="ss">name: </span><span class="s1">'David'</span><span class="p">)</span>

<span class="c1"># tüm kullanıcıları sil</span>
<span class="no">User</span><span class="p">.</span><span class="nf">destroy_all</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="# adı David olan tüm kullanıcıları bul ve sil
User.destroy_by(name: 'David')

# tüm kullanıcıları sil
User.destroy_all
">Copy</button>
</div>
<h3 id="doğrulamalar"><a class="anchorlink" href="#do%C4%9Frulamalar">6 Doğrulamalar</a></h3><p>Active Record allows you to validate the state of a model before it gets written
into the database. There are several methods that you can use to check your
models and validate that an attribute value is not empty, is unique and not
already in the database, follows a specific format, and many more.</p><p>Validation is a very important issue to consider when persisting to the database, so
the methods <code>save</code> and <code>update</code> take it into account when
running: they return <code>false</code> when validation fails and they don't actually
perform any operations on the database. All of these have a bang counterpart (that
is, <code>save!</code> and <code>update!</code>), which are stricter in that
they raise the exception <code>ActiveRecord::RecordInvalid</code> if validation fails.
A quick example to illustrate:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">validates</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class User &lt; ApplicationRecord
  validates :name, presence: true
end
">Copy</button>
</div>
<div class="code_container">
<pre><code class="highlight irb"><span class="gp">irb&gt;</span><span class="w"> </span><span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">new</span>
<span class="gp">irb&gt;</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="nf">save</span>
<span class="p">=&gt;</span> <span class="kp">false</span>
<span class="gp">irb&gt;</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="nf">save!</span>
<span class="go">ActiveRecord::RecordInvalid: Validation failed: Name can't be blank
</span></code></pre>
<button class="clipboard-button" data-clipboard-text="user = User.new
user.save
user.save!
">Copy</button>
</div>
<p>You can learn more about validations in the <a href="active_record_validations.html">Active Record Validations
guide</a>.</p><h3 id="callbacks"><a class="anchorlink" href="#callbacks">7 Callbacks</a></h3><p>Active Record callbacks allow you to attach code to certain events in the
life-cycle of your models. This enables you to add behavior to your models by
transparently executing code when those events occur, like when you create a new
record, update it, destroy it, and so on. You can learn more about callbacks in
the <a href="active_record_callbacks.html">Active Record Callbacks guide</a>.</p><h3 id="migrations"><a class="anchorlink" href="#migrations">8 Migrations</a></h3><p>Rails provides a domain-specific language for managing a database schema called
migrations. Migrations are stored in files which are executed against any
database that Active Record supports using <code>rake</code>. Here's a migration that
creates a table:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">CreatePublications</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mf">7.1</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">create_table</span> <span class="ss">:publications</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:title</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">text</span> <span class="ss">:description</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">references</span> <span class="ss">:publication_type</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">integer</span> <span class="ss">:publisher_id</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:publisher_type</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">boolean</span> <span class="ss">:single_issue</span>

      <span class="n">t</span><span class="p">.</span><span class="nf">timestamps</span>
    <span class="k">end</span>
    <span class="n">add_index</span> <span class="ss">:publications</span><span class="p">,</span> <span class="ss">:publication_type_id</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class CreatePublications &lt; ActiveRecord::Migration[7.1]
  def change
    create_table :publications do |t|
      t.string :title
      t.text :description
      t.references :publication_type
      t.integer :publisher_id
      t.string :publisher_type
      t.boolean :single_issue

      t.timestamps
    end
    add_index :publications, :publication_type_id
  end
end
">Copy</button>
</div>
<p>Rails keeps track of which files have been committed to the database and
provides rollback features. To actually create the table, you'd run <code>bin/rails db:migrate</code>,
and to roll it back, <code>bin/rails db:rollback</code>.</p><p>Note that the above code is database-agnostic: it will run in MySQL,
PostgreSQL, Oracle, and others. You can learn more about migrations in the
<a href="active_record_migrations.html">Active Record Migrations guide</a>.</p>

        <h3>Feedback</h3>
        <p>
          You're encouraged to help improve the quality of this guide.
        </p>
        <p>
          Please contribute if you see any typos or factual errors.
          To get started, you can read our <a href="https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation">documentation contributions</a> section.
        </p>
        <p>
          You may also find incomplete content or stuff that is not up to date.
          Please do add any missing documentation for main. Make sure to check
          <a href="https://edgeguides.rubyonrails.org">Edge Guides</a> first to verify
          if the issues are already fixed or not on the main branch.
          Check the <a href="ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</a>
          for style and conventions.
        </p>
        <p>
          If for whatever reason you spot something to fix but cannot patch it yourself, please
          <a href="https://github.com/rails/rails/issues">open an issue</a>.
        </p>
        <p>And last but not least, any kind of discussion regarding Ruby on Rails
          documentation is very welcome on the <a href="https://discuss.rubyonrails.org/c/rubyonrails-docs">rubyonrails-docs mailing list</a>.
        </p>
      </div>
    </div>
  </div>

  <hr class="hide" />
  <div id="footer">
    <div class="wrapper">
      <p>This work is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a> License</p>
<p>"Rails", "Ruby on Rails", and the Rails logo are trademarks of David Heinemeier Hansson. All rights reserved.</p>

    </div>
  </div>
</body>
</html>
