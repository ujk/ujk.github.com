<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Rails&#39;e Başlangıç — Ruby on Rails Guides</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css" data-turbolinks-track="reload">
  <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
  <link rel="stylesheet" type="text/css" href="stylesheets/highlight.css" data-turbolinks-track="reload">
  <link href="images/favicon.ico" rel="icon" type="image/x-icon" />
  <script src="javascripts/turbolinks.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/clipboard.js" data-turbolinks-track="reload"></script>
  <script src="javascripts/guides.js" data-turbolinks-track="reload"></script>
  <meta property="og:title" content="Rails&#39;e Başlangıç — Ruby on Rails Guides" />
  <meta name="description" content="Rails&#39;e BaşlangıçBu klavuz Ruby on Rails kurulum ve çalıştırılmasını kapsar.Bu klavuzu bitirince şunları öğrenmiş olacaksınız: Rails nasıl kurulur, yeni bir Rails uygulaması üretmek ve uygulamanızı bir veri tabnına bağlamak Rails uygulaması genel yerleşimi. MVC (Model, View, Controller) yapısının temel prensipleri ve RESTful tasarım. Bir Rails uygulaması başlangıç parçalarını nasıl çabucak üretirsiniz." />
  <meta property="og:description" content="Rails&#39;e BaşlangıçBu klavuz Ruby on Rails kurulum ve çalıştırılmasını kapsar.Bu klavuzu bitirince şunları öğrenmiş olacaksınız: Rails nasıl kurulur, yeni bir Rails uygulaması üretmek ve uygulamanızı bir veri tabnına bağlamak Rails uygulaması genel yerleşimi. MVC (Model, View, Controller) yapısının temel prensipleri ve RESTful tasarım. Bir Rails uygulaması başlangıç parçalarını nasıl çabucak üretirsiniz." />
  <meta property="og:locale" content="en_US" />
  <meta property="og:site_name" content="Ruby on Rails Guides" />
  <meta property="og:image" content="https://avatars.githubusercontent.com/u/4223" />
  <meta property="og:type" content="website" />
</head>
<body class="guide">
  <div>
    <div id="version-badge">edge</div>
  </div>
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">More at <a href="https://rubyonrails.org/">rubyonrails.org:</a> </strong>
      <span class="red-button more-info-button">
        More Ruby on Rails
      </span>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="https://rubyonrails.org/blog">Blog</a></li>
        <li class="more-info"><a href="https://guides.rubyonrails.org/">Guides</a></li>
        <li class="more-info"><a href="https://api.rubyonrails.org/">API</a></li>
        <li class="more-info"><a href="https://discuss.rubyonrails.org/">Forum</a></li>
        <li class="more-info"><a href="https://github.com/rails/rails">Contribute on GitHub</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="index.html" title="Return to home page">Guides.rubyonrails.org</a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="index.html">Home</a></li>
        <li class="guides-index guides-index-large">
          <a href="index.html" id="guidesMenu" class="guides-index-item nav-item">Guides Index</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr />
            <dl class="guides-section-container">
                <div class="guides-section">
                  <dt>Buradan Başlayın</dt>
                  <dd><a href="getting_started.html">Rails&#39;e Başlamak</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Models</dt>
                  <dd><a href="active_record_basics.html">Active Record Basics</a></dd>
                  <dd><a href="active_record_migrations.html">Active Record Migrations</a></dd>
                  <dd><a href="active_record_validations.html">Active Record Validations</a></dd>
                  <dd><a href="active_record_callbacks.html">Active Record Callbacks</a></dd>
                  <dd><a href="association_basics.html">Active Record Associations</a></dd>
                  <dd><a href="active_record_querying.html">Active Record Query Interface</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Views</dt>
                  <dd><a href="layouts_and_rendering.html">Layouts and Rendering in Rails</a></dd>
                  <dd><a href="form_helpers.html">Action View Form Helpers</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Controllers</dt>
                  <dd><a href="action_controller_overview.html">Action Controller Overview</a></dd>
                  <dd><a href="routing.html">Rails Routing from the Outside In</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Other Components</dt>
                  <dd><a href="active_support_core_extensions.html">Active Support Core Extensions</a></dd>
                  <dd><a href="action_mailer_basics.html">Action Mailer Basics</a></dd>
                  <dd><a href="active_job_basics.html">Active Job Basics</a></dd>
                  <dd><a href="active_storage_overview.html">Active Storage Overview</a></dd>
                  <dd><a href="action_cable_overview.html">Action Cable Overview</a></dd>
                  <dd><a href="webpacker.html">Webpacker</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Digging Deeper</dt>
                  <dd><a href="i18n.html">Rails Internationalization (I18n) API</a></dd>
                  <dd><a href="testing.html">Testing Rails Applications</a></dd>
                  <dd><a href="security.html">Securing Rails Applications</a></dd>
                  <dd><a href="debugging_rails_applications.html">Debugging Rails Applications</a></dd>
                  <dd><a href="configuring.html">Configuring Rails Applications</a></dd>
                  <dd><a href="command_line.html">The Rails Command Line</a></dd>
                  <dd><a href="asset_pipeline.html">The Asset Pipeline</a></dd>
                  <dd><a href="working_with_javascript_in_rails.html">Working with JavaScript in Rails</a></dd>
                  <dd><a href="autoloading_and_reloading_constants.html">Autoloading and Reloading Constants</a></dd>
                  <dd><a href="classic_to_zeitwerk_howto.html">Classic to Zeitwerk HOWTO</a></dd>
                  <dd><a href="caching_with_rails.html">Caching with Rails: An Overview</a></dd>
                  <dd><a href="api_app.html">Using Rails for API-only Applications</a></dd>
                  <dd><a href="active_record_multiple_databases.html">Multiple Databases with Active Record</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Extending Rails</dt>
                  <dd><a href="rails_on_rack.html">Rails on Rack</a></dd>
                  <dd><a href="generators.html">Creating and Customizing Rails Generators &amp; Templates</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Contributions</dt>
                  <dd><a href="contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</a></dd>
                  <dd><a href="api_documentation_guidelines.html">API Documentation Guidelines</a></dd>
                  <dd><a href="ruby_on_rails_guides_guidelines.html">Guides Guidelines</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Policies</dt>
                  <dd><a href="maintenance_policy.html">Maintenance Policy</a></dd>
                </div>
                <div class="guides-section">
                  <dt>Release Notes</dt>
                  <dd><a href="upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</a></dd>
                  <dd><a href="7_0_release_notes.html">Version 7.0 - December 2021</a></dd>
                  <dd><a href="6_1_release_notes.html">Version 6.1 - December 2020</a></dd>
                  <dd><a href="6_0_release_notes.html">Version 6.0 - August 2019</a></dd>
                  <dd><a href="5_2_release_notes.html">Version 5.2 - April 2018</a></dd>
                  <dd><a href="5_1_release_notes.html">Version 5.1 - April 2017</a></dd>
                  <dd><a href="5_0_release_notes.html">Version 5.0 - June 2016</a></dd>
                  <dd><a href="4_2_release_notes.html">Version 4.2 - December 2014</a></dd>
                  <dd><a href="4_1_release_notes.html">Version 4.1 - April 2014</a></dd>
                  <dd><a href="4_0_release_notes.html">Version 4.0 - June 2013</a></dd>
                  <dd><a href="3_2_release_notes.html">Version 3.2 - January 2012</a></dd>
                  <dd><a href="3_1_release_notes.html">Version 3.1 - August 2011</a></dd>
                  <dd><a href="3_0_release_notes.html">Version 3.0 - August 2010</a></dd>
                  <dd><a href="2_3_release_notes.html">Version 2.3 - March 2009</a></dd>
                  <dd><a href="2_2_release_notes.html">Version 2.2 - November 2008</a></dd>
                </div>
            </dl>
          </div>
        </li>
        <li><a class="nav-item" href="contributing_to_ruby_on_rails.html">Contribute</a></li>
        <li class="guides-index guides-index-small">
          <select class="guides-index-item nav-item">
            <option value="index.html">Guides Index</option>
              <optgroup label="Buradan Başlayın">
                  <option value="getting_started.html">Rails&#39;e Başlamak</option>
              </optgroup>
              <optgroup label="Models">
                  <option value="active_record_basics.html">Active Record Basics</option>
                  <option value="active_record_migrations.html">Active Record Migrations</option>
                  <option value="active_record_validations.html">Active Record Validations</option>
                  <option value="active_record_callbacks.html">Active Record Callbacks</option>
                  <option value="association_basics.html">Active Record Associations</option>
                  <option value="active_record_querying.html">Active Record Query Interface</option>
              </optgroup>
              <optgroup label="Views">
                  <option value="layouts_and_rendering.html">Layouts and Rendering in Rails</option>
                  <option value="form_helpers.html">Action View Form Helpers</option>
              </optgroup>
              <optgroup label="Controllers">
                  <option value="action_controller_overview.html">Action Controller Overview</option>
                  <option value="routing.html">Rails Routing from the Outside In</option>
              </optgroup>
              <optgroup label="Other Components">
                  <option value="active_support_core_extensions.html">Active Support Core Extensions</option>
                  <option value="action_mailer_basics.html">Action Mailer Basics</option>
                  <option value="active_job_basics.html">Active Job Basics</option>
                  <option value="active_storage_overview.html">Active Storage Overview</option>
                  <option value="action_cable_overview.html">Action Cable Overview</option>
                  <option value="webpacker.html">Webpacker</option>
              </optgroup>
              <optgroup label="Digging Deeper">
                  <option value="i18n.html">Rails Internationalization (I18n) API</option>
                  <option value="testing.html">Testing Rails Applications</option>
                  <option value="security.html">Securing Rails Applications</option>
                  <option value="debugging_rails_applications.html">Debugging Rails Applications</option>
                  <option value="configuring.html">Configuring Rails Applications</option>
                  <option value="command_line.html">The Rails Command Line</option>
                  <option value="asset_pipeline.html">The Asset Pipeline</option>
                  <option value="working_with_javascript_in_rails.html">Working with JavaScript in Rails</option>
                  <option value="autoloading_and_reloading_constants.html">Autoloading and Reloading Constants</option>
                  <option value="classic_to_zeitwerk_howto.html">Classic to Zeitwerk HOWTO</option>
                  <option value="caching_with_rails.html">Caching with Rails: An Overview</option>
                  <option value="api_app.html">Using Rails for API-only Applications</option>
                  <option value="active_record_multiple_databases.html">Multiple Databases with Active Record</option>
              </optgroup>
              <optgroup label="Extending Rails">
                  <option value="rails_on_rack.html">Rails on Rack</option>
                  <option value="generators.html">Creating and Customizing Rails Generators &amp; Templates</option>
              </optgroup>
              <optgroup label="Contributions">
                  <option value="contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</option>
                  <option value="api_documentation_guidelines.html">API Documentation Guidelines</option>
                  <option value="ruby_on_rails_guides_guidelines.html">Guides Guidelines</option>
              </optgroup>
              <optgroup label="Policies">
                  <option value="maintenance_policy.html">Maintenance Policy</option>
              </optgroup>
              <optgroup label="Release Notes">
                  <option value="upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</option>
                  <option value="7_0_release_notes.html">Version 7.0 - December 2021</option>
                  <option value="6_1_release_notes.html">Version 6.1 - December 2020</option>
                  <option value="6_0_release_notes.html">Version 6.0 - August 2019</option>
                  <option value="5_2_release_notes.html">Version 5.2 - April 2018</option>
                  <option value="5_1_release_notes.html">Version 5.1 - April 2017</option>
                  <option value="5_0_release_notes.html">Version 5.0 - June 2016</option>
                  <option value="4_2_release_notes.html">Version 4.2 - December 2014</option>
                  <option value="4_1_release_notes.html">Version 4.1 - April 2014</option>
                  <option value="4_0_release_notes.html">Version 4.0 - June 2013</option>
                  <option value="3_2_release_notes.html">Version 3.2 - January 2012</option>
                  <option value="3_1_release_notes.html">Version 3.1 - August 2011</option>
                  <option value="3_0_release_notes.html">Version 3.0 - August 2010</option>
                  <option value="2_3_release_notes.html">Version 2.3 - March 2009</option>
                  <option value="2_2_release_notes.html">Version 2.2 - November 2008</option>
              </optgroup>
          </select>
        </li>
      </ul>
    </div>
  </div>
  <hr class="hide" />

  <div id="feature">
    <div class="wrapper">
      <h2>Rails&#39;e Başlangıç</h2><p>Bu klavuz Ruby on Rails kurulum ve çalıştırılmasını kapsar.</p><p>Bu klavuzu bitirince şunları öğrenmiş olacaksınız:</p>
<ul>
<li>Rails nasıl kurulur, yeni bir Rails uygulaması üretmek ve uygulamanızı bir veri tabnına bağlamak</li>
<li>Rails uygulaması genel yerleşimi.</li>
<li>MVC (Model, View, Controller) yapısının temel prensipleri ve RESTful tasarım.</li>
<li>Bir Rails uygulaması başlangıç parçalarını nasıl çabucak üretirsiniz.</li>
</ul>


                <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <ol class="chapters">
<li><a href="#klavuz-kabulleri">Klavuz Kabulleri</a></li>
<li><a href="#rails-nedir-questionmark">Rails Nedir?</a></li>
<li>
<a href="#yeni-bir-rails-projesi-%C3%BCretmek">Yeni Bir Rails Projesi Üretmek</a>

<ul>
<li><a href="#yeni-bir-rails-projesi-%C3%BCretmek-rails-kurulumu">Rails Kurulumu</a></li>
<li><a href="#g%C3%BCnl%C3%BCk-uygulamas%C4%B1n%C4%B1-%C3%BCretmek">Günlük Uygulamasını Üretmek</a></li>
</ul>
</li>
<li>
<a href="#merhaba-rails-bang">Merhaba, Rails!</a>

<ul>
<li><a href="#web-server-%C3%A7al%C4%B1%C5%9Ft%C4%B1rmak">Web Server Çalıştırmak</a></li>
<li><a href="#merhaba-diyen-rails">"Merhaba" Diyen Rails</a></li>
<li><a href="#uygulaman%C4%B1n-ana-sayfas%C4%B1n%C4%B1-ayarlamak">Uygulamanın Ana Sayfasını Ayarlamak</a></li>
</ul>
</li>
<li><a href="#otomatik-y%C3%BCkleme">Otomatik Yükleme</a></li>
<li>
<a href="#mvc-ve-siz">MVC ve Siz</a>

<ul>
<li><a href="#bir-model-%C3%BCretmek">Bir Model Üretmek</a></li>
<li><a href="#veritaban%C4%B1-migrasyonlar%C4%B1">Veritabanı Migrasyonları</a></li>
<li><a href="#veritaban%C4%B1yla-etkile%C5%9Fim-i%CC%87%C3%A7in-model-kullan%C4%B1m%C4%B1">Veritabanıyla Etkileşim İçin Model Kullanımı</a></li>
<li><a href="#bir-article-listesi-g%C3%B6stermek">Bir Article Listesi Göstermek</a></li>
</ul>
</li>
<li>
<a href="#crud-laz%C4%B1msa-crud-yap">CRUD Lazımsa CRUD Yap</a>

<ul>
<li><a href="#tek-bir-article-g%C3%B6stermek">Tek Bir Article Göstermek</a></li>
<li><a href="#resourceful-routing">Resourceful Routing</a></li>
<li><a href="#yeni-makale-eklemek">Yeni Makale Eklemek</a></li>
<li><a href="#bir-makaleyi-de%C4%9Fi%C5%9Ftirmek">Bir Makaleyi Değiştirmek</a></li>
<li><a href="#bir-makaleyi-silmek">Bir Makaleyi Silmek</a></li>
</ul>
</li>
<li>
<a href="#i%CC%87kinci-bir-model-eklemek">İkinci Bir Model Eklemek</a>

<ul>
<li><a href="#modeli-%C3%BCretmek">Modeli Üretmek</a></li>
<li><a href="#modelleri-i%CC%87li%C5%9Fkilendirmek">Modelleri İlişkilendirmek</a></li>
<li><a href="#yorumlar-i%CC%87%C3%A7in-bir-y%C3%B6nlendirme-eklemek">Yorumlar İçin Bir Yönlendirme Eklemek</a></li>
<li><a href="#kontrol%C3%B6r-eklenmesi">Kontrolör Eklenmesi</a></li>
</ul>
</li>
<li>
<a href="#kod-d%C3%BCzenleme">Kod Düzenleme</a>

<ul>
<li><a href="#par%C3%A7a-g%C3%B6rsel-kolleksiyonlar%C4%B1-yay%C4%B1nlamak">Parça Görsel Kolleksiyonları Yayınlamak</a></li>
<li><a href="#par%C3%A7a-g%C3%B6rsel-form-yay%C4%B1nlamak">Parça Görsel Form Yayınlamak</a></li>
<li><a href="#concern-kodlar%C4%B1n%C4%B1-kullanmak">Concern Kodlarını Kullanmak</a></li>
</ul>
</li>
<li>
<a href="#yorum-silmek">Yorum Silmek</a>

<ul>
<li><a href="#i%CC%87li%C5%9Fkilendirilmi%C5%9F-nesneleri-silmek">İlişkilendirilmiş Nesneleri Silmek</a></li>
</ul>
</li>
<li>
<a href="#g%C3%BCvenlik">Güvenlik</a>

<ul>
<li><a href="#basit-yetkilendirme">Basit Yetkilendirme</a></li>
<li><a href="#di%C4%9Fer-g%C3%BCvenlik-hususlar%C4%B1">Diğer Güvenlik Hususları</a></li>
</ul>
</li>
<li><a href="#s%C4%B1rada-ne-var-questionmark">Sırada Ne Var?</a></li>
<li><a href="#configuration-gotchas">Configuration Gotchas</a></li>
</ol>

          </div>

    </div>
  </div>

  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <h3 id="klavuz-kabulleri"><a class="anchorlink" href="#klavuz-kabulleri">1 Klavuz Kabulleri</a></h3><p>Bu klavuz sıfırdan bir Rails uygulaması geliştirmek isteyen başlangıç seviyesi kullanıcılar
için hazırlandı. Rails ile ilgili önceden bir bilginiz olması gerekmez.</p><p>Rails bir web uygulama geliştirme iskeleti ve Ruby programlama dili üzerinde çalışır.
Ruby ile önceden bir deneyiminiz yoksa doğrudan Rails'e dalan bir yazı bulacaksınız.
Ruby öğrenmek için hazırlanmış birkaç çevrim içi kaynak:</p>
<ul>
<li><a href="https://www.ruby-lang.org/tr/documentation/">Resmi Ruby Programlama Dili web sitesi</a></li>
<li><a href="https://github.com/EbookFoundation/free-programming-books/blob/master/books/free-programming-books-langs.md#ruby">Ücretsiz programlama kitapları</a></li>
</ul>
<p>Bazı dökümanlar halen mükemmel olmalarına rağmen Ruby eski versiyonları üzerine yazılmıştır. 
Rails güncel yapısında kullanılmayan özellikleri olabilir.</p><h3 id="rails-nedir-questionmark"><a class="anchorlink" href="#rails-nedir-questionmark">2 Rails Nedir?</a></h3><p>Rails bir web uygulama geliştirme iskeleti ve Ruby programlama dili ile yazılmış. 
Her geliştiricinin başlarken ihtiyacı olabilecek şeyleri kabuller halinde vererek 
web uygulama geliştirmeyi kolaylaştırır. Diğer diller ve iskeletlerden çok daha az 
kod yazarak daha fazla sonuç elde etmenizi sağlar. Uzmanlaşmış Rails geliştiricileri
Rails'in ayrıca programlamayı eğlenceli hale getirdiğini söylerler.</p><p>Rails biraz sivri akıllıdır. İşleri yapmanın mutlaka bir en iyi yolu olduğunu bilir 
ve sizi buna zorlar, bazı durumlarda alternetiflerden de caydırır. "Rails Yolu" nu 
öğrenmişseniz üretkenlikte korkunç hızlandığınızı farkedeceksiniz. Eğer başka 
dillerden gelen eski alışkanlıklarınızda devam etmeye inat ederseniz büyük 
ihtimalle daha az mutlu olacaksınız.</p><p>Rails filozofisi iki temel klavuz prensipten oluşur:</p>
<ul>
<li>
<strong>Don't Repeat Yourself:</strong> DRY (Kendini tekrar etme!) bir yazılım geliştirme prensibi. 
"Bir sistem içinde bir bilgi parçası tek bir yerde açıkça ve tam olarak tanımlanır". 
Aynı bilgiyi tekrar tekrar yazmayarak kodumuz daha sürdürülebilir, daha geliştirilebilir 
ve daha sorunsuz olacaktır.</li>
<li>
<strong>Convention Over Configuration:</strong> (Konfigürasyon yerine kabuller) Rails bir web 
uygulamasında yapılması gerekenler hakkında en iy fikirlere sahiptir. Bunları kabuller 
olarak sıralar. Bir sürü konfigürasyon dosyasına ihtiyaç duymadan bu kabuller doğrultusunda
uygulama geliştirebilirsiniz. </li>
</ul>
<h3 id="yeni-bir-rails-projesi-üretmek"><a class="anchorlink" href="#yeni-bir-rails-projesi-%C3%BCretmek">3 Yeni Bir Rails Projesi Üretmek</a></h3><p>Bu klavuzu okumanın en iyi yolu adım adım takip etmek. Yapacağımız örnek uygulamayı 
çalıştırmak için bu adımlar yeterlidir, ayrıca bir kodlama gerekmez.</p><p>Bu klavuzu takip ederek <code>günlük</code> adı verilen bir Rails projesi ile basit bir weblog 
yapacaksınız. Uygulamayı yapmaya başlamadan önce Rails kurulu olduğundan emin olalım.</p><div class="note"><p>Aşağıdaki örnekler UNIX-benzeri işletim sisteminde <code>$</code> işareti kullanarak terminal 
ile girilen komutlar olduğunu belirtir. Gerçeği burada gösterilenden farklı olabilir. 
Windows kullanıyorsanız sizdeki terminalde <code>C:\source_code&gt;</code> benzeri bir şey yazacaktır.</p></div><h4 id="yeni-bir-rails-projesi-üretmek-rails-kurulumu"><a class="anchorlink" href="#yeni-bir-rails-projesi-%C3%BCretmek-rails-kurulumu">3.1 Rails Kurulumu</a></h4><p>Rails kurmadan önce sisteminizde gerekli diğer kurulumlar var mı kontrol etmelisiniz.
Bunlar:</p>
<ul>
<li>Ruby</li>
<li>SQLite3</li>
</ul>
<div class="note"><p>Windows 10 kullanıcıları sizin işiniz biraz daha zor. Bu güne kadar karşılaştıklarım 
için şu linklere bakın : <a href="https://ujk-ujk.blogspot.com/2022/04/windows-10-icin-rails-kurulumu.html">Windows 10 Rails Kurulumu</a> , <a href="https://www.digitalocean.com/community/tutorials/how-to-install-ruby-on-rails-with-rbenv-on-ubuntu-20-04">ruby-build kurulması</a> ve bu klavuzu bilgisayarıma 
kurmaya çalışırken sorun olan <a href="https://lynxbee.com/how-to-resolve-fatal-error-curses-h-no-such-file-or-directory/#.YmuzJFBBzIU">Curses gem kurulum hatası</a></p></div><h5 id="ruby-kurulumu"><a class="anchorlink" href="#ruby-kurulumu">3.1.1 Ruby Kurulumu</a></h5><p>Bir komut satırı açın. macOS'da Terminal.app açın; Windows'ta Start menüden "Run" seçin ve
<code>cmd.exe</code> çalıştırın. <code>$</code> işareti ile aşağıda verilecek tüm komutlar bu komut satırnda 
girilecektir. Kurulu olan Ruby versiyonunu görmek için:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">ruby</span> <span class="nt">-v</span>
<span class="go">ruby 3.1.2p20 (2022-04-12 revision 4491bb740a) [x86_64-linux]
</span></code></pre>
<button class="clipboard-button" data-clipboard-text="ruby -v
">Copy</button>
</div>
<p>Yukarıda bana gelen cevap Windows 10 işletim sistemi ve Ubuntu on Windows uygulaması konsolunda 
gelen cevap. Rails için Ruby versiyon 2.7.0 ve sonrası gerekir. En son Ruby versiyonunu kullanmanız
tavsiye edilir. Eğer daha küçük bir versiyon numarası gelirse (mesela 2.3.7, or 1.8.7),
yeni bir Ruby versiyonu kurulumuna ihtiyacınız var demektir.</p><p>Windows'ta Rails kurmak için önce <a href="https://rubyinstaller.org/">Ruby Installer</a> kurmanız gerekiyor.</p><p>Bir çok işletim sistemine göre kurulumları görmek için <a href="https://www.ruby-lang.org/en/documentation/installation/">ruby-lang.org</a> adresine göz atın.</p><h5 id="sqlite3-kurulumu"><a class="anchorlink" href="#sqlite3-kurulumu">3.1.2 SQLite3 Kurulumu</a></h5><p>Bundan başka SQLite3 veri tabanı kurmanız da gerekiyor. UNIX-benzeri işletim sistemleri üzerlerinde SQLite3 yüklü gelir. Diğerleri kurulum detaylarını <a href="https://www.sqlite.org">SQLite3 website</a> 
adresinde bulabilir.</p><p>Sağlıklı yüklenmiş olduğunu ve sisteme <code>PATH</code> ayarı yapılmış olduğunu kontrol etmek için:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">sqlite3</span> <span class="nt">--version</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="sqlite3 --version
">Copy</button>
</div>
<p>Program versiyonu yazılacaktır.</p><h5 id="yeni-bir-rails-projesi-üretmek-rails-kurulumu-rails-kurulumu"><a class="anchorlink" href="#yeni-bir-rails-projesi-%C3%BCretmek-rails-kurulumu-rails-kurulumu">3.1.3 Rails Kurulumu</a></h5><p>Windows 10 kullanıcıları umarım yukarıdaki notumu görmüştür. Rails kurmak için RubyGems tarafından
sağlanan <code>gem install</code> komutunu kullanırız:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">gem install rails</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="gem install rails
">Copy</button>
</div>
<p>Her şeyin sağlıklı kurulmuş olduğunu görmek için aşağıdaki komutu terminalde çalıştırabiliyor 
olmanız gerekir:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails</span> <span class="nt">--version</span>
<span class="go">Rails 7.0.2.4
</span></code></pre>
<button class="clipboard-button" data-clipboard-text="rails --version
">Copy</button>
</div>
<p>"Rails 7.0.0" gibi bir cevap geldiyse devam etmeye hazırsınız demektir.</p><h4 id="günlük-uygulamasını-üretmek"><a class="anchorlink" href="#g%C3%BCnl%C3%BCk-uygulamas%C4%B1n%C4%B1-%C3%BCretmek">3.2 Günlük Uygulamasını Üretmek</a></h4><p>Rails jeneratörler denen ve gereken her işlem için özel tasarlanmış komutları 
bulunan bir çok script ile birlikte gelir. Bunlardan biri yeni uygulama jeneratörü, 
size yeni bir Rails uygulaması temelini sağlar böylece tek tek kendiniz yazmaktan 
kurtulursunuz. </p><p>Bu jeneratörü kullanmak için bir terminal açın, hangi klasörde çalışacaksanız ona gidin 
ve şu komutu çalıştırın:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">rails </span>new blog
</code></pre>
<button class="clipboard-button" data-clipboard-text="rails new blog
">Copy</button>
</div>
<p>Bu Blog adı verilen uygulamayı <code>blog</code> klasörü içinde üretecektir ve gereken tüm gem 
dosyalarını <code>Gemfile</code> içinden bakıp <code>bundle install</code> ile yükleyecektir. </p><div class="info"><p>Rails uygulama jeneratörünün tüm olası opasiyonlarını <code>rails new --help</code> komutu
çalıştırıp görebilirsiniz.</p></div><p>Blog uygulamasını ürettikten sonra uygulama klasörüne girin:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">cd </span>blog
</code></pre>
<button class="clipboard-button" data-clipboard-text="cd blog
">Copy</button>
</div>
<p><code>blog</code> klasörü Rails uygulamasını yapısını oluşturan bir çok dosya ve klasör içerir. 
Bu yazıda kullanılacak dosyaların büyük çoğunluğu <code>app</code> klasöründe. Fakat hepsi hakkında 
kısaca bilgiler verelim:</p>
<table>
<thead>
<tr>
<th>Dosya/Klasör</th>
<th>Amaç</th>
</tr>
</thead>
<tbody>
<tr>
<td>app/</td>
<td>Kontrolörler, modeller, görseller, yardımcılar, mail işleyiciler, kanallar, görevler ve uygulama için gereken dış dosyalar. Bu klavuzun geri kalanında bu klasörde yoğunlaşacakssınız.</td>
</tr>
<tr>
<td>bin/</td>
<td>Uygulamanızı başlatan <code>rails</code> script'ini barındırır. Ayrıca uygulamanızın ayarlarını yapmak, güncellemek, son yerine yüklemek veya uygulamanızı çalıştırmak için scriptler barındırır.</td>
</tr>
<tr>
<td>config/</td>
<td>Uygulamanızın yönlendirmeleri, veritabanı vs için konfigürasyon dosyalarını barındırır. Daha detaylı olarak <a href="configuring.html">Rails Uygulamalarının Konfigürasyonu</a> sayfasında incelenecektir.</td>
</tr>
<tr>
<td>config.ru</td>
<td>Rack-temelli server'lar için uygulamayı çalıştırırken kullanılacak Rack konfigürasyonu. Daha fazla bilgi <a href="https://rack.github.io/">Rack websitesinde</a>.</td>
</tr>
<tr>
<td>db/</td>
<td>Kullanmakta olduğunuz veri tabanı şemasını ve migrasyon dosyalarını barındırır.</td>
</tr>
<tr>
<td>Gemfile<br>Gemfile.lock</td>
<td>Bu dosyalar Rails uygulamanız ile hangi gem bağlantılarının olduğunu belirtmenize yarar. Bu dosyalar Bundler gem tarafından kullanılır. Bundler hakkında daha fazla bilgi için <a href="https://bundler.io">Bundler websitesine</a> bakınız.</td>
</tr>
<tr>
<td>lib/</td>
<td>Uygulamanızı geliştirmek için modüller.</td>
</tr>
<tr>
<td>log/</td>
<td>Uygulamanızın log dosyaları.</td>
</tr>
<tr>
<td>public/</td>
<td>Statik dosyaları ve derlenmiş varlıkları içerir. Uygulamanız çalışırken bu klasör aynen yayınlanır.</td>
</tr>
<tr>
<td>Rakefile</td>
<td>Bu dosya komut satırından çalıştırılabilen görevleri barındırır ve yükler. Yeni görev tanımları Rails komponentleri üzerinden yapılır. Kendi yazdığınız görevler için <code>Rakefile</code> değiştirmek yerine uygulamanızın <code>lib/tasks</code> klasöründe eklemelisiniz.</td>
</tr>
<tr>
<td>README.md</td>
<td>Uygulamanız hakkında ön bilgi vermek için dosya. Bu dosyada uygulamanızı kullanacak kişilere uygulamanızın ne iş yaptığını kurulumu ve çalıştırmasının nasıl yapılacağı vs bilgilerini verirsiniz.</td>
</tr>
<tr>
<td>storage/</td>
<td>Disk Service için Active Storage dosyaları. Bu konu <a href="active_storage_overview.html">Active Storage İncelemesi</a> sayfasında işlenecektir.</td>
</tr>
<tr>
<td>test/</td>
<td>Birim testleri, fikstürler ve diğer test aparatları. Bunlar <a href="testing.html">Rails Uygulamasını Test Etmek</a> sayfasında incelenektir.</td>
</tr>
<tr>
<td>tmp/</td>
<td>Temporary dosyalar (cache ve pid dosyaları gibi).</td>
</tr>
<tr>
<td>vendor/</td>
<td>Tüm üçüncü-parti yazılımlar için bir yer. Tipik bir Rails uygulamasında burası üçüncü parti gem'leri içerir.</td>
</tr>
<tr>
<td>.gitattributes</td>
<td>Git tarafından kullanılan özellikler. Daha fazla bilgi için <a href="https://git-scm.com/docs/gitattributes">gitattributes documentation</a>.</td>
</tr>
<tr>
<td>.gitignore</td>
<td>Git hangi dosyaları umursamayacak <a href="https://help.github.com/articles/ignoring-files">GitHub - Ignoring files</a> sayfasında ayrıntılı bilgi bulabilirsiniz.</td>
</tr>
<tr>
<td>.ruby-version</td>
<td>Bu dosya default Ruby versiyonunu içerir.</td>
</tr>
</tbody>
</table>
<h3 id="merhaba-rails-bang"><a class="anchorlink" href="#merhaba-rails-bang">4 Merhaba, Rails!</a></h3><p>Başlamak için ekrana çabucak bir şeyler yazalım. Bunu yapmak için Rails uygulamanızın
server'ını çalıştırmalısınız. </p><h4 id="web-server-çalıştırmak"><a class="anchorlink" href="#web-server-%C3%A7al%C4%B1%C5%9Ft%C4%B1rmak">4.1 Web Server Çalıştırmak</a></h4><p>Şu anda aslında çalışan bir Rails uygulamasına sahipsiniz. Çalıştığını görmek için 
bilgisayarınızda bir web server çalıştırmanız gerekiyor. Bunu yapmak için aşağıdaki 
komutu <code>blog</code> klasörü içinde çalıştırmalısınız:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>server
</code></pre>
<button class="clipboard-button" data-clipboard-text="bin/rails server
">Copy</button>
</div>
<div class="info"><p>Windows kullanıyorsanız <code>bin</code> klasöründeki scriptleri direk olarak Ruby 
interpreter'a göndermeniz gerekebilir örn. <code>ruby bin\rails server</code>. Bir de sadece 
<code>rails server</code> komutu girip deneyin , bir çok sistemde rails script'inin <code>bin</code> klasörü 
içinde olduğunu belirtmenize gerek yoktur.</p></div><div class="info"><p>JavaScript varlıklar sıkıştırması sisteminizde bir JavaScript runtime olmasını
bekler, olmaması durumunda sıkıştırma yaparken bir <code>execjs</code> hatası verir.
Genellikle macOS ve Windows JavaScript Runtime yüklü gelir. JRuby kullanıcıları 
için <code>therubyrhino</code> tavsiye edilir ve JRuby ile üretilmiş uygulamalarda <code>Gemfile</code> 
içine otomatik eklenir. Tüm desteklenen Runtime'lar 
için <a href="https://github.com/rails/execjs#readme">ExecJS</a>.</p></div><p>Bu komut Rails ile birlikte default olarak dağıtılan web server olan bir Puma server
çalıştırır. Uygulamanızı çalışır halini görmek için tarayıcınızı açın ve 
<a href="http://localhost:3000">http://localhost:3000</a> adresini açın. Rails default bilgilendirme sayfasını göreceksiniz:</p><p><img src="images/getting_started/rails_welcome.png" alt="Rails startup page screenshot"></p><p>localhost tarayıcı tarafından açılmak istenmezse <a href="http://127.0.0.1:3000">http://127.0.0.1:3000</a> deneyin.
Server'ı durdurmak isterseniz çalıştığı terminal penceresinde Ctrl+C basın.
Geliştirme modunda Rails genellikle server'ın tekrar başlatılmasına ihtiyaç duymaz.
Yaptığınız değişiklikler otomatik olarak server tarafından işlenecektir.</p><p>Bu startup sayfası yeni bir Rails uygulaması için dumanı tütme testidir: uygulamanızın 
bir sayfa yayınlayabilecek kadar sağlıklı konfigüre edilmiş ve çalışıyor olduğunu
gösterir. </p><h4 id="merhaba-diyen-rails"><a class="anchorlink" href="#merhaba-diyen-rails">4.2 "Merhaba" Diyen Rails</a></h4><p>Rails'in "Merhaba" demesi için en az bir <em>route</em> (yönlendirme) ve bir <em>aksiyonu</em> ile 
<em>görseli</em> olan bir <em>kontrolör</em> tanımlamalısınız. Yönlendirme tarayıcıdan gelen 
isteği kontrolör aksiyonuna yönlendirir. Kontrolör aksiyonu gereken işleri yapar ve 
görsel için verileri hazırlar. Bir görsel verileri istenen formatta gösterir.</p><p>Uygulanmalarına bakarsak: Yönlendirmeler Ruby <a href="https://en.wikipedia.org/wiki/Domain-specific_language">DSL
(Domain-Specific Language)</a> ile 
yazılmış kurallardır. Kontrolörler Ruby sınıflarıdır ve public metodları da kontrolörün 
aksiyonlarıdır. Görseller de HTML ve Ruby karışımı bir şekilde yazılan şablonlardır.</p><p>routes dosyamıza bir yönlendirme ekleyerek başlayalım, <code>config/routes.rb</code> dosyasında 
<code>Rails.application.routes.draw</code> bloğu içine şunu ekleyelim:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#index"</span>

  <span class="c1"># For details on the DSL available within this file, see https://guides.rubyonrails.org/routing.html</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='Rails.application.routes.draw do
  get "/articles", to: "articles#index"

  # For details on the DSL available within this file, see https://guides.rubyonrails.org/routing.html
end
'>Copy</button>
</div>
<p>Yukarıdaki yönlendirme <code>GET /articles</code> isteğini <code>ArticlesController</code> kontrolörünün 
<code>index</code> aksiyonuna yönlendirir.</p><p><code>ArticlesController</code> kontrolörü ve <code>index</code> aksiyonunu tanımlamak için kontrolör jeneratör 
komutu kullanırız. (<code>--skip-routes</code> opsiyonu ile birlikte, çünkü halihazırda yönlendirmeyi 
yaptık):</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>generate controller Articles index <span class="nt">--skip-routes</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="bin/rails generate controller Articles index --skip-routes
">Copy</button>
</div>
<p>Rails sizin için bir kısım dosya üretecektir:</p><div class="code_container">
<pre><code class="highlight plaintext">create  app/controllers/articles_controller.rb
invoke  erb
create    app/views/articles
create    app/views/articles/index.html.erb
invoke  test_unit
create    test/controllers/articles_controller_test.rb
invoke  helper
create    app/helpers/articles_helper.rb
invoke    test_unit
</code></pre>
<button class="clipboard-button" data-clipboard-text="create  app/controllers/articles_controller.rb
invoke  erb
create    app/views/articles
create    app/views/articles/index.html.erb
invoke  test_unit
create    test/controllers/articles_controller_test.rb
invoke  helper
create    app/helpers/articles_helper.rb
invoke    test_unit
">Copy</button>
</div>
<p>Bunların en önemlisi kontrolör dosyası, <code>app/controllers/articles_controller.rb</code>. 
İçeriğine bir bakalım:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class ArticlesController &lt; ApplicationController
  def index
  end
end
">Copy</button>
</div>
<p><code>index</code> aksiyonu boş. Bir aksiyon görseli kendisi ayrıca yayınlamıyorsa Rails 
kontrolör ve aksiyonun isimlerine göre bir görsel yayınlar. Convention Over
Configuration! Görseller <code>app/views</code> klasöründe yer alır. Yani <code>index</code> aksiyonu 
default olarak <code>app/views/articles/index.html.erb</code> dosyasını görsel olarak yayınlar.</p><p><code>app/views/articles/index.html.erb</code> dosyasını açalım ve içeriğini şunula değiştirelim:</p><div class="code_container">
<pre><code class="highlight html"><span class="nt">&lt;h1&gt;</span>Merhaba Rails!<span class="nt">&lt;/h1&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;h1&gt;Merhaba Rails!&lt;/h1&gt;
">Copy</button>
</div>
<p>Eğer server'ı kontrolör jeneratörünü çalıştırmak için durdurmuşsanız tekrar 
<code>bin/rails server</code> ile çalıştırın. Şimdi <a href="http://localhost:3000/articles">http://localhost:3000/articles</a> adresini 
tarayıcıda açın ve yazdığımız mesajı görün!</p><h4 id="uygulamanın-ana-sayfasını-ayarlamak"><a class="anchorlink" href="#uygulaman%C4%B1n-ana-sayfas%C4%B1n%C4%B1-ayarlamak">4.3 Uygulamanın Ana Sayfasını Ayarlamak</a></h4><p>Şu anda <a href="http://localhost:3000">http://localhost:3000</a> hala Rails tarafından oluşturulan Rails logolu 
sayfayı gösteriyor. Hadi bizim "Merhaba Rails" yazımızın <a href="http://localhost:3000">http://localhost:3000</a> 
adresinde olmasını sağlayalım. Bunu yapmak için uygulamamızın <em>root path</em> 'ını ilgili 
kontrolör aksiyonuna yönlendirelim.</p><p><code>config/routes.rb</code> dosyasını açalım ve <code>Rails.application.routes.draw</code> bloğu içine 
en üste: </p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s2">"articles#index"</span>

  <span class="n">get</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#index"</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='Rails.application.routes.draw do
  root "articles#index"

  get "/articles", to: "articles#index"
end
'>Copy</button>
</div>
<p>Artık <a href="http://localhost:3000">http://localhost:3000</a> adresini ziyaret ettiğimizde bizim "Merhaba Rails" 
yazımızı görebiliriz. <code>root</code> yönlendirmesi de artık <code>ArticlesController</code> kontrolörünün 
<code>index</code> aksiyonuna yönlendirildi.</p><div class="info"><p>Yönlendirmeler hakkında daha fazla bilgi için <a href="routing.html">Baştan Sona Rails Yönlendirmeler</a>.</p></div><h3 id="otomatik-yükleme"><a class="anchorlink" href="#otomatik-y%C3%BCkleme">5 Otomatik Yükleme</a></h3><p>Rails uygulamaları uygulama kodu yüklemek için <code>require</code> satırı <strong>kullanmaz</strong>.</p><p>Dikkat ederseniz <code>ArticlesController</code> <code>ApplicationController</code> dan mirasçıdır ama 
<code>app/controllers/articles_controller.rb</code> dosyasında şuna benzer bir kod yok</p><div class="code_container">
<pre><code class="highlight ruby"><span class="nb">require</span> <span class="s2">"application_controller"</span> <span class="c1"># BUNU YAPMAYIN-ÖRNEKTİR.</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='require "application_controller" # BUNU YAPMAYIN-ÖRNEKTİR.
'>Copy</button>
</div>
<p>Uygulama sınıfları ve modüllerine her yerde erişilebilir, <code>app</code> içinde hiç bir yerde 
<code>require</code> kullanmanız gerkmez ve <strong>kullanmamalısınız</strong>. Bu özellik <em>otomatik yükleme</em> 
olarak adlandırılır. Daha fazla bilgi için <a href="https://guides.rubyonrails.org/autoloading_and_reloading_constants.html"><em>Autoloading and Reloading Constants</em></a>.</p><p>Sadece iki durumda <code>require</code> kullanabilirsiniz:</p>
<ul>
<li>
<code>lib</code> klasörü altındaki dosyaları yüklemek için.</li>
<li>
<code>Gemfile</code> içinde <code>require: false</code> işaretlenen gem bağımlılıklarını yüklemek için.</li>
</ul>
<h3 id="mvc-ve-siz"><a class="anchorlink" href="#mvc-ve-siz">6 MVC ve Siz</a></h3><p>Evet, yönlendirmeleri, kontrolörleri, aksiyonları ve görselleri açıkladık. Tüm 
bunlar <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">MVC (Model-View-Controller)</a> yapısını kullanan 
tipik bir web uygulamasının parçaları. MVC daha kolay hakim olabilmek için uygulamayı 
işlevlere göre parçalara ayıran bir tasarım paterni. Rails gelenek olarak bu tasarım 
paternini takip eder.</p><p>Kontrolörümüz ve görselimiz olduğuna göre son parçayı üretelim: bir model.</p><h4 id="bir-model-üretmek"><a class="anchorlink" href="#bir-model-%C3%BCretmek">6.1 Bir Model Üretmek</a></h4><p><em>model</em> veriyi temsil eden bir Ruby sınıfıdır. Ek olarak modeller <em>Active Record</em> 
adı verilen Rails özelliğini kullanarak uygulamanın veritabanıyla etkileşime girer.</p><p>Bir model tanımlamak için model jeneratörünü kullanırız:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>generate model Article title:string body:text
</code></pre>
<button class="clipboard-button" data-clipboard-text="bin/rails generate model Article title:string body:text
">Copy</button>
</div>
<div class="note"><p>Model isimleri İngilizce <strong>tekil</strong> isimlerdir, çünkü bir model oluşumu 
bir tek veri kaydını temsil eder. Bu kuralı unutmamak için yeni bir model 
tanımlayan kodu hatırlasak yeter, <code>Article.new(...)</code> yazarız , <code>Articles.new(...)</code> 
<strong>değil</strong>. Yeni kayıt açarken bir sürü açılmaz bir tane açılır.</p></div><p>Bu kod bir kaç dosya daha üretir:</p><div class="code_container">
<pre><code class="highlight plaintext">invoke  active_record
create    db/migrate/&lt;timestamp&gt;_create_articles.rb
create    app/models/article.rb
invoke    test_unit
create      test/models/article_test.rb
create      test/fixtures/articles.yml
</code></pre>
<button class="clipboard-button" data-clipboard-text="invoke  active_record
create    db/migrate/&lt;timestamp&gt;_create_articles.rb
create    app/models/article.rb
invoke    test_unit
create      test/models/article_test.rb
create      test/fixtures/articles.yml
">Copy</button>
</div>
<p>Burada dikkat etmemiz gereken veritabanı migrasyon dosyası 
(<code>db/migrate/&lt;timestamp&gt;_create_articles.rb</code>) ve model dosyası 
(<code>app/models/article.rb</code>).</p><h4 id="veritabanı-migrasyonları"><a class="anchorlink" href="#veritaban%C4%B1-migrasyonlar%C4%B1">6.2 Veritabanı Migrasyonları</a></h4><p><em>Migrasyonlar</em> uygulamanın veritabanı yapısını değiştirmek için kullanılır. 
Rails uygulamalarında migrasyonlar Ruby ile yazılmıştır bu yüzden kullanılan 
veritabanı türünden bağımsızdırlar.</p><p>Migrasyon dosyamızın içine bakalım:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">CreateArticles</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mf">7.0</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">create_table</span> <span class="ss">:articles</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:title</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">text</span> <span class="ss">:body</span>

      <span class="n">t</span><span class="p">.</span><span class="nf">timestamps</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class CreateArticles &lt; ActiveRecord::Migration[7.0]
  def change
    create_table :articles do |t|
      t.string :title
      t.text :body

      t.timestamps
    end
  end
end
">Copy</button>
</div>
<p><code>create_table</code> metodu çağrılması <code>articles</code> tablosunun nasıl yapılacağını 
tarif ediyor. Default olarak burada belirtmememize rağmen <code>create_table</code> 
metodu otomatik artan primary key olarak bir <code>id</code> sütununu tabloya ekler. 
Yani tabloya ilk eklenen kaydın <code>id</code> değeri 1 olur sonraki 2 vs.</p><p><code>create_table</code> bloğu içinde iki sütun özelliği veriliyor: <code>title</code> ve <code>body</code>.
Bunların eklenmesini jeneratör komutunu kullanırken biz parametre olarak 
vermiştik (<code>bin/rails generate model Article title:string body:text</code>).</p><p>Bloğun son satırında <code>t.timestamps</code> metodu çağrılıyor. Bu metod <code>created_at</code> ve 
<code>updated_at</code> adında iki yeni sütun daha ekler tabloya. Göreceğimiz gibi Rails 
bunlardaki bilgiyi kontrol eder. Yeni kayıt oluşturunca ve kaydı değiştirince 
ilgili sütuna değer girer.</p><p>Migrasyonumuzun gerçekleşmesi için bir komut girmemiz gerekiyor:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>db:migrate
</code></pre>
<button class="clipboard-button" data-clipboard-text="bin/rails db:migrate
">Copy</button>
</div>
<p>Komut tablonun üretildiğine dair bilgi verecektir:</p><div class="code_container">
<pre><code class="highlight plaintext">==  CreateArticles: migrating ===================================
-- create_table(:articles)
   -&gt; 0.0018s
==  CreateArticles: migrated (0.0018s) ==========================
</code></pre>
<button class="clipboard-button" data-clipboard-text="==  CreateArticles: migrating ===================================
-- create_table(:articles)
   -&gt; 0.0018s
==  CreateArticles: migrated (0.0018s) ==========================
">Copy</button>
</div>
<div class="info"><p>Migrasyonlar hakkında daha fazla bilgi için <a href="active_record_migrations.html">Active Record Migrasyonları</a>.</p></div><p>Şimdi model'imizi kullanarak tablomuzla etkileşime girebiliriz.</p><h4 id="veritabanıyla-etkileşim-i̇çin-model-kullanımı"><a class="anchorlink" href="#veritaban%C4%B1yla-etkile%C5%9Fim-i%CC%87%C3%A7in-model-kullan%C4%B1m%C4%B1">6.3 Veritabanıyla Etkileşim İçin Model Kullanımı</a></h4><p>Modelimizle biraz oynamak için Rails'in <em>console</em> denen özelliğinden faydalanacağız. 
Console <code>irb</code> gibi bir interaktif kodlama ortamı, fakat otomatik olarak Rails ve 
bizim uygulama kodumuzu yükler.</p><p>Rails konsola şu komut ile girelim:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>console
</code></pre>
<button class="clipboard-button" data-clipboard-text="bin/rails console
">Copy</button>
</div>
<p>Şuna benzer bir <code>irb</code> prompt gelir karşımıza:</p><div class="code_container">
<pre><code class="highlight irb"><span class="go">Loading development environment (Rails 7.0.0)
</span><span class="gp">irb(main):001:0&gt;</span><span class="w">
</span></code></pre>
<button class="clipboard-button" data-clipboard-text="">Copy</button>
</div>
<p>Bu komut satırında yeni bir <code>Article</code> nesnesi üretebiliriz:</p><div class="code_container">
<pre><code class="highlight irb"><span class="gp">irb&gt;</span><span class="w"> </span><span class="n">article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">title: </span><span class="s2">"Merhaba Rails"</span><span class="p">,</span> <span class="ss">body: </span><span class="s2">"Ben Rails'deyim"</span><span class="p">)</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="article = Article.new(title: &quot;Merhaba Rails&quot;, body: &quot;Ben Rails'deyim&quot;)
">Copy</button>
</div>
<p>Şunu dikkatimizden kaçırmayalım, biz sadece bu nesneyi <em>ürettik</em>. Bu nesne henüz 
veritabanına kaydedilmedi. Şu anda sadece konsolda erişilebilen bir nesne. Nesneyi 
veritabanına saklamak için <a href="https://edgeapi.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-save"><code>save</code></a> 
metodunu çağırmalıyız:</p><div class="code_container">
<pre><code class="highlight irb"><span class="gp">irb&gt;</span><span class="w"> </span><span class="n">article</span><span class="p">.</span><span class="nf">save</span>
<span class="go">  TRANSACTION (0.1ms)  begin transaction
  Article Create (3.0ms)  INSERT INTO "articles" ("title", "body", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["title", "Merhaba Rails"], ["body", "Ben Rails'deyim"], ["created_at", "2022-04-29 21:38:19.720540"], ["updated_at", "2022-04-29 21:38:19.720540"]]
  TRANSACTION (11.9ms)  commit transaction
</span><span class="p">=&gt;</span> <span class="kp">true</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="article.save
">Copy</button>
</div>
<p>Yukarıdaki çıktı bir <code>INSERT INTO "articles" ...</code> veritabanı sorgusu gösteriyor. 
Bu article kaydının tabloya kaydedildiğini gösteriyor. <code>article</code> nesnesine tekrar 
bakarsak bir şeylerin değiştiğini farkedeceğiz:</p><div class="code_container">
<pre><code class="highlight irb"><span class="gp">irb&gt;</span><span class="w"> </span><span class="n">article</span>
<span class="p">=&gt;</span>
<span class="c">#&lt;Article:0x00007f32cfc74b98
</span><span class="go"> id: 1,
 title: "Merhaba Rails",
 body: "Ben Rails'deyim",
 created_at: Fri, 29 Apr 2022 21:38:19.720540000 UTC +00:00,
 updated_at: Fri, 29 Apr 2022 21:38:19.720540000 UTC +00:00&gt;
</span></code></pre>
<button class="clipboard-button" data-clipboard-text="article
">Copy</button>
</div>
<p><code>id</code>, <code>created_at</code>, ve <code>updated_at</code> özelliklerinin şimdi değerleri var. Nesneyi 
kaydettiğimizde Rails bu alanları bizim için doldurmuş.</p><p>Bu article nesnesini veritabanından okumak istediğimizde modelin <a href="https://edgeapi.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find"><code>find</code></a>
metodunu parametresinde <code>id</code> değeri olacak şekilde çağırırız:</p><div class="code_container">
<pre><code class="highlight irb"><span class="gp">irb&gt;</span><span class="w"> </span><span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">=&gt;</span> <span class="kt">#&lt;</span><span class="no">Article</span><span class="p">:</span><span class="mh">0x00007f32cd2173f0</span>
 <span class="ss">id: </span><span class="mi">1</span><span class="p">,</span>
 <span class="ss">title: </span><span class="s2">"Merhaba Rails"</span><span class="p">,</span>
 <span class="ss">body: </span><span class="s2">"Ben Rails'deyim"</span><span class="p">,</span>
 <span class="ss">created_at: </span><span class="no">Fri</span><span class="p">,</span> <span class="mi">29</span> <span class="no">Apr</span> <span class="mi">2022</span> <span class="mi">21</span><span class="p">:</span><span class="mi">38</span><span class="p">:</span><span class="mf">19.720540000</span> <span class="no">UTC</span> <span class="o">+</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">,</span>
 <span class="ss">updated_at: </span><span class="no">Fri</span><span class="p">,</span> <span class="mi">29</span> <span class="no">Apr</span> <span class="mi">2022</span> <span class="mi">21</span><span class="p">:</span><span class="mi">38</span><span class="p">:</span><span class="mf">19.720540000</span> <span class="no">UTC</span> <span class="o">+</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="kt">&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="Article.find(1)
">Copy</button>
</div>
<p>Veritabanından tüm Article tablosundaki verileri çekmek istersek modelin <a href="https://edgeapi.rubyonrails.org/classes/ActiveRecord/Scoping/Named/ClassMethods.html#method-i-all"><code>all</code></a>
metodunu kullanırız:</p><div class="code_container">
<pre><code class="highlight irb"><span class="gp">irb&gt;</span><span class="w"> </span><span class="no">Article</span><span class="p">.</span><span class="nf">all</span>
<span class="p">=&gt;</span> <span class="p">[</span><span class="kt">#&lt;</span><span class="no">Article</span><span class="p">:</span><span class="mh">0x00007f32ce0640c0</span>
  <span class="ss">id: </span><span class="mi">1</span><span class="p">,</span>
  <span class="ss">title: </span><span class="s2">"Merhaba Rails"</span><span class="p">,</span>
  <span class="ss">body: </span><span class="s2">"Ben Rails'deyim"</span><span class="p">,</span>
  <span class="ss">created_at: </span><span class="no">Fri</span><span class="p">,</span> <span class="mi">29</span> <span class="no">Apr</span> <span class="mi">2022</span> <span class="mi">21</span><span class="p">:</span><span class="mi">38</span><span class="p">:</span><span class="mf">19.720540000</span> <span class="no">UTC</span> <span class="o">+</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">,</span>
  <span class="ss">updated_at: </span><span class="no">Fri</span><span class="p">,</span> <span class="mi">29</span> <span class="no">Apr</span> <span class="mi">2022</span> <span class="mi">21</span><span class="p">:</span><span class="mi">38</span><span class="p">:</span><span class="mf">19.720540000</span> <span class="no">UTC</span> <span class="o">+</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="kt">&gt;</span><span class="p">]</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="Article.all
">Copy</button>
</div>
<p>Bu metod bir <a href="https://edgeapi.rubyonrails.org/classes/ActiveRecord/Relation.html"><code>ActiveRecord::Relation</code></a> nesnesi döner,
onu süper güçleri olan bir array gibi düşünebilirsiniz.</p><div class="info"><p>Daha fazla bilgi için <a href="active_record_basics.html">Active Record Temelleri</a> ve <a href="active_record_querying.html">Active Record Sorgu Arabirimi</a> sayfalarına bakınız.</p></div><p>Modeller MVC puzzle'ının son parçasıydı. Şimdi tüm parçaları bir araya getirelim.</p><h4 id="bir-article-listesi-göstermek"><a class="anchorlink" href="#bir-article-listesi-g%C3%B6stermek">6.4 Bir Article Listesi Göstermek</a></h4><p>Şimdi <code>app/controllers/articles_controller.rb</code> kontrolör dosyamıza dönelim ve 
<code>index</code> aksiyonunu veritabanından tüm article kayıtlarını çekecek şekilde düzenleyelim:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@articles</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class ArticlesController &lt; ApplicationController
  def index
    @articles = Article.all
  end
end
">Copy</button>
</div>
<p>Kontrolördeki oluşum değişkenlerine görsel içinden erişilebilir. Yani 
<code>app/views/articles/index.html.erb</code> dosyası içinden <code>@articles</code> değişkenine erişebiliriz. 
Bu dosyayı açalım ve içeriğini şöyle değiştirelim:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span>Makaleler<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;h1&gt;Makaleler&lt;/h1&gt;

&lt;ul&gt;
  &lt;% @articles.each do |article| %&gt;
    &lt;li&gt;
      &lt;%= article.title %&gt;
    &lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
">Copy</button>
</div>
<p>Yukarıdaki kod HTML ve <em>ERB</em> karışımı bir kod. ERB dökümanın içinde Ruby kodunu 
çalıştırabilmek için kullanılan bir görsel şablon sistemi. Burada iki çeşit ERB 
tag kullanıyoruz, <code>&lt;% %&gt;</code> ve <code>&lt;%= %&gt;</code>. <code>&lt;% %&gt;</code> tag içerisindeki Ruby kodu çalıştır 
manasına gelir. <code>&lt;%= %&gt;</code> tag ise içindeki Ruby kodu çalıştır ve sonucunu görselde 
bulunduğum noktaya yaz anlamı taşır. ERB tag'ları içinde Ruby kodu olarak her şeyi 
yazabilirsiniz, ancak okunabilirlik açısından ERB tag içindeki kodu kısa tutmak 
tercih edilmelidir.</p><p><code>@articles.each</code> kodunun saonucunu yazmak istemediğimiz için bu kodu <code>&lt;% %&gt;</code> 
tag içine koyduk. Fakat <code>article.title</code> kodunun sonucunu görsele yazdırmak 
istediğimizden (her bir article için) kodu <code>&lt;%= %&gt;</code> tag içine yazdık.</p><p>Sonucu <a href="http://localhost:3000">http://localhost:3000</a> adresini ziaret edip görebiliriz. (Unutmayın 
<code>bin/rails server</code> komutu çalışıyor olmalı). Şimdi burada ne yaptık:</p>
<ol>
<li>Tarayıcı server'dan bir istekte bulunur: <code>GET http://localhost:3000</code>.</li>
<li>Rails uygulamamız isteği alır.</li>
<li>Rails router bu isteği <code>ArticlesController</code> kontrolörü <code>index</code> aksiyonuna yönlendirir.</li>
<li>
<code>index</code> aksiyonu <code>Article</code> modelini kullanarak veritabanından tüm kayıtları çeker.</li>
<li>Rails otomatik olarak <code>app/views/articles/index.html.erb</code> görselini yayınlar.</li>
<li>Yayınlarken görsel içindeki ERB kodlar işlenerek sonuçlar HTML olarak yayınlanır.</li>
<li>Server bu HTML'i içeren bir cevabı tarayıcıya gönderir.</li>
</ol>
<p>Tüm MVC parçalarını bir arada kullandık ve ilk kontrolör aksiyonumuzu yazdık! 
Sırada ikinci aksiyon var.</p><h3 id="crud-lazımsa-crud-yap"><a class="anchorlink" href="#crud-laz%C4%B1msa-crud-yap">7 CRUD Lazımsa CRUD Yap</a></h3><p>Hemen tüm veriye dayalı web uygulaması <a href="https://en.wikipedia.org/wiki/Create,_read,_update,_and_delete">CRUD (Create, Read, Update, and Delete)</a> işlemleri yapar. 
Üret, Oku, Güncelle ve Sil işlemleri uygulamanızın ana ihtiyaçlarını oluşturuyor. 
Rails CRUD işlemlerini basitleştirmek için bir çok özelliğe sahiptir.</p><p>Bu özellikleri uygulamamıza yeni fonksiyonellikler kazandırarak incelemeye 
başlayalım.</p><h4 id="tek-bir-article-göstermek"><a class="anchorlink" href="#tek-bir-article-g%C3%B6stermek">7.1 Tek Bir Article Göstermek</a></h4><p>Şu anda veri tabanımızdaki tüm makalelerin listesini görebiliyoruz. Yeni bir görsel 
ekleyerek sadece bir tane makale başlığı ve içeriğini gösterelim.</p><p>Yeni kontrolör aksiyonumuz için yönlendirme ekleyerek başlayalım. <code>config/routes.rb</code> 
dosyasını açın ve şu yönlendirmeyi ekleyin:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s2">"articles#index"</span>

  <span class="n">get</span> <span class="s2">"/articles"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#index"</span>
  <span class="n">get</span> <span class="s2">"/articles/:id"</span><span class="p">,</span> <span class="ss">to: </span><span class="s2">"articles#show"</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='Rails.application.routes.draw do
  root "articles#index"

  get "/articles", to: "articles#index"
  get "/articles/:id", to: "articles#show"
end
'>Copy</button>
</div>
<p>Yeni yönlendirmemiz yine bir <code>get</code> yönlendirmesi, fakat path değerinde ekstra bir 
şey var: <code>:id</code> . Burada bir yönlendirme <em>parametresi</em> tarif ediliyor. Bir yönlendirme 
parametresi istekte bulunulan adresin bir kısmını alır ve oradaki değerleri <code>params</code> 
Hash içine koyar ve bu değerlere kontrolör aksiyonundan erişilebilir. Örneğin 
<code>GET http://localhost:3000/articles/1</code> isteğinde son bölümdeki <code>1</code> değeri yukarıdaki 
yönlendirme tanımına göre <code>:id</code> değeri olarak alınır ve <code>ArticlesController</code> kontrolörü 
 <code>show</code> aksiyonunda <code>params[:id]</code> notasyonu ile kullanılabilir.</p><p>Şimdi bu <code>show</code> aksiyonunu <code>app/controllers/articles_controller.rb</code> dosyasında <code>index</code> 
aksiyonu altına tanımlayalım:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@articles</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class ArticlesController &lt; ApplicationController
  def index
    @articles = Article.all
  end

  def show
    @article = Article.find(params[:id])
  end
end
">Copy</button>
</div>
<p><code>show</code> aksiyonu <code>Article.find</code> metodunu yönlendirme parametresindeki ID değeriyle çağırır 
(<a href="#veritaban%C4%B1yla-etkile%C5%9Fim-i%CC%87%C3%A7in-model-kullan%C4%B1m%C4%B1">daha önce gördük</a>).<br>
Dönen makale kaydı <code>@article</code> oluşum değişkeni içine saklanır, böylece görsel bu değere 
erişebilir. Default olarak <code>show</code> aksiyonu <code>app/views/articles/show.html.erb</code> görselini 
yayınlar.</p><p>Şimdi <code>app/views/articles/show.html.erb</code> dosyasını şu içerikle tanımlayalım:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;h1&gt;&lt;%= @article.title %&gt;&lt;/h1&gt;

&lt;p&gt;&lt;%= @article.body %&gt;&lt;/p&gt;
">Copy</button>
</div>
<p>Şimdi konsoldayken kaydettiğimiz makaleyi <a href="http://localhost:3000/articles/1">http://localhost:3000/articles/1</a> adresinde 
görebiliriz.</p><p>Bir düzenleme yapalım, makalelerin listesini gösterdiğimiz <code>app/views/articles/index.html.erb</code> 
görselinden tıklanan makalenin sayfasını çağıran bir link haline getirelim:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span>Articles<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span>
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/articles/</span><span class="cp">&lt;%=</span> <span class="n">article</span><span class="p">.</span><span class="nf">id</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;h1&gt;Articles&lt;/h1&gt;

&lt;ul&gt;
  &lt;% @articles.each do |article| %&gt;
    &lt;li&gt;
      &lt;a href="/articles/&lt;%= article.id %&gt;"&gt;
        &lt;%= article.title %&gt;
      &lt;/a&gt;
    &lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
'>Copy</button>
</div>
<h4 id="resourceful-routing"><a class="anchorlink" href="#resourceful-routing">7.2 Resourceful Routing</a></h4><p>Böylece CRUD yapısının "R" (Read - Okuma) kısmını yaptık. Sırada "C" (Create - Yeni kayıt), 
"U" (Update - Güncelle) ve "D" (Delete - Sil) kısımlarını yapmak var. Tahmin 
edeceğiniz gibi bunun için yeni yönlendirmeler tanımlayıp, kontrolöre ve görsele 
yeni aksiyonlar ekleyeceğiz. Üzerinde CRUD işlemleri yapılacak olan kavrama <em>resource</em> 
adı verilir, mesela örneğimizde <code>article</code> bir resource. </p><p>Rails <a href="https://edgeapi.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Resources.html#method-i-resources"><code>resources</code></a> 
adı verilen bir metod sunar, bu metod bağladığı kaynakla ilgili olası tüm yönlendirmeleri 
bir standart doğrultusunda gerçekleştirir. Bu kolaylıktan yararlanıp "C", "U" ve "D" 
bölümlerine geçmeden <code>config/routes.rb</code> dosyasında daha önce tanımladığımız <code>get</code> 
satırlarını nı da silip <code>resources</code> ile değiştirelim:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s2">"articles#index"</span>

  <span class="n">resources</span> <span class="ss">:articles</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='Rails.application.routes.draw do
  root "articles#index"

  resources :articles
end
'>Copy</button>
</div>
<p>bu <code>resources</code> metodunun bize hangi yönlendirmeleri otomatik yaptığını görmek 
için <code>bin/rails routes</code> komutunu konsolda veririz:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>routes
<span class="gp">      Prefix Verb   URI Pattern                  Controller#</span>Action
<span class="gp">        root GET    /                            articles#</span>index
<span class="gp">    articles GET    /articles(.:format)          articles#</span>index
<span class="gp">             POST   /articles(.:format)          articles#</span>create
<span class="gp"> new_article GET    /articles/new(.:format)      articles#</span>new
<span class="gp">edit_article GET    /articles/:id/edit(.:format) articles#</span>edit
<span class="gp">     article GET    /articles/:id(.:format)      articles#</span>show
<span class="gp">             PATCH  /articles/:id(.:format)      articles#</span>update
<span class="gp">             PUT    /articles/:id(.:format)      articles#</span>update
<span class="gp">             DELETE /articles/:id(.:format)      articles#</span>destroy
</code></pre>
<button class="clipboard-button" data-clipboard-text="bin/rails routes
">Copy</button>
</div>
<p><code>resources</code> metodu yönlendirme URL'lerini bu standarda göre ürettikten sonra 
path yardımcı metodlarını da üretir. Bunları kodumuzda kullanacağız. Bu yardımcı 
metodların isimleri yukarıda listede Prefix diye verilen değerlerin ardına <code>_url</code> 
ya da <code>_path</code> konarak elde edilir. Örneğin <code>article_path</code> metodu verilmiş olan article
değeri ile <code>"/articles/#{article.id}"</code> adresine gider. Bu metodları kullanarak 
<code>app/views/articles/index.html.erb</code> dosyasındaki linklerimizi düzenleyelim:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span>Makaleler<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span>
      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">&lt;%=</span> <span class="n">article_path</span><span class="p">(</span><span class="n">article</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;h1&gt;Makaleler&lt;/h1&gt;

&lt;ul&gt;
  &lt;% @articles.each do |article| %&gt;
    &lt;li&gt;
      &lt;a href="&lt;%= article_path(article) %&gt;"&gt;
        &lt;%= article.title %&gt;
      &lt;/a&gt;
    &lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
'>Copy</button>
</div>
<p>Bununla beraber Rails <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to"><code>link_to</code></a>
yardımcı metodunu kullanarak kodumuzu biraz daha güzelleştirebiliriz. <code>link_to</code> 
yardımcı metodu parametresinde ilk verileni link yazısı, ikinci verileni link 
hedefi olarak değerlendiren bir link üretir. İkinci parametre olarak bir model nesnesi 
verirsek <code>link_to</code> alakalı path yardımcısını çağırarak bu nesneden bir path 
üretecektir. Örneğin biz <code>link_to</code> metoduna bir article verirsek <code>article_path</code> 
metodunu çağıracaktır. Bu doğrultuda <code>app/views/articles/index.html.erb</code> görselini 
şöyle düzenleriz:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span>Makaleler<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">article</span><span class="p">.</span><span class="nf">title</span><span class="p">,</span> <span class="n">article</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;h1&gt;Makaleler&lt;/h1&gt;

&lt;ul&gt;
  &lt;% @articles.each do |article| %&gt;
    &lt;li&gt;
      &lt;%= link_to article.title, article %&gt;
    &lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
">Copy</button>
</div>
<p>Güzel!</p><div class="info"><p>Yönlendirmeler hakkında daha fazla bilgi için <a href="routing.html">Baştan Sona Rails Yönlendirmeler</a>.</p></div><h4 id="yeni-makale-eklemek"><a class="anchorlink" href="#yeni-makale-eklemek">7.3 Yeni Makale Eklemek</a></h4><p>Sıra geld CRUD yapının "C" (Create - Yeni kayıt) kısmına. Web uygulamalarında 
yeni bir kayıt eklemek çok adımlı bir iş. İlk önce kullanıcı doldurmak için bir 
form talep eder ve doldurur. Sonra kullanıcı bu formu gönderir. Eğer hata yoksa 
kayıt eklenir ve bir kısım konfirmasyon bilgisi gösterilir. Hata olursa form 
hata mesajları ile birlikte tekrar gösterilir ve proses tekrar edilir.</p><p>Bir Rails uygulamasında bu adımlar konrolörün <code>new</code> ve <code>create</code> aksiyonlarında 
gerçekleştirilir. Şimdi <code>app/controllers/articles_controller.rb</code> kontrolörüne 
<code>show</code> aksiyonu altına bu aksiyonların tipik şeklini ekleyelim:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@articles</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">title: </span><span class="s2">"..."</span><span class="p">,</span> <span class="ss">body: </span><span class="s2">"..."</span><span class="p">)</span>

    <span class="k">if</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">save</span>
      <span class="n">redirect_to</span> <span class="vi">@article</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:new</span><span class="p">,</span> <span class="ss">status: :unprocessable_entity</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='class ArticlesController &lt; ApplicationController
  def index
    @articles = Article.all
  end

  def show
    @article = Article.find(params[:id])
  end

  def new
    @article = Article.new
  end

  def create
    @article = Article.new(title: "...", body: "...")

    if @article.save
      redirect_to @article
    else
      render :new, status: :unprocessable_entity
    end
  end
end
'>Copy</button>
</div>
<p><code>new</code> aksiyonu yeni bir article kaydı oluşturur, fakat veritabanına kaydetmez. 
Bu article yayınlanan formda kullanılacak. Default olarak <code>new</code> aksiyonu 
<code>app/views/articles/new.html.erb</code> görselini yayınlar (birazdan tanımlayacağız). </p><p><code>create</code> aksiyonu title ve body değerleri olan bir <strong>article</strong> oluşturur, ve onu 
kaydetmeye çalışır. Ağer article sorunsuz kaydedilebilirse, aksiyon tarayıcıyı 
article sayfasına yani <code>"http://localhost:3000/articles/#{@article.id}"</code> adresine 
yönlendirir. Kaydetmek başarısız olursa aksiyon formu tekrar göstermek için 
<code>app/views/articles/new.html.erb</code> görselini yayınlar ama bu sefer yanında status 
kodu vardır <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422">422 Unprocessable Entity</a>.
Burada verilen title ve body değerleri şimdilik dummy, formun tasarımı bittikten 
sonra tekrar buraya dönüp düzenleyeceğiz.</p><div class="note"><p><a href="https://edgeapi.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to"><code>redirect_to</code></a>
metodu tarayıcının yeni bir istekte bulunmasına sebep olur, ancak <a href="https://edgeapi.rubyonrails.org/classes/AbstractController/Rendering.html#method-i-render"><code>render</code></a> metodu belirtilen görseli 
bulunulan istek için cevap olarak yayınlar. <code>redirect_to</code> metodunu veritabanı ya da 
uygulama adımı değiştirdikten sonra kullanmak önemlidir. Aksi durumda sayfa yenilenirse 
tarayıcı aynı isteği bir daha yapacak ve yeniden kayıt yapılacaktır.</p></div><h5 id="form-builder-kullanmak"><a class="anchorlink" href="#form-builder-kullanmak">7.3.1 Form Builder Kullanmak</a></h5><p>Rails'in <em>form builder</em> özelliğini kullanarak formumuzu oluşturacağız. Form builder 
kullanarak minimum miktarda kod yazarak Rails standartlarını karşılayabilen form 
yapabiliriz. </p><p><code>app/views/articles/new.html.erb</code> görselini aşağıdaki içerikle tanımlayalım:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span>New Article<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="vi">@article</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:title</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>  <span class="c">&lt;!-- form.label :title, "Başlık :" --&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:title</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;div&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:body</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>  <span class="c">&lt;!-- form.label :body, "İçerik :" --&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;div&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="cp">%&gt;</span>  <span class="c">&lt;!-- form.submit value: "Makale Ekle" --&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;h1&gt;New Article&lt;/h1&gt;

&lt;%= form_with model: @article do |form| %&gt;
  &lt;div&gt;
    &lt;%= form.label :title %&gt;&lt;br&gt;  &lt;!-- form.label :title, "Başlık :" --&gt;
    &lt;%= form.text_field :title %&gt;
  &lt;/div&gt;

  &lt;div&gt;
    &lt;%= form.label :body %&gt;&lt;br&gt;  &lt;!-- form.label :body, "İçerik :" --&gt;
    &lt;%= form.text_area :body %&gt;
  &lt;/div&gt;

  &lt;div&gt;
    &lt;%= form.submit %&gt;  &lt;!-- form.submit value: "Makale Ekle" --&gt;
  &lt;/div&gt;
&lt;% end %&gt;
'>Copy</button>
</div>
<div class="note"><p>Etiketlerin kodları yanında yorum olarak istediğiniz yazıları nasıl yazacağınızı 
basit yoldan gösterdim.</p></div><p><a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_with"><code>form_with</code></a>
yardımcı metodu bir form builder oluşturur. <code>form_with</code> bloğu içinde <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html#method-i-label"><code>label</code></a> ve <a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html#method-i-text_field"><code>text_field</code></a> gibi 
metodlar çağırarak form builder'in ilgili elemanı görsele ekletmesini sağlıyoruz. </p><p><code>form_with</code> metod çağrımız sonucunda şöyle bir form yayınlanacaktır:</p><div class="code_container">
<pre><code class="highlight html"><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/articles"</span> <span class="na">accept-charset=</span><span class="s">"UTF-8"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"authenticity_token"</span> <span class="na">value=</span><span class="s">"..."</span><span class="nt">&gt;</span>

  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"article_title"</span><span class="nt">&gt;</span>Title<span class="nt">&lt;/label&gt;&lt;br&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"article[title]"</span> <span class="na">id=</span><span class="s">"article_title"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"article_body"</span><span class="nt">&gt;</span>Body<span class="nt">&lt;/label&gt;&lt;br&gt;</span>
    <span class="nt">&lt;textarea</span> <span class="na">name=</span><span class="s">"article[body]"</span> <span class="na">id=</span><span class="s">"article_body"</span><span class="nt">&gt;&lt;/textarea&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">name=</span><span class="s">"commit"</span> <span class="na">value=</span><span class="s">"Create Article"</span> <span class="na">data-disable-with=</span><span class="s">"Create Article"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;form action="/articles" accept-charset="UTF-8" method="post"&gt;
  &lt;input type="hidden" name="authenticity_token" value="..."&gt;

  &lt;div&gt;
    &lt;label for="article_title"&gt;Title&lt;/label&gt;&lt;br&gt;
    &lt;input type="text" name="article[title]" id="article_title"&gt;
  &lt;/div&gt;

  &lt;div&gt;
    &lt;label for="article_body"&gt;Body&lt;/label&gt;&lt;br&gt;
    &lt;textarea name="article[body]" id="article_body"&gt;&lt;/textarea&gt;
  &lt;/div&gt;

  &lt;div&gt;
    &lt;input type="submit" name="commit" value="Create Article" data-disable-with="Create Article"&gt;
  &lt;/div&gt;
&lt;/form&gt;
'>Copy</button>
</div>
<div class="info"><p>Form builder hakkında daha fazla bilgi için <a href="form_helpers.html">Action View Form Yardımcıları</a>.</p></div><h5 id="strong-parameters-kullanmak"><a class="anchorlink" href="#strong-parameters-kullanmak">7.3.2 Strong Parameters Kullanmak</a></h5><p>Formdan gönderilen veri yönlendirme parametreleri gib <code>params</code> hash değişkenine 
konacaktır. Böylece <code>create</code> aksiyonu içinde title değerine <code>params[:article][:title]</code> 
ve body değerine <code>params[:article][:body]</code> şeklinde erişebiliriz. Bu parametreleri 
<code>Article.new</code> satırına tek tek verebiliriz. Ancak bu hem hata yapmaya açık hem 
de tablo sütun sayısı arttıkça çok yorucu olacaktır. </p><p>Bunun yerine verileri içeren tek bir hash olarak parametreyi verebiliriz. Ancak 
hala bu hash içinde hangi parametrelerin izin verildiğini belirtmemiz gerekir. 
Aksi takdirde kötü niyetli bir kullanıcı özel verilerin üzerine yazmak için extra 
parametreler gönderebilir. Gerçekte <code>params[:article]</code> değerini filtre etmeden 
göndermeye kalkarsak Rails bize bir <code>ForbiddenAttributesError</code> hata mesajı vererek 
problem hakkında bizi bilgilendirecektir. Bu yüzden Rails'in <em>Strong Parameters</em> 
denilen özelliğini kullanarak <code>params</code> değerini filtre ederiz. Bunu <code>params</code> için 
bir <a href="https://en.wikipedia.org/wiki/Strong_and_weak_typing">strong typing</a> olarak 
düşünebiliriz.</p><p>Şimdi <code>app/controllers/articles_controller.rb</code> kontrolörü en sonuna private olarak 
bir metod ekleyelim adı da <code>article_params</code> olsun ve <code>params</code> değerini filtrelesin. 
Sonra da <code>create</code> metodunu bunu kullanacak şekilde değiştirelim:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@articles</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">article_params</span><span class="p">)</span>

    <span class="k">if</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">save</span>
      <span class="n">redirect_to</span> <span class="vi">@article</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:new</span><span class="p">,</span> <span class="ss">status: :unprocessable_entity</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="kp">private</span>
    <span class="k">def</span> <span class="nf">article_params</span>
      <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:article</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="ss">:body</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class ArticlesController &lt; ApplicationController
  def index
    @articles = Article.all
  end

  def show
    @article = Article.find(params[:id])
  end

  def new
    @article = Article.new
  end

  def create
    @article = Article.new(article_params)

    if @article.save
      redirect_to @article
    else
      render :new, status: :unprocessable_entity
    end
  end

  private
    def article_params
      params.require(:article).permit(:title, :body)
    end
end
">Copy</button>
</div>
<div class="info"><p>Strong Parameters hakkında daha fazla bilgi için <a href="action_controller_overview.html#strong-parameters">Action Controller İncelemesi §
Strong Parameters</a>.</p></div><h5 id="doğrulamalar-ve-hata-mesajı-göstermek"><a class="anchorlink" href="#do%C4%9Frulamalar-ve-hata-mesaj%C4%B1-g%C3%B6stermek">7.3.3 Doğrulamalar ve Hata Mesajı Göstermek</a></h5><p>Gördüğümüz gibi bir kayıt eklemek çok adımlı bir işlem. Geçersiz kullanıcı 
girdilerini incelemek bir diğer adım. Rails bize geçersiz kullanıcı girdilerini 
işlemeye yardımcı olan <em>validations</em> (doğrulama) adında bir özelliğe sahiptir. 
Doğrulamalar, model nesnesi kaydedilmeden önce bakılan kurallardır. Eğer bu 
kurallardan biri bile hata verirse kayıt işlemi iptal edilir ve model nesnesinin 
<code>errors</code> özelliğine hata mesajları eklenir.  </p><p>Şimdi <code>app/models/article.rb</code> dosyasında modelimize bazı doğrulamalar ekleyelim:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Article</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span>
  <span class="n">validates</span> <span class="ss">:body</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">length: </span><span class="p">{</span> <span class="ss">minimum: </span><span class="mi">10</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class Article &lt; ApplicationRecord
  validates :title, presence: true
  validates :body, presence: true, length: { minimum: 10 }
end
">Copy</button>
</div>
<p>İlk doğrulama <code>title</code> değerinin olmak zorunda olduğunu belirtir. <code>title</code> string 
olduğu için, bunun manası değeri en az bir tane boşluk-olmayan karakter olmalıdır. </p><p>İkinci doğrulama <code>body</code> değerinin de olmak zorunda olduğunu belirtiyor. Ek olarak 
<code>body</code> değeri en az 10 karakter uzunluğunda olmalıdır diyor.</p><div class="note"><p>Merak ediyorsunuzdur bu <code>title</code> ve <code>body</code> isimlerini biz bu şekilde özellik 
olark hiç bir yerde tanımlamadık, nerede tanımlandılar? Active Record model 
özelliklerini tablonun her sütunundan otomatik olarak oluşturur, bu yüzden model 
dosyası içinde ayrıca tanımlamanıza gerek yoktur.</p></div><p>Doğrulama yaptığımıza göre <code>title</code> ve <code>body</code> için kurala uymayan değerler gönderilince 
hata mesajı oluşacak demektir. <code>app/views/articles/new.html.erb</code> dosyası kodumuza 
bu hata mesajlarını yazacak bir bölüm ekleyelim, ne de olsa kayıt gerçekleşemeyince 
tekrar bu görsele dönecek:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span>Yeni Makale<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="vi">@article</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;div&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:title</span><span class="p">,</span> <span class="s2">"Başlık :"</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:title</span> <span class="cp">%&gt;</span>
        <span class="cp">&lt;%</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">full_messages_for</span><span class="p">(</span><span class="ss">:title</span><span class="p">).</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">message</span><span class="o">|</span> <span class="cp">%&gt;</span>
            <span class="nt">&lt;div&gt;</span><span class="cp">&lt;%=</span> <span class="n">message</span> <span class="cp">%&gt;</span><span class="nt">&lt;/div&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:body</span><span class="p">,</span> <span class="s2">"İçerik :"</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:body</span> <span class="cp">%&gt;</span>
        <span class="cp">&lt;%</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">full_messages_for</span><span class="p">(</span><span class="ss">:body</span><span class="p">).</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">message</span><span class="o">|</span> <span class="cp">%&gt;</span>
            <span class="nt">&lt;div&gt;</span><span class="cp">&lt;%=</span> <span class="n">message</span> <span class="cp">%&gt;</span><span class="nt">&lt;/div&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="ss">value: </span><span class="s2">"Makale Ekle"</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;h1&gt;Yeni Makale&lt;/h1&gt;

&lt;%= form_with model: @article do |form| %&gt;
    &lt;div&gt;
        &lt;%= form.label :title, "Başlık :" %&gt;&lt;br&gt;
        &lt;%= form.text_field :title %&gt;
        &lt;% @article.errors.full_messages_for(:title).each do |message| %&gt;
            &lt;div&gt;&lt;%= message %&gt;&lt;/div&gt;
        &lt;% end %&gt;
    &lt;/div&gt;

    &lt;div&gt;
        &lt;%= form.label :body, "İçerik :" %&gt;&lt;br&gt;
        &lt;%= form.text_area :body %&gt;
        &lt;% @article.errors.full_messages_for(:body).each do |message| %&gt;
            &lt;div&gt;&lt;%= message %&gt;&lt;/div&gt;
        &lt;% end %&gt;
    &lt;/div&gt;

    &lt;div&gt;
        &lt;%= form.submit value: "Makale Ekle" %&gt;
    &lt;/div&gt;
&lt;% end %&gt;
'>Copy</button>
</div>
<p><a href="https://edgeapi.rubyonrails.org/classes/ActiveModel/Errors.html#method-i-full_messages_for"><code>full_messages_for</code></a> metodu belirtilen özellik için kullanıcının 
anlayabileceği hata mesajlarını içeren bir array döner. Hata yoksa bu array 
boş olur bu durumda da mesaj bölümü görsele hiç çıkmaz. </p><p>Her şeyi birlikte anlamak için <code>new</code> ve <code>create</code> aksiyonlarına tekrar bakalım:</p><div class="code_container">
<pre><code class="highlight ruby">  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">article_params</span><span class="p">)</span>

    <span class="k">if</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">save</span>
      <span class="n">redirect_to</span> <span class="vi">@article</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:new</span><span class="p">,</span> <span class="ss">status: :unprocessable_entity</span>
    <span class="k">end</span>
  <span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="  def new
    @article = Article.new
  end

  def create
    @article = Article.new(article_params)

    if @article.save
      redirect_to @article
    else
      render :new, status: :unprocessable_entity
    end
  end
">Copy</button>
</div>
<p><a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> adresini tarayıcıda açtığımızda <code>GET /articles/new</code>
isteği <code>new</code> aksiyonuna yönlendirilir. <code>new</code> aksiyonu <code>@article</code> değerini kaydetmeye 
kalkmaz, bu yüzden doğrulamalar çalışmaz ve hata mesajları verilmez.</p><p>Formu gönderdiğimizde <code>POST /articles</code> isteği <code>create</code> aksiyonuna yönlendirilir. <code>create</code>
aksiyonu <code>@article</code> değerini <em>kaydedecektir</em>. Bu yüzden doğrulamalar <em>çalışır</em>. Eğer 
doğrulama hataya düşerse <code>@article</code> değeri kaydedilmez ve <code>app/views/articles/new.html.erb</code> 
görseli tekrar yayınlanarak hata mesajlarının gösterilmesi sağlanır.</p><div class="info"><p>Doğrulamalar hakkında daha fazla bilgi için <a href="active_record_validations.html">Active Record Doğrulamalar</a>. Doğrulama hata mesajları hakkında daha fazla bilgi için 
<a href="active_record_validations.html#do%C4%9Frulama-hatalar%C4%B1yla-%C3%A7al%C4%B1%C5%9Fmak">Active Record Validations § Doğrulama Hatalarıyla Çalışmak</a>.</p></div><h5 id="yeni-makale-eklemek-toparlayalım"><a class="anchorlink" href="#yeni-makale-eklemek-toparlayal%C4%B1m">7.3.4 Toparlayalım</a></h5><p>Şimdi <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> adresini ziyaret ederek yeni makale 
ekleyebiliyoruz. Toparlamak için <code>app/views/articles/index.html.erb</code> görselinden 
buraya bir link koyalım ki kullanıcı adrese gelebilsin:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span>Makaleler<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
    <span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
        <span class="nt">&lt;li&gt;</span>
            <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">article</span><span class="p">.</span><span class="nf">title</span><span class="p">,</span> <span class="n">article</span> <span class="cp">%&gt;</span>
        <span class="nt">&lt;/li&gt;</span>
    <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Yeni Makale"</span><span class="p">,</span> <span class="n">new_article_path</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;h1&gt;Makaleler&lt;/h1&gt;

&lt;ul&gt;
    &lt;% @articles.each do |article| %&gt;
        &lt;li&gt;
            &lt;%= link_to article.title, article %&gt;
        &lt;/li&gt;
    &lt;% end %&gt;
&lt;/ul&gt;

&lt;%= link_to "Yeni Makale", new_article_path %&gt;
'>Copy</button>
</div>
<h4 id="bir-makaleyi-değiştirmek"><a class="anchorlink" href="#bir-makaleyi-de%C4%9Fi%C5%9Ftirmek">7.4 Bir Makaleyi Değiştirmek</a></h4><p>CRUD yapısının "CR" kısmını bitirdik, sıra "U" (update - güncelle) kısmında. Bir 
kaydın güncellenmesi yeni kayıt üretilmesine çok benzer bir proses. İkisi de çok 
adımlı işlemler. İlk önce kullanıcı veriyi düzenlemek için bir form talebinde 
bulunur. Kullanıcı formu gönderir. Girilen değerlerde hata yoksa değerler kaydedilir. 
Aksi halde form hata mesajları ile birlikte tekrar yayınlanarak işlem tekrar edilir.</p><p>Bu adımlar kontrolörün <code>edit</code> ve <code>update</code> aksiyonları ile işlenir. Şimdi 
<code>app/controllers/articles_controller.rb</code> kontrolörüne <code>create</code> aksiyonu altına 
bu aksiyonların tipik kodunu yazalım:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@articles</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">article_params</span><span class="p">)</span>

    <span class="k">if</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">save</span>
      <span class="n">redirect_to</span> <span class="vi">@article</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:new</span><span class="p">,</span> <span class="ss">status: :unprocessable_entity</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">edit</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">update</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>

    <span class="k">if</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">article_params</span><span class="p">)</span>
      <span class="n">redirect_to</span> <span class="vi">@article</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:edit</span><span class="p">,</span> <span class="ss">status: :unprocessable_entity</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="kp">private</span>
    <span class="k">def</span> <span class="nf">article_params</span>
      <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:article</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="ss">:body</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class ArticlesController &lt; ApplicationController
  def index
    @articles = Article.all
  end

  def show
    @article = Article.find(params[:id])
  end

  def new
    @article = Article.new
  end

  def create
    @article = Article.new(article_params)

    if @article.save
      redirect_to @article
    else
      render :new, status: :unprocessable_entity
    end
  end

  def edit
    @article = Article.find(params[:id])
  end

  def update
    @article = Article.find(params[:id])

    if @article.update(article_params)
      redirect_to @article
    else
      render :edit, status: :unprocessable_entity
    end
  end

  private
    def article_params
      params.require(:article).permit(:title, :body)
    end
end
">Copy</button>
</div>
<p>Dikkat ederseniz <code>edit</code> ve <code>update</code> aksiyonları <code>new</code> ve <code>create</code> aksiyonları 
ile çok benzer çalışıyor.</p><p><code>edit</code> aksiyonu veritabanından makaleyi çeker ve <code>@article</code> oluşum değişkenine 
koyar böylece form üretilirken bu değerler kullanılabilir. Default olarak <code>edit</code> 
aksiyonu  <code>app/views/articles/edit.html.erb</code> görselini yayınlar.</p><p><code>update</code> aksiyonu makaleyi veritabanından tekrar çeker ve forma girilen verileri 
<code>article_params</code> metoduyla filtre ederek güncellemeye kalkar. Eğer doğrulama 
hatası oluşmamışsa ve güncelleme başarılı olursa tarayıcıyı o makalenin sayfasına 
yönlendirir. Eğer bir soru olursa formu hata mesajları ile birlikte tekrar 
<code>app/views/articles/edit.html.erb</code> görselinde yayınlar.</p><h5 id="görsel-kodunda-paylaşmak-i̇çin-parça-görsel-kullanmak"><a class="anchorlink" href="#g%C3%B6rsel-kodunda-payla%C5%9Fmak-i%CC%87%C3%A7in-par%C3%A7a-g%C3%B6rsel-kullanmak">7.4.1 Görsel Kodunda Paylaşmak İçin Parça Görsel Kullanmak</a></h5><p><code>edit</code> formumuz <code>new</code> formuyla aynı görünecek. Kodları bile aynı olacak, Rails'in 
form builder ve resourcefull routing özellikleri sayesinde. Form builder sayesinde 
form gönderilirken otomatik olarak aksiyona göre istekte bulunacak şekilde 
konfigüre edilir.  </p><p>Form kodu aynı olacağı için, formu <em>partial</em> adı verilen paylaşılmış bir görsel 
dosyasına koyarız. <code>app/views/articles/_form.html.erb</code> parça görsel dosyasını 
aşağıdaki içerikle oluşturalım:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="n">article</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;div&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:title</span><span class="p">,</span> <span class="s2">"Başlık :"</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:title</span> <span class="cp">%&gt;</span>
        <span class="cp">&lt;%</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">full_messages_for</span><span class="p">(</span><span class="ss">:title</span><span class="p">).</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">message</span><span class="o">|</span> <span class="cp">%&gt;</span>
            <span class="nt">&lt;div&gt;</span><span class="cp">&lt;%=</span> <span class="n">message</span> <span class="cp">%&gt;</span><span class="nt">&lt;/div&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:body</span><span class="p">,</span> <span class="s2">"İçerik :"</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:body</span> <span class="cp">%&gt;</span>
        <span class="cp">&lt;%</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">full_messages_for</span><span class="p">(</span><span class="ss">:body</span><span class="p">).</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">message</span><span class="o">|</span> <span class="cp">%&gt;</span>
            <span class="nt">&lt;div&gt;</span><span class="cp">&lt;%=</span> <span class="n">message</span> <span class="cp">%&gt;</span><span class="nt">&lt;/div&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="ss">value: </span><span class="n">submit_lbl</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;%= form_with model: article do |form| %&gt;
    &lt;div&gt;
        &lt;%= form.label :title, "Başlık :" %&gt;&lt;br&gt;
        &lt;%= form.text_field :title %&gt;
        &lt;% @article.errors.full_messages_for(:title).each do |message| %&gt;
            &lt;div&gt;&lt;%= message %&gt;&lt;/div&gt;
        &lt;% end %&gt;
    &lt;/div&gt;

    &lt;div&gt;
        &lt;%= form.label :body, "İçerik :" %&gt;&lt;br&gt;
        &lt;%= form.text_area :body %&gt;
        &lt;% @article.errors.full_messages_for(:body).each do |message| %&gt;
            &lt;div&gt;&lt;%= message %&gt;&lt;/div&gt;
        &lt;% end %&gt;
    &lt;/div&gt;

    &lt;div&gt;
        &lt;%= form.submit value: submit_lbl %&gt;
    &lt;/div&gt;
&lt;% end %&gt;
'>Copy</button>
</div>
<div class="note"><p>Buton üzerindeki yazıyı Türkçe yazma sevdası burada sıkıntı çıkarıyor. Çünkü 
aynı formu <code>new</code> aksiyonunda kullanırken default olarak <code>Create Article</code> yazacaktı, 
ama <code>edit</code> aksiyonunda default <code>Update Article</code> yazacaktı. Bu yüzden buton etiketini 
<code>submit_lbl</code> adında bir lokal değişkene bağladım formu çağırırken istediğim etiket 
değerlerini bu değişken ile göndereceğiz.</p></div><p>Yukarıdaki koddaki form bizim <code>app/views/articles/new.html.erb</code> görselimizdeki form 
kodu ile aynı. Sadece <code>@article</code> yerine <code>article</code> yazılmış. Parça görseller paylaşılan 
kodlar olduğu için kontrolörde belirlenen oluşum değişkenlerine direk erişmeleri 
teamül olarak istenmez. Bunun yerine parça görseli çağırırken parametre olarak 
değerleri bir lokal değişkene veririz.</p><p>Şimdi <code>app/views/articles/new.html.erb</code> görselini bu parça görseli kullanacak şekilde 
<a href="https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/RenderingHelper.html#method-i-render"><code>render</code></a> 
metoduyla değiştirelim:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span>Yeni Makale<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"form"</span><span class="p">,</span> <span class="ss">article: </span><span class="vi">@article</span><span class="p">,</span> <span class="ss">submit_lbl: </span><span class="s2">"Makale Ekle"</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;h1&gt;Yeni Makale&lt;/h1&gt;

&lt;%= render "form", article: @article, submit_lbl: "Makale Ekle" %&gt;
'>Copy</button>
</div>
<div class="note"><p>Bir parça görselin dosya adı <code>_form.html.erb</code> gibi <strong>altçizgi</strong> ile başlamalıdır. 
Fakat yayınlarken altçizgi olmadan ismi verilir <code>render "form"</code> gibi.</p></div><p>Şimdi benzer şekilde <code>app/views/articles/edit.html.erb</code> görselini yazalım:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span>Makaleyi Düzenle<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"form"</span><span class="p">,</span> <span class="ss">article: </span><span class="vi">@article</span><span class="p">,</span> <span class="ss">submit_lbl: </span><span class="s2">"Makaleyi Kaydet"</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;h1&gt;Makaleyi Düzenle&lt;/h1&gt;

&lt;%= render "form", article: @article, submit_lbl: "Makaleyi Kaydet" %&gt;
'>Copy</button>
</div>
<div class="info"><p>Parça görseller hakkında daha fazla bilgi için <a href="layouts_and_rendering.html#par%C3%A7a-g%C3%B6rsel-kullanmak">Rails Yerleşimler ve Yayınlama § Parça Görsel Kullanmak</a>.</p></div><h5 id="bir-makaleyi-değiştirmek-toparlayalım"><a class="anchorlink" href="#bir-makaleyi-de%C4%9Fi%C5%9Ftirmek-toparlayal%C4%B1m">7.4.2 Toparlayalım</a></h5><p>Şu anda bir makaleyi onun <code>edit</code> sayfasına giderek değiştirebiliyoruz, mesela 
<a href="http://localhost:3000/articles/1/edit">http://localhost:3000/articles/1/edit</a>. Bu sayfaya gelebilmek için 
<code>app/views/articles/show.html.erb</code> 
görseli en altına bir düzenleme linki ekleyelim:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;ul&gt;</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Düzenle"</span><span class="p">,</span> <span class="n">edit_article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;h1&gt;&lt;%= @article.title %&gt;&lt;/h1&gt;

&lt;p&gt;&lt;%= @article.body %&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;%= link_to "Düzenle", edit_article_path(@article) %&gt;&lt;/li&gt;
&lt;/ul&gt;
'>Copy</button>
</div>
<h4 id="bir-makaleyi-silmek"><a class="anchorlink" href="#bir-makaleyi-silmek">7.5 Bir Makaleyi Silmek</a></h4><p>Sonunda CRUD yapısı son kısmı "D" (delete - sil) işlemine. Bir kaydın silinmesi, yeni 
eklenmesi ve düzenlenmesine göre daha basit bir işlem. Sadece bir yönlendirme ve bir 
kontrolör aksiyonuna ihtiyaç duyuyor. Yönlendirmeyi bizim için resourceful routing 
(<code>resources :articles</code>) satırını girdiğimizde yaptı aslında. Yönlendirme <code>DELETE /articles/:id</code> 
adresine gönderiyor ve bu da <code>ArticlesController</code> kontrolörü <code>destroy</code> aksiyonuna 
istek gönderiyor.</p><p><code>destroy</code> aksiyonu için standart kodu <code>app/controllers/articles_controller.rb</code> dosyasına,
<code>update</code> aksiyonu altına tanımlayalım:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@articles</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">article_params</span><span class="p">)</span>

    <span class="k">if</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">save</span>
      <span class="n">redirect_to</span> <span class="vi">@article</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:new</span><span class="p">,</span> <span class="ss">status: :unprocessable_entity</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">edit</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">update</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>

    <span class="k">if</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">article_params</span><span class="p">)</span>
      <span class="n">redirect_to</span> <span class="vi">@article</span>
    <span class="k">else</span>
      <span class="n">render</span> <span class="ss">:edit</span><span class="p">,</span> <span class="ss">status: :unprocessable_entity</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">destroy</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="vi">@article</span><span class="p">.</span><span class="nf">destroy</span>

    <span class="n">redirect_to</span> <span class="n">root_path</span><span class="p">,</span> <span class="ss">status: :see_other</span>
  <span class="k">end</span>

  <span class="kp">private</span>
    <span class="k">def</span> <span class="nf">article_params</span>
      <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:article</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="ss">:body</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class ArticlesController &lt; ApplicationController
  def index
    @articles = Article.all
  end

  def show
    @article = Article.find(params[:id])
  end

  def new
    @article = Article.new
  end

  def create
    @article = Article.new(article_params)

    if @article.save
      redirect_to @article
    else
      render :new, status: :unprocessable_entity
    end
  end

  def edit
    @article = Article.find(params[:id])
  end

  def update
    @article = Article.find(params[:id])

    if @article.update(article_params)
      redirect_to @article
    else
      render :edit, status: :unprocessable_entity
    end
  end

  def destroy
    @article = Article.find(params[:id])
    @article.destroy

    redirect_to root_path, status: :see_other
  end

  private
    def article_params
      params.require(:article).permit(:title, :body)
    end
end
">Copy</button>
</div>
<p><code>destroy</code> aksiyonu makaleyi veritabanından çeker ve onun üzerinde <a href="https://edgeapi.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-destroy"><code>destroy</code></a>
metodunu çağırır. Sonra da tarayıcıyı status kodunda <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/303">303 See Other</a> olacak şekilde ana sayfaya yönlendirir.</p><p>Ana sayfaya yönlendirmeyi tercih ettik, çünkü ana sayfa zaten aynı zamanda makalelerin 
ana erişim sayfası. Ama modele özel yönlendirme yapmak için örn. <code>articles_path</code> 
yönlendirmesi de yapabilirsiniz.</p><p>Şimdi <code>app/views/articles/show.html.erb</code> görselinde en alta makaleyi silmek 
için de bir link ekleyelim:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Düzenle"</span><span class="p">,</span> <span class="n">edit_article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Sil"</span><span class="p">,</span> <span class="n">article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">),</span> <span class="ss">data: </span><span class="p">{</span>
        <span class="ss">turbo_method: :delete</span><span class="p">,</span>
        <span class="ss">turbo_confirm: </span><span class="s2">"Emin misin?"</span>
    <span class="p">}</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;h1&gt;&lt;%= @article.title %&gt;&lt;/h1&gt;

&lt;p&gt;&lt;%= @article.body %&gt;&lt;/p&gt;

&lt;ul&gt;
    &lt;li&gt;&lt;%= link_to "Düzenle", edit_article_path(@article) %&gt;&lt;/li&gt;
    &lt;li&gt;&lt;%= link_to "Sil", article_path(@article), data: {
        turbo_method: :delete,
        turbo_confirm: "Emin misin?"
    } %&gt;&lt;/li&gt;
&lt;ul&gt;
'>Copy</button>
</div>
<p>Yukarıdaki kodda <code>data</code> opsiyonu ile <code>data-turbo-method</code> ve 
<code>data-turbo-confirm</code> HTML özelliklerini "Sil" linkine ekledik. Bu özelliklerin 
ikisi de Rails uygulamalarında default olarak dahil edilmiş olan <a href="https://turbo.hotwired.dev/">Turbo</a> 
yapısına gönderilir. <code>data-turbo-method="delete"</code> ile default <code>GET</code> isteği 
terine <code>DELETE</code> isteği yapılması sağlanır. <code>data-turbo_confirm: "Emin misin?"</code> 
ile link tıklanınca önce bir konfirmasyon diyaloğu gösterilmesi sağlanır. 
Kullanıcı diyaloğu iptal ederse istek yapılmaz, iptal edilir.</p><p>Bu kadar, artık makaleleri listeliyoruz, gösteriyoruz, yenisini ekliyoruz, 
değiştiriyoruz ve silebiliyoruz. Tam CRUD yapı!</p><h3 id="i̇kinci-bir-model-eklemek"><a class="anchorlink" href="#i%CC%87kinci-bir-model-eklemek">8 İkinci Bir Model Eklemek</a></h3><p>Uygulamaya ikinci bir model ekleme zamanı. İkinci modelde makalelere yapılan 
yorumları işleyeceğiz.</p><h4 id="modeli-üretmek"><a class="anchorlink" href="#modeli-%C3%BCretmek">8.1 Modeli Üretmek</a></h4><p><code>Article</code> modelini üretirken kullandığımız jeneratör komutunu bu sefer <code>Comment</code> 
modelini üretmek için kullanacağız. Ama yorumun yapıldığı makaleye bir referans 
bağlantısı ekleyeceğiz. Terminalde şu komutu çalıştırın:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>generate model Comment commenter:string body:text article:references
</code></pre>
<button class="clipboard-button" data-clipboard-text="bin/rails generate model Comment commenter:string body:text article:references
">Copy</button>
</div>
<p>Bu komut dört dosya üretir:</p>
<table>
<thead>
<tr>
<th>Dosya</th>
<th>Amaç</th>
</tr>
</thead>
<tbody>
<tr>
<td>db/migrate/20220501120830_create_comments.rb</td>
<td>Veritabanında comments tablosunu ekleyecek olan migrasyon (sizin dosya isminizde başlangıçta farklı bir timestamp olacaktır)</td>
</tr>
<tr>
<td>app/models/comment.rb</td>
<td>Comment modeli</td>
</tr>
<tr>
<td>test/models/comment_test.rb</td>
<td>comment modeli için test kodları</td>
</tr>
<tr>
<td>test/fixtures/comments.yml</td>
<td>Test için örnek comment verileri</td>
</tr>
</tbody>
</table>
<p>İlk önce <code>app/models/comment.rb</code> dosyasına bakalım:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Comment</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">belongs_to</span> <span class="ss">:article</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class Comment &lt; ApplicationRecord
  belongs_to :article
end
">Copy</button>
</div>
<p>Bu daha önce üretilen <code>Article</code> modeline çok benziyor. <code>belongs_to :article</code> satırı 
farklı, bu satır bir Active Record <em>association</em> ayarlıyor. Tablolar arası bu ilişkileri 
bu klavuzun sonraki bölümünde göreceksiniz. </p><p>Terminalde komut girerken kullandığımız (<code>:references</code>) kelimesi modeller için özel bir 
kelime (bir veri tipi değil). Bunu görünce Rails veritabanında tabloya bu verilen model 
ismine <code>_id</code> ekleyerek verdiği isimle içinde integer sayı barındıran bir sütun daha ekler
(yani article_id). Daha iyi anlamak için migrasyonu çalıştırdıktan sonra <code>db/schema.rb</code> 
dosyasını inceleyin.</p><p>Modele ilave olarak Rails karşı gelen tabloyu üretmek için bir migrasyon dosyası hazırladı:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">CreateComments</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mf">7.0</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">create_table</span> <span class="ss">:comments</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:commenter</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">text</span> <span class="ss">:body</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">references</span> <span class="ss">:article</span><span class="p">,</span> <span class="ss">null: </span><span class="kp">false</span><span class="p">,</span> <span class="ss">foreign_key: </span><span class="kp">true</span>

      <span class="n">t</span><span class="p">.</span><span class="nf">timestamps</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class CreateComments &lt; ActiveRecord::Migration[7.0]
  def change
    create_table :comments do |t|
      t.string :commenter
      t.text :body
      t.references :article, null: false, foreign_key: true

      t.timestamps
    end
  end
end
">Copy</button>
</div>
<p><code>t.references</code> satırı adı <code>article_id</code> olan bir sütun ekler, foreign key ile de 
<code>articles</code> tablosu <code>id</code> sütununa bağlandığı bildirilir. Devam edelim ve migrasyonu 
çalıştıralım:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>db:migrate
</code></pre>
<button class="clipboard-button" data-clipboard-text="bin/rails db:migrate
">Copy</button>
</div>
<p>Rails veritabanına sadece şimdiye kadar uygulamamış olduğu migrasyonları bilip 
onları uygulayacak kadar akılı, bu yüzden sadece comments tablosunun üretilmesine
ait migrasyon çalışacaktır:</p><div class="code_container">
<pre><code class="highlight plaintext">==  CreateComments: migrating =================================================
-- create_table(:comments)
   -&gt; 0.0115s
==  CreateComments: migrated (0.0119s) ========================================
</code></pre>
<button class="clipboard-button" data-clipboard-text="==  CreateComments: migrating =================================================
-- create_table(:comments)
   -&gt; 0.0115s
==  CreateComments: migrated (0.0119s) ========================================
">Copy</button>
</div>
<h4 id="modelleri-i̇lişkilendirmek"><a class="anchorlink" href="#modelleri-i%CC%87li%C5%9Fkilendirmek">8.2 Modelleri İlişkilendirmek</a></h4><p>Active Record ilişkilendirmeleri iki model arasındaki bağımlılıkları kolayca 
tanımlamanıza imkan sağlar. comments ve articles tabloları düşünüldüğünde 
bağımlılıklar şöyledir:</p>
<ul>
<li>Her comment bir article'a aittir.</li>
<li>Bir article birçok comment'e sahip olabilir.</li>
</ul>
<p>Gerçekte Rails bu bağımlılıkları tanımlarken kodun görsel anlamı bu yukarıda 
yazdıklarımıza çok benzer. <code>Comment</code> modeli kodunda bir tanesini gördük bile 
(app/models/comment.rb), her yorum bir makaleye aittir:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Comment</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">belongs_to</span> <span class="ss">:article</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class Comment &lt; ApplicationRecord
  belongs_to :article
end
">Copy</button>
</div>
<p><code>app/models/article.rb</code> modeli daha önce üretildiği ve kullanıcı tarafından içeriği 
değiştirilmiş olma ihtimali olduğundan Rails bu model dosyasına müdahale etmez. 
Bu dosyaya da bağımlılığı biz tanımlayalım:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Article</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">has_many</span> <span class="ss">:comments</span>

  <span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span>
  <span class="n">validates</span> <span class="ss">:body</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">length: </span><span class="p">{</span> <span class="ss">minimum: </span><span class="mi">10</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class Article &lt; ApplicationRecord
  has_many :comments

  validates :title, presence: true
  validates :body, presence: true, length: { minimum: 10 }
end
">Copy</button>
</div>
<p>Bu iki deklerasyon ile bir çok otomatik davranışı elde edebiliriz. Örneğin, eğer 
içinde bir makale bilgilerini saklayan <code>@article</code> değişkenimiz varsa, bu makaleye 
yapılan tüm yorumları <code>@article.comments</code> koduyla elde edebiliriz.</p><div class="info"><p>Active Record ilişkilendirmeler için ayrıntılı bilgi <a href="association_basics.html">Active Record İlişkilendirmeler</a> klavuzunda.</p></div><h4 id="yorumlar-i̇çin-bir-yönlendirme-eklemek"><a class="anchorlink" href="#yorumlar-i%CC%87%C3%A7in-bir-y%C3%B6nlendirme-eklemek">8.3 Yorumlar İçin Bir Yönlendirme Eklemek</a></h4><p><code>articles</code> kontrolöründe olduğu gibi, Rails'in <code>comments</code> verilerini nerede 
işleyeceğini bilmesi için yönlendirmeler eklemeliyiz. <code>config/routes.rb</code> 
dosyasını açın ve aşağıdaki kodu uygulayın:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s2">"articles#index"</span>

  <span class="n">resources</span> <span class="ss">:articles</span> <span class="k">do</span>
    <span class="n">resources</span> <span class="ss">:comments</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='Rails.application.routes.draw do
  root "articles#index"

  resources :articles do
    resources :comments
  end
end
'>Copy</button>
</div>
<p>Bu <code>comments</code> yönlendirmelerini <code>articles</code> içinde bir <em>nested resource</em> olarak 
oluşturur. Bu şekilde tablolar arasındaki hiyerarşi bir kez daha belirtilmek istenmiş.</p><div class="info"><p>Yönlendirmeler hakkında ayrıntılı bilgi için <a href="routing.html">Rails Routing</a>
guide.</p></div><h4 id="kontrolör-eklenmesi"><a class="anchorlink" href="#kontrol%C3%B6r-eklenmesi">8.4 Kontrolör Eklenmesi</a></h4><p>Model elinizdeyken, dikkatinizi karşılık gelecek kontrolöre verebilirsiniz. Daha 
önce kullandığımızın aynı jeneratörü kullanacağız:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>generate controller Comments
</code></pre>
<button class="clipboard-button" data-clipboard-text="bin/rails generate controller Comments
">Copy</button>
</div>
<p>Bu komut bir boş klasör ve üç dosya üretecektir:</p>
<table>
<thead>
<tr>
<th>Dosya/Klasör</th>
<th>Amaç</th>
</tr>
</thead>
<tbody>
<tr>
<td>app/controllers/comments_controller.rb</td>
<td>Comments kontrolörü</td>
</tr>
<tr>
<td>app/views/comments/</td>
<td>Kontrolöre ait görsel dosyaları burada</td>
</tr>
<tr>
<td>test/controllers/comments_controller_test.rb</td>
<td>Kontrolör için test kodu</td>
</tr>
<tr>
<td>app/helpers/comments_helper.rb</td>
<td>Görsel yardımcı kodları dosyası</td>
</tr>
</tbody>
</table>
<p>Herhangi bir blog'da olduğu gibi, okuyucuların yorumlarını makaleyi okumayı 
bitirdikten sonra yapmalarını bekleriz. Yorum yollandıktan sonra tekrar makale 
show sayfasına geri giderek yorumun yerinde olduğunu görmesini bekleriz. 
Buna bağlı olarak, <code>CommentsController</code> kontrolörümüz orada yeni yorum 
eklemesi ve spam yorumların silinmesi için metodlar sağlayacaktır.</p><p>Öyleyse ilk önce Article kontrolörü show görseline gidelim 
(<code>app/views/articles/show.html.erb</code>) yeni yorum eklenme imkanı ekleyelim:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Düzenle"</span><span class="p">,</span> <span class="n">edit_article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Sil"</span><span class="p">,</span> <span class="n">article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">),</span> <span class="ss">data: </span><span class="p">{</span>
        <span class="ss">turbo_method: :delete</span><span class="p">,</span>
        <span class="ss">turbo_confirm: </span><span class="s2">"Emin misin?"</span>
    <span class="p">}</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>

<span class="nt">&lt;h2&gt;</span>Bir yorum ekleyin:<span class="nt">&lt;/h2&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="p">[</span> <span class="vi">@article</span><span class="p">,</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">build</span> <span class="p">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:commenter</span><span class="p">,</span> <span class="s2">"Yorumcu :"</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:commenter</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:body</span><span class="p">,</span> <span class="s2">"Yorum :"</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="ss">value: </span><span class="s2">"Gönder"</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;h1&gt;&lt;%= @article.title %&gt;&lt;/h1&gt;

&lt;p&gt;&lt;%= @article.body %&gt;&lt;/p&gt;

&lt;ul&gt;
    &lt;li&gt;&lt;%= link_to "Düzenle", edit_article_path(@article) %&gt;&lt;/li&gt;
    &lt;li&gt;&lt;%= link_to "Sil", article_path(@article), data: {
        turbo_method: :delete,
        turbo_confirm: "Emin misin?"
    } %&gt;&lt;/li&gt;
&lt;ul&gt;

&lt;h2&gt;Bir yorum ekleyin:&lt;/h2&gt;
&lt;%= form_with model: [ @article, @article.comments.build ] do |form| %&gt;
  &lt;p&gt;
    &lt;%= form.label :commenter, "Yorumcu :" %&gt;&lt;br&gt;
    &lt;%= form.text_field :commenter %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= form.label :body, "Yorum :" %&gt;&lt;br&gt;
    &lt;%= form.text_area :body %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= form.submit value: "Gönder" %&gt;
  &lt;/p&gt;
&lt;% end %&gt;
'>Copy</button>
</div>
<p>Bu <code>Article</code> show sayfasına <code>CommentsController</code> kontrolörünün <code>create</code> aksiyonunu 
çağırarak yeni yorum ekleyen bir form yerleştirir. Buradaki <code>form_with</code> çağrısı 
bir array parametre alıyor, bu <code>/articles/1/comments</code> gibi bir nested route üretiyor.</p><p><code>app/controllers/comments_controller.rb</code> içinde <code>create</code> aksiyonunu yazalım:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">CommentsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:article_id</span><span class="p">])</span>
    <span class="vi">@comment</span> <span class="o">=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">comment_params</span><span class="p">)</span>
    <span class="n">redirect_to</span> <span class="n">article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="kp">private</span>
    <span class="k">def</span> <span class="nf">comment_params</span>
      <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:comment</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:commenter</span><span class="p">,</span> <span class="ss">:body</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class CommentsController &lt; ApplicationController
  def create
    @article = Article.find(params[:article_id])
    @comment = @article.comments.create(comment_params)
    redirect_to article_path(@article)
  end

  private
    def comment_params
      params.require(:comment).permit(:commenter, :body)
    end
end
">Copy</button>
</div>
<p>Article kontrolöründe yaptığımıza göre biraz daha karmaşık gelebilir. Bu yaptığımız 
içiçe yapının bir yan etkisi. Bir yoruma yapılan istek aynı zamanda onun bağlı 
olduğu makaleyi de takibe devam etmelidir, bu yüzden başta <code>Article</code> modeline 
<code>find</code> metodu uygulanarak bu makale bulunuyor. </p><p>Ek olarak kodumuz bir ilişkilendirme sayesinde kazandığımız avantajlı metodlara 
da sahip. <code>@article.comments</code> makalenin yorumları nesnesinin <code>create</code> metodunu 
o makaleye yorum eklemek ve kaydetmek için kullanıyoruz. Bu yorumu direk olarak 
o makaleye bağlıyor.</p><p>Yeni yorumu ekledikten sonra <code>article_path(@article)</code> yardımcı metodunu kullanarak
makalenin sayfasına geri dönüyoruz. Daha önceden bildiğimiz gibi <code>ArticlesController</code> 
kontrolörü <code>show</code> aksiyonu <code>show.html.erb</code> görsel şablonunu yayınlıyor. Burası bizim 
yorumları yayınlamayı da istediğimiz yer. O zaman <code>app/views/articles/show.html.erb</code> 
dosyasına yorumları gösterecek ilaveyi yapalım:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Düzenle"</span><span class="p">,</span> <span class="n">edit_article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Sil"</span><span class="p">,</span> <span class="n">article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">),</span> <span class="ss">data: </span><span class="p">{</span>
        <span class="ss">turbo_method: :delete</span><span class="p">,</span>
        <span class="ss">turbo_confirm: </span><span class="s2">"Emin misin?"</span>
    <span class="p">}</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>

<span class="nt">&lt;h2&gt;</span>Yorumlar<span class="nt">&lt;/h2&gt;</span>
<span class="cp">&lt;%</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">comment</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;strong&gt;</span>Yorumcu : <span class="nt">&lt;/strong&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">comment</span><span class="p">.</span><span class="nf">commenter</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;strong&gt;</span>Yorum : <span class="nt">&lt;/strong&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">comment</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>  
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>

<span class="nt">&lt;h2&gt;</span>Bir yorum ekleyin:<span class="nt">&lt;/h2&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="p">[</span> <span class="vi">@article</span><span class="p">,</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">build</span> <span class="p">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:commenter</span><span class="p">,</span> <span class="s2">"Yorumcu :"</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:commenter</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:body</span><span class="p">,</span> <span class="s2">"Yorum :"</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="ss">value: </span><span class="s2">"Gönder"</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;h1&gt;&lt;%= @article.title %&gt;&lt;/h1&gt;

&lt;p&gt;&lt;%= @article.body %&gt;&lt;/p&gt;

&lt;ul&gt;
    &lt;li&gt;&lt;%= link_to "Düzenle", edit_article_path(@article) %&gt;&lt;/li&gt;
    &lt;li&gt;&lt;%= link_to "Sil", article_path(@article), data: {
        turbo_method: :delete,
        turbo_confirm: "Emin misin?"
    } %&gt;&lt;/li&gt;
&lt;ul&gt;

&lt;h2&gt;Yorumlar&lt;/h2&gt;
&lt;% @article.comments.each do |comment| %&gt;
  &lt;p&gt;
    &lt;strong&gt;Yorumcu : &lt;/strong&gt;
    &lt;%= comment.commenter %&gt;
  &lt;/p&gt;

  &lt;p&gt;
    &lt;strong&gt;Yorum : &lt;/strong&gt;
    &lt;%= comment.body %&gt;
  &lt;/p&gt;  
&lt;% end %&gt;

&lt;h2&gt;Bir yorum ekleyin:&lt;/h2&gt;
&lt;%= form_with model: [ @article, @article.comments.build ] do |form| %&gt;
  &lt;p&gt;
    &lt;%= form.label :commenter, "Yorumcu :" %&gt;&lt;br&gt;
    &lt;%= form.text_field :commenter %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= form.label :body, "Yorum :" %&gt;&lt;br&gt;
    &lt;%= form.text_area :body %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= form.submit value: "Gönder" %&gt;
  &lt;/p&gt;
&lt;% end %&gt;
'>Copy</button>
</div>
<p>Ertık bloğınuzda makaleler ve yorumları ekleyip olması gereken yerde 
gösterebiliyorsunuz.</p><p><img src="images/getting_started/article_with_comments.png" alt="Article with Comments"></p><h3 id="kod-düzenleme"><a class="anchorlink" href="#kod-d%C3%BCzenleme">9 Kod Düzenleme</a></h3><p>Makaleler ve yorumlar çalışıyor, <code>app/views/articles/show.html.erb</code> görsel şablonumuz 
uzun ve karışık oldu. Parça görsel kullanarak basitleştirebiliriz. </p><h4 id="parça-görsel-kolleksiyonları-yayınlamak"><a class="anchorlink" href="#par%C3%A7a-g%C3%B6rsel-kolleksiyonlar%C4%B1-yay%C4%B1nlamak">9.1 Parça Görsel Kolleksiyonları Yayınlamak</a></h4><p>Öncelikle tüm yorumları göstermek için comment parça görselini <code>app/views/comments/_comment.html.erb</code> 
adında bir dosya ile oluşturalım ve içine şu kodu yazalım:</p><div class="code_container">
<pre><code class="highlight erb">  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;strong&gt;</span>Yorumcu : <span class="nt">&lt;/strong&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">comment</span><span class="p">.</span><span class="nf">commenter</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;strong&gt;</span>Yorum : <span class="nt">&lt;/strong&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">comment</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>  
</code></pre>
<button class="clipboard-button" data-clipboard-text="  &lt;p&gt;
    &lt;strong&gt;Yorumcu : &lt;/strong&gt;
    &lt;%= comment.commenter %&gt;
  &lt;/p&gt;

  &lt;p&gt;
    &lt;strong&gt;Yorum : &lt;/strong&gt;
    &lt;%= comment.body %&gt;
  &lt;/p&gt;  
">Copy</button>
</div>
<p>Sonra <code>app/views/articles/show.html.erb</code> görselini şöyle değiştirebilirsiniz:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Düzenle"</span><span class="p">,</span> <span class="n">edit_article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Sil"</span><span class="p">,</span> <span class="n">article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">),</span> <span class="ss">data: </span><span class="p">{</span>
        <span class="ss">turbo_method: :delete</span><span class="p">,</span>
        <span class="ss">turbo_confirm: </span><span class="s2">"Emin misin?"</span>
    <span class="p">}</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>

<span class="nt">&lt;h2&gt;</span>Yorumlar<span class="nt">&lt;/h2&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span> <span class="cp">%&gt;</span>

<span class="nt">&lt;h2&gt;</span>Bir yorum ekleyin:<span class="nt">&lt;/h2&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="p">[</span> <span class="vi">@article</span><span class="p">,</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">build</span> <span class="p">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:commenter</span><span class="p">,</span> <span class="s2">"Yorumcu :"</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:commenter</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:body</span><span class="p">,</span> <span class="s2">"Yorum :"</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="ss">value: </span><span class="s2">"Gönder"</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;h1&gt;&lt;%= @article.title %&gt;&lt;/h1&gt;

&lt;p&gt;&lt;%= @article.body %&gt;&lt;/p&gt;

&lt;ul&gt;
    &lt;li&gt;&lt;%= link_to "Düzenle", edit_article_path(@article) %&gt;&lt;/li&gt;
    &lt;li&gt;&lt;%= link_to "Sil", article_path(@article), data: {
        turbo_method: :delete,
        turbo_confirm: "Emin misin?"
    } %&gt;&lt;/li&gt;
&lt;ul&gt;

&lt;h2&gt;Yorumlar&lt;/h2&gt;
&lt;%= render @article.comments %&gt;

&lt;h2&gt;Bir yorum ekleyin:&lt;/h2&gt;
&lt;%= form_with model: [ @article, @article.comments.build ] do |form| %&gt;
  &lt;p&gt;
    &lt;%= form.label :commenter, "Yorumcu :" %&gt;&lt;br&gt;
    &lt;%= form.text_field :commenter %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= form.label :body, "Yorum :" %&gt;&lt;br&gt;
    &lt;%= form.text_area :body %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= form.submit value: "Gönder" %&gt;
  &lt;/p&gt;
&lt;% end %&gt;
'>Copy</button>
</div>
<p>Bu şimdi <code>app/views/comments/_comment.html.erb</code> görselini <code>@article.comments</code> 
kolleksiyonundaki her bir kayıt için tekrar tekrar gösterecektir. <code>render</code> metodu 
<code>@article.comments</code> kolleksiyonu üzerinden iterasyon yaptığı için, default olarak 
<code>comment</code> parça görselini yayınlayacak ve o andaki kaydı da <code>comment</code> değişkenine 
verecektir. Bu yüzden İngilizce tablo ve alan isimleri kullanmak daha sorunsuz kod 
yazmanız sonucu oluşturacaktır.</p><h4 id="parça-görsel-form-yayınlamak"><a class="anchorlink" href="#par%C3%A7a-g%C3%B6rsel-form-yay%C4%B1nlamak">9.2 Parça Görsel Form Yayınlamak</a></h4><p>Yeni yorum ekleme bölümündeki formu da <code>app/views/comments/_form.html.erb</code> dosayasına 
koyalım:</p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="p">[</span> <span class="vi">@article</span><span class="p">,</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">build</span> <span class="p">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:commenter</span><span class="p">,</span> <span class="s2">"Yorumcu :"</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:commenter</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:body</span><span class="p">,</span> <span class="s2">"Yorum :"</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="ss">value: </span><span class="s2">"Gönder"</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;%= form_with model: [ @article, @article.comments.build ] do |form| %&gt;
  &lt;p&gt;
    &lt;%= form.label :commenter, "Yorumcu :" %&gt;&lt;br&gt;
    &lt;%= form.text_field :commenter %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= form.label :body, "Yorum :" %&gt;&lt;br&gt;
    &lt;%= form.text_area :body %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= form.submit value: "Gönder" %&gt;
  &lt;/p&gt;
&lt;% end %&gt;
'>Copy</button>
</div>
<p>Bunu kullanan <code>app/views/articles/show.html.erb</code> görseli şöyle olur:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Düzenle"</span><span class="p">,</span> <span class="n">edit_article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Sil"</span><span class="p">,</span> <span class="n">article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">),</span> <span class="ss">data: </span><span class="p">{</span>
        <span class="ss">turbo_method: :delete</span><span class="p">,</span>
        <span class="ss">turbo_confirm: </span><span class="s2">"Emin misin?"</span>
    <span class="p">}</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;ul&gt;</span>

<span class="nt">&lt;h2&gt;</span>Yorumlar<span class="nt">&lt;/h2&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span> <span class="cp">%&gt;</span>

<span class="nt">&lt;h2&gt;</span>Bir yorum ekleyin:<span class="nt">&lt;/h2&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">render</span> <span class="s2">"comments/form"</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;h1&gt;&lt;%= @article.title %&gt;&lt;/h1&gt;

&lt;p&gt;&lt;%= @article.body %&gt;&lt;/p&gt;

&lt;ul&gt;
    &lt;li&gt;&lt;%= link_to "Düzenle", edit_article_path(@article) %&gt;&lt;/li&gt;
    &lt;li&gt;&lt;%= link_to "Sil", article_path(@article), data: {
        turbo_method: :delete,
        turbo_confirm: "Emin misin?"
    } %&gt;&lt;/li&gt;
&lt;ul&gt;

&lt;h2&gt;Yorumlar&lt;/h2&gt;
&lt;%= render @article.comments %&gt;

&lt;h2&gt;Bir yorum ekleyin:&lt;/h2&gt;
&lt;%= render "comments/form" %&gt;
'>Copy</button>
</div>
<p>İkinci render metodu basit bir parametre ile sadece parça görsel dosyasını
tarif ediyor. Rails <code>comments/form</code> diye tarif edilen bir görsel şablondan 
bahsedilince bunun <code>app/views/comments</code> klasöründeki <code>_form.html.erb</code> parça 
görseli olduğunu anlayacak kadar zeki.</p><p><code>@article</code> nesnesine tüm görsellerde erişebiliriz çünkü bir oluşum değişkeni.</p><h4 id="concern-kodlarını-kullanmak"><a class="anchorlink" href="#concern-kodlar%C4%B1n%C4%B1-kullanmak">9.3 Concern Kodlarını Kullanmak</a></h4><p>Concern kodları büyük kontrolör ya da modelleri kolay yönetilebilir ve anlaşılabilir 
hale getirmek için kullanılan kod dosyalarıdır. Ayrıca birçok model ya da kontrolör 
tarafından ortak kullanılabilecek kodları yazmak için de kullanılır. Concern kodları 
metodlar içeren modüller şeklinde tanımlanır ve bir model ya da kontrolör sorumluluğundaki 
görevleri kolaylaştırmak için yazılır. Diğer dillerde modüller mixin olarak adlandırılır.</p><p>Kontrolörünüz ya da modeliniz içinde concern dosyalarını herhengi bir modül gibi 
kullanabilirsiniz. <code>rails new blog</code> ile uygulamanızı ilk ürettiğinizde <code>app/</code> klasörü 
altında diğerlerinden ayrı iki klasör üretildi:</p><div class="code_container">
<pre><code class="highlight plaintext">app/controllers/concerns
app/models/concerns
</code></pre>
<button class="clipboard-button" data-clipboard-text="app/controllers/concerns
app/models/concerns
">Copy</button>
</div>
<p>Aşağıdaki örnekte bloğumuza concern kodları kullanmasını görmek için yeni özellikler 
ekleyeceğiz. Sonra concern kodları kullanarak kodumuzu daha basit , anlaşılabilir ve 
yönetilebilir şekilde tekrar düzenleyeceğiz.</p><p>Bir makale farlı durum değerlerine sahip olabilir - örneğin herkes tarafından okunabilen 
makaleler için durumuna <code>public</code> diyebiliriz, sadece yazarının okuyabileceği makalelerin 
durumuna <code>private</code> diyebiliriz. Ayrıca eski ve görünmesini istemediğimiz makaleleri 
silmeden görünmez yapmak için durumuna <code>archived</code> diyebiliriz. Aynı şeyleri yorumlar 
için de düşünebiliriz. Bunun için modele <code>status</code> adında bir sütun daha eklemeliyiz.  </p><p>Öncelikle <code>status</code> sütununu <code>Articles</code> ve <code>Comments</code> tablolarına eklemek için şu migrasyon 
komutlarını verelim:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>generate migration AddStatusToArticles status:string
<span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>generate migration AddStatusToComments status:string
</code></pre>
<button class="clipboard-button" data-clipboard-text="bin/rails generate migration AddStatusToArticles status:string
bin/rails generate migration AddStatusToComments status:string
">Copy</button>
</div>
<p>Ve sonra veritabanını üretilen bu migrasyon dosyaları ile güncel haline getirelim:</p><div class="code_container">
<pre><code class="highlight console"><span class="gp">$</span><span class="w"> </span><span class="nb">bin/rails </span>db:migrate
</code></pre>
<button class="clipboard-button" data-clipboard-text="bin/rails db:migrate
">Copy</button>
</div>
<p>Mevcut makale ve yorum kayıtlarında default olarak bir değer vermek istersek migrasyon 
dosyalarında <code>default: "public"</code> opsiyonu ekleyerek migrasyon çalıştırılabilir. Ayrıca 
Rails konsol açıp <code>Article.update_all(status: "public")</code> ve <code>Comment.update_all(status: "public")</code> 
komutları girerek de mevcut kayıtların status sütunlarına değer verilebilir.</p><div class="info"><p>Migrasyonlar hakkında daha fazla bilgi için <a href="active_record_migrations.html">Active Record Migrasyonlar</a>.</p></div><p>Ayrıca strong parameter zorlamasında <code>:status</code> sütununu da eklemeliyiz, <code>app/controllers/articles_controller.rb</code> dosyasında:</p><div class="code_container">
<pre><code class="highlight ruby">  <span class="kp">private</span>
    <span class="k">def</span> <span class="nf">article_params</span>
      <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:article</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="ss">:body</span><span class="p">,</span> <span class="ss">:status</span><span class="p">)</span>
    <span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="  private
    def article_params
      params.require(:article).permit(:title, :body, :status)
    end
">Copy</button>
</div>
<p>ve <code>app/controllers/comments_controller.rb</code> dosyasında:</p><div class="code_container">
<pre><code class="highlight ruby">  <span class="kp">private</span>
    <span class="k">def</span> <span class="nf">comment_params</span>
      <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:comment</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:commenter</span><span class="p">,</span> <span class="ss">:body</span><span class="p">,</span> <span class="ss">:status</span><span class="p">)</span>
    <span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="  private
    def comment_params
      params.require(:comment).permit(:commenter, :body, :status)
    end
">Copy</button>
</div>
<p><code>bin/rails db:migrate</code> komutu ile <code>status</code> sütunu eklendikten sonra <code>article</code> modeline 
şunları eklemeliyiz:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Article</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">has_many</span> <span class="ss">:comments</span>

  <span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span>
  <span class="n">validates</span> <span class="ss">:body</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">length: </span><span class="p">{</span> <span class="ss">minimum: </span><span class="mi">10</span> <span class="p">}</span>

  <span class="no">VALID_STATUSES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'public'</span><span class="p">,</span> <span class="s1">'private'</span><span class="p">,</span> <span class="s1">'archived'</span><span class="p">]</span>

  <span class="n">validates</span> <span class="ss">:status</span><span class="p">,</span> <span class="ss">inclusion: </span><span class="p">{</span> <span class="ss">in: </span><span class="no">VALID_STATUSES</span> <span class="p">}</span>

  <span class="k">def</span> <span class="nf">archived?</span>
    <span class="n">status</span> <span class="o">==</span> <span class="s1">'archived'</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class Article &lt; ApplicationRecord
  has_many :comments

  validates :title, presence: true
  validates :body, presence: true, length: { minimum: 10 }

  VALID_STATUSES = ['public', 'private', 'archived']

  validates :status, inclusion: { in: VALID_STATUSES }

  def archived?
    status == 'archived'
  end
end
">Copy</button>
</div>
<p>ve <code>Comment</code> modeli de:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Comment</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">belongs_to</span> <span class="ss">:article</span>

  <span class="no">VALID_STATUSES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'public'</span><span class="p">,</span> <span class="s1">'private'</span><span class="p">,</span> <span class="s1">'archived'</span><span class="p">]</span>

  <span class="n">validates</span> <span class="ss">:status</span><span class="p">,</span> <span class="ss">inclusion: </span><span class="p">{</span> <span class="ss">in: </span><span class="no">VALID_STATUSES</span> <span class="p">}</span>

  <span class="k">def</span> <span class="nf">archived?</span>
    <span class="n">status</span> <span class="o">==</span> <span class="s1">'archived'</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class Comment &lt; ApplicationRecord
  belongs_to :article

  VALID_STATUSES = ['public', 'private', 'archived']

  validates :status, inclusion: { in: VALID_STATUSES }

  def archived?
    status == 'archived'
  end
end
">Copy</button>
</div>
<p>Sonra <code>index</code> aksiyonu görsel şablonumuzda (<code>app/views/articles/index.html.erb</code>) <code>archived?</code> 
metodunu arşivlenmiş makalelerin gösterilmesini engellemek için kullanabiliriz:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span>Makaleler<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
    <span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">unless</span> <span class="n">article</span><span class="p">.</span><span class="nf">archived?</span> <span class="cp">%&gt;</span>
            <span class="nt">&lt;li&gt;</span>
                <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">article</span><span class="p">.</span><span class="nf">title</span><span class="p">,</span> <span class="n">article</span> <span class="cp">%&gt;</span>
            <span class="nt">&lt;/li&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Yeni Makale"</span><span class="p">,</span> <span class="n">new_article_path</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;h1&gt;Makaleler&lt;/h1&gt;

&lt;ul&gt;
    &lt;% @articles.each do |article| %&gt;
        &lt;% unless article.archived? %&gt;
            &lt;li&gt;
                &lt;%= link_to article.title, article %&gt;
            &lt;/li&gt;
        &lt;% end %&gt;
    &lt;% end %&gt;
&lt;/ul&gt;

&lt;%= link_to "Yeni Makale", new_article_path %&gt;
'>Copy</button>
</div>
<p>Aynı şekilde yorumlar için parça görselimizde de (<code>app/views/comments/_comment.html.erb</code>) 
<code>archived?</code> metodunu arşivlenmiş yorumların gösterilmesini engellemek için kullanabiliriz </p><div class="code_container">
<pre><code class="highlight erb"><span class="cp">&lt;%</span> <span class="k">unless</span> <span class="n">comment</span><span class="p">.</span><span class="nf">archived?</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;strong&gt;</span>Yorumcu : <span class="nt">&lt;/strong&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">comment</span><span class="p">.</span><span class="nf">commenter</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;strong&gt;</span>Yorum : <span class="nt">&lt;/strong&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">comment</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>  
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="&lt;% unless comment.archived? %&gt;
  &lt;p&gt;
    &lt;strong&gt;Yorumcu : &lt;/strong&gt;
    &lt;%= comment.commenter %&gt;
  &lt;/p&gt;

  &lt;p&gt;
    &lt;strong&gt;Yorum : &lt;/strong&gt;
    &lt;%= comment.body %&gt;
  &lt;/p&gt;  
&lt;% end %&gt;
">Copy</button>
</div>
<p>Bununla birlikte, eğer modellerimize bakarsak aynı kodların tekrarlandığını görürüz. Eğer 
ileride mesela bloğumuza kullanıcılar arası özel mesajlaşmalar da eklemeyi düşünürsek 
orada bir daha aynı kodları yazacağız. Bu noktada concern kod dosyaları faydalı oluyor.</p><p>Bir concern kodu yalnızca bir modelin sorumluluk alanı içinde olan bir alt sorumluluk için 
kullanılır; bizim tekrarlanan kodlarımız modelin görselde görünebilirliği ile alakalı olduğu 
için concern modülümüze <code>Visible</code> adı verelim. <code>app/models/concerns</code> klasörüne <code>visible.rb</code> 
adında bir dosya ekleyelim ve içine tüm modellerde kullanılan status sütunu üzerine metodları 
koyalım.</p><p><code>app/models/concerns/visible.rb</code></p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">module</span> <span class="nn">Visible</span>
  <span class="k">def</span> <span class="nf">archived?</span>
    <span class="n">status</span> <span class="o">==</span> <span class="s1">'archived'</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="module Visible
  def archived?
    status == 'archived'
  end
end
">Copy</button>
</div>
<p>status sütunu için yapılan doğrulamayı da concern kodumuza dahil edebiliriz ama doğrulamalar 
class seviyesinde çağrılan metodlar olduğu için biraz daha karışık olacak. <code>ActiveSupport::Concern</code> (<a href="https://edgeapi.rubyonrails.org/classes/ActiveSupport/Concern.html">API Guide</a>) bize bu metodları 
<code>include</code> etmek için kolay bir yol veriyor:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">module</span> <span class="nn">Visible</span>
  <span class="kp">extend</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">Concern</span>

  <span class="no">VALID_STATUSES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'public'</span><span class="p">,</span> <span class="s1">'private'</span><span class="p">,</span> <span class="s1">'archived'</span><span class="p">]</span>

  <span class="n">included</span> <span class="k">do</span>
    <span class="n">validates</span> <span class="ss">:status</span><span class="p">,</span> <span class="ss">inclusion: </span><span class="p">{</span> <span class="ss">in: </span><span class="no">VALID_STATUSES</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">archived?</span>
    <span class="n">status</span> <span class="o">==</span> <span class="s1">'archived'</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="module Visible
  extend ActiveSupport::Concern

  VALID_STATUSES = ['public', 'private', 'archived']

  included do
    validates :status, inclusion: { in: VALID_STATUSES }
  end

  def archived?
    status == 'archived'
  end
end
">Copy</button>
</div>
<p>Şimdi tekrarlanan kodları modellerden çıkarıp yeni <code>Visible</code> modülümüzü koda dahil edebiliriz:</p><p><code>app/models/article.rb</code> dosyasında:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Article</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="kp">include</span> <span class="no">Visible</span>

  <span class="n">has_many</span> <span class="ss">:comments</span>

  <span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span>
  <span class="n">validates</span> <span class="ss">:body</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">length: </span><span class="p">{</span> <span class="ss">minimum: </span><span class="mi">10</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class Article &lt; ApplicationRecord
  include Visible

  has_many :comments

  validates :title, presence: true
  validates :body, presence: true, length: { minimum: 10 }
end
">Copy</button>
</div>
<p>ve <code>app/models/comment.rb</code> dosyasında:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Comment</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="kp">include</span> <span class="no">Visible</span>

  <span class="n">belongs_to</span> <span class="ss">:article</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class Comment &lt; ApplicationRecord
  include Visible

  belongs_to :article
end
">Copy</button>
</div>
<p>Class metodlarını da concern kodumuza ekleyebiliriz. Ana sayfamızda toplam public durumda 
olan makale sayımızı ve yorum sayımızı göstermek istersek, <code>public_count</code> adında bir class 
metodunu Visible modülümüz içinde tanımlayabiliriz:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">module</span> <span class="nn">Visible</span>
  <span class="kp">extend</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">Concern</span>

  <span class="no">VALID_STATUSES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'public'</span><span class="p">,</span> <span class="s1">'private'</span><span class="p">,</span> <span class="s1">'archived'</span><span class="p">]</span>

  <span class="n">included</span> <span class="k">do</span>
    <span class="n">validates</span> <span class="ss">:status</span><span class="p">,</span> <span class="ss">inclusion: </span><span class="p">{</span> <span class="ss">in: </span><span class="no">VALID_STATUSES</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">class_methods</span> <span class="k">do</span>
    <span class="k">def</span> <span class="nf">public_count</span>
      <span class="n">where</span><span class="p">(</span><span class="ss">status: </span><span class="s1">'public'</span><span class="p">).</span><span class="nf">count</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">archived?</span>
    <span class="n">status</span> <span class="o">==</span> <span class="s1">'archived'</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="module Visible
  extend ActiveSupport::Concern

  VALID_STATUSES = ['public', 'private', 'archived']

  included do
    validates :status, inclusion: { in: VALID_STATUSES }
  end

  class_methods do
    def public_count
      where(status: 'public').count
    end
  end

  def archived?
    status == 'archived'
  end
end
">Copy</button>
</div>
<p>Sonra da görselde herhangi bir class metodu gibi çağırabilirsiniz:</p><div class="code_container">
<pre><code class="highlight erb"><span class="nt">&lt;h1&gt;</span>Makaleler<span class="nt">&lt;/h1&gt;</span>

Bloğumuzda <span class="cp">&lt;%=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">public_count</span> <span class="cp">%&gt;</span> tane makale mevcuttur.
<span class="nt">&lt;ul&gt;</span>
    <span class="cp">&lt;%</span> <span class="vi">@articles</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">article</span><span class="o">|</span> <span class="cp">%&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">unless</span> <span class="n">article</span><span class="p">.</span><span class="nf">archived?</span> <span class="cp">%&gt;</span>
            <span class="nt">&lt;li&gt;</span>
                <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">article</span><span class="p">.</span><span class="nf">title</span><span class="p">,</span> <span class="n">article</span> <span class="cp">%&gt;</span>
            <span class="nt">&lt;/li&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Yeni Makale"</span><span class="p">,</span> <span class="n">new_article_path</span> <span class="cp">%&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='&lt;h1&gt;Makaleler&lt;/h1&gt;

Bloğumuzda &lt;%= Article.public_count %&gt; tane makale mevcuttur.
&lt;ul&gt;
    &lt;% @articles.each do |article| %&gt;
        &lt;% unless article.archived? %&gt;
            &lt;li&gt;
                &lt;%= link_to article.title, article %&gt;
            &lt;/li&gt;
        &lt;% end %&gt;
    &lt;% end %&gt;
&lt;/ul&gt;

&lt;%= link_to "Yeni Makale", new_article_path %&gt;
'>Copy</button>
</div>
<p>Toparlamak için formlara yeni kayıt eklenirken status değeri girmesi için seçenek eklemeliyiz. 
Default değeri <code>public</code> olarak verebiliriz. <code>app/views/articles/_form.html.erb</code> parça görseline 
şunları ekleyelim:</p><div class="code_container">
<pre><code class="highlight erb">    <span class="nt">&lt;div&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:status</span><span class="p">,</span> <span class="s2">"Durumu :"</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">select</span> <span class="ss">:status</span><span class="p">,</span> <span class="p">[</span><span class="s2">"public"</span><span class="p">,</span> <span class="s2">"private"</span><span class="p">,</span> <span class="s2">"archived"</span><span class="p">],</span> <span class="ss">selected: </span><span class="s2">"public"</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='    &lt;div&gt;
        &lt;%= form.label :status, "Durumu :" %&gt;&lt;br&gt;
        &lt;%= form.select :status, ["public", "private", "archived"], selected: "public" %&gt;
    &lt;/div&gt;
'>Copy</button>
</div>
<p>ve <code>app/views/comments/_form.html.erb</code> parça görselinde:</p><div class="code_container">
<pre><code class="highlight erb">  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:status</span><span class="p">,</span> <span class="s2">"Durumu :"</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">select</span> <span class="ss">:status</span><span class="p">,</span> <span class="p">[</span><span class="s2">"public"</span><span class="p">,</span> <span class="s2">"private"</span><span class="p">,</span> <span class="s2">"archived"</span><span class="p">],</span> <span class="ss">selected: </span><span class="s2">"public"</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='  &lt;p&gt;
    &lt;%= form.label :status, "Durumu :" %&gt;&lt;br&gt;
    &lt;%= form.select :status, ["public", "private", "archived"], selected: "public" %&gt;
  &lt;/p&gt;
'>Copy</button>
</div>
<h3 id="yorum-silmek"><a class="anchorlink" href="#yorum-silmek">10 Yorum Silmek</a></h3><p>Bloğumuzun önemli işlevlerinden biri de spam yorumları silmek. Bunu yapmak için 
<code>CommentsController</code> kontrolörüne <code>destroy</code> aksiyonu eklememiz gerekiyor.</p><p>Önce <code>app/views/comments/_comment.html.erb</code> parça görselinde yorumun silinmesi 
için link ekleyelim:</p><div class="code_container">
<pre><code class="highlight erb">  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;strong&gt;</span>Yorumcu : <span class="nt">&lt;/strong&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">comment</span><span class="p">.</span><span class="nf">commenter</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="nt">&lt;p&gt;</span>
    <span class="nt">&lt;strong&gt;</span>Yorum : <span class="nt">&lt;/strong&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">comment</span><span class="p">.</span><span class="nf">body</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>  

  <span class="nt">&lt;p&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Yorumu Sil"</span><span class="p">,</span> <span class="p">[</span><span class="n">comment</span><span class="p">.</span><span class="nf">article</span><span class="p">,</span> <span class="n">comment</span><span class="p">],</span> <span class="ss">data: </span><span class="p">{</span>
        <span class="ss">turbo_method: :delete</span><span class="p">,</span>
        <span class="ss">turbo_confirm: </span><span class="s2">"Emin misin?"</span>
    <span class="p">}</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='  &lt;p&gt;
    &lt;strong&gt;Yorumcu : &lt;/strong&gt;
    &lt;%= comment.commenter %&gt;
  &lt;/p&gt;

  &lt;p&gt;
    &lt;strong&gt;Yorum : &lt;/strong&gt;
    &lt;%= comment.body %&gt;
  &lt;/p&gt;  

  &lt;p&gt;
    &lt;%= link_to "Yorumu Sil", [comment.article, comment], data: {
        turbo_method: :delete,
        turbo_confirm: "Emin misin?"
    } %&gt;
  &lt;/p&gt;
'>Copy</button>
</div>
<p>Bu yeni "Yorumu Sil" linkine tıklamak <code>CommentsController</code> kontrolöründe 
<code>DELETE /articles/:article_id/comments/:id</code> isteği yapacaktır. Gerçekleşmesi için 
<code>app/controllers/comments_controller.rb</code> kontrolörümüze <code>destroy</code> aksiyonu 
eklemeliyiz:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">CommentsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:article_id</span><span class="p">])</span>
    <span class="vi">@comment</span> <span class="o">=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">comment_params</span><span class="p">)</span>
    <span class="n">redirect_to</span> <span class="n">article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">destroy</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:article_id</span><span class="p">])</span>
    <span class="vi">@comment</span> <span class="o">=</span> <span class="vi">@article</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="vi">@comment</span><span class="p">.</span><span class="nf">destroy</span>
    <span class="n">redirect_to</span> <span class="n">article_path</span><span class="p">(</span><span class="vi">@article</span><span class="p">),</span> <span class="ss">status: </span><span class="mi">303</span>
  <span class="k">end</span>

  <span class="kp">private</span>
    <span class="k">def</span> <span class="nf">comment_params</span>
      <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:comment</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:commenter</span><span class="p">,</span> <span class="ss">:body</span><span class="p">,</span> <span class="ss">:status</span><span class="p">)</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class CommentsController &lt; ApplicationController
  def create
    @article = Article.find(params[:article_id])
    @comment = @article.comments.create(comment_params)
    redirect_to article_path(@article)
  end

  def destroy
    @article = Article.find(params[:article_id])
    @comment = @article.comments.find(params[:id])
    @comment.destroy
    redirect_to article_path(@article), status: 303
  end

  private
    def comment_params
      params.require(:comment).permit(:commenter, :body, :status)
    end
end
">Copy</button>
</div>
<p><code>destroy</code> aksiyonu şu anda bakılan makaleyi bulur,  <code>@article.comments</code> kolleksiyonu 
içinde yorumu bulur ve onu veritabanından silerek tekrar makalenin show aksiyonu 
görseline tarayıcıyı yönlendirir.</p><h4 id="i̇lişkilendirilmiş-nesneleri-silmek"><a class="anchorlink" href="#i%CC%87li%C5%9Fkilendirilmi%C5%9F-nesneleri-silmek">10.1 İlişkilendirilmiş Nesneleri Silmek</a></h4><p>Bir makaleyi siliyorsanız ona yapılan yorumları da silmeniz doğru olacaktır, çünkü 
veritabanında boşu boşuna yer kaplıyorlar. Rails <code>dependent</code> opsiyonu ile bunu 
yapmanıza olanak sağlar. Article modelini (<code>app/models/article.rb</code>) şöyle 
düzenleyin:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">Article</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="kp">include</span> <span class="no">Visible</span>

  <span class="n">has_many</span> <span class="ss">:comments</span><span class="p">,</span> <span class="ss">dependent: :destroy</span>

  <span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span>
  <span class="n">validates</span> <span class="ss">:body</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">length: </span><span class="p">{</span> <span class="ss">minimum: </span><span class="mi">10</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text="class Article &lt; ApplicationRecord
  include Visible

  has_many :comments, dependent: :destroy

  validates :title, presence: true
  validates :body, presence: true, length: { minimum: 10 }
end
">Copy</button>
</div>
<h3 id="güvenlik"><a class="anchorlink" href="#g%C3%BCvenlik">11 Güvenlik</a></h3><h4 id="basit-yetkilendirme"><a class="anchorlink" href="#basit-yetkilendirme">11.1 Basit Yetkilendirme</a></h4><p>Bloğunuzu online kullanıma açmış olsanız herkes makale ya da yorum yazabilir, 
değiştirebilir veya silebilir. </p><p>Rails bu durumlar için güzel çalışan bir HTTP yetkilendirme sistemi sunar.</p><p><code>ArticlesController</code> kontrolöründe eğer kullanıcı yetkiye sahip değilse çeşitli 
aksiyonlara erişimini engellememiz gerekiyor. Burada Rails 
<code>http_basic_authenticate_with</code> metodu kullanabiliriz, böylece eğer izin verilmişse 
aksiyona erişebilmesini sağlarız.</p><p>Yetkilendirme sistemini kullanmak için, <code>app/controllers/articles_controller.rb</code> 
kontrolörü dosyasında <code>ArticlesController</code> class tanımının en başında bunu 
belirtmeliyiz. Bizim konumuzda <code>index</code> ve <code>show</code> aksiyonları dışında yetkilendirme 
istiyoruz. Bunu şöyle yazarız:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">ArticlesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="n">http_basic_authenticate_with</span> <span class="ss">name: </span><span class="s2">"dhh"</span><span class="p">,</span> <span class="ss">password: </span><span class="s2">"secret"</span><span class="p">,</span> <span class="ss">except: </span><span class="p">[</span><span class="ss">:index</span><span class="p">,</span> <span class="ss">:show</span><span class="p">]</span>

  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@articles</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">all</span>
  <span class="k">end</span>

  <span class="c1"># kısaltmak için kesildi</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='class ArticlesController &lt; ApplicationController

  http_basic_authenticate_with name: "dhh", password: "secret", except: [:index, :show]

  def index
    @articles = Article.all
  end

  # kısaltmak için kesildi
'>Copy</button>
</div>
<p>Ayrıca yorumları da sadece yetkili kullanıcılar silsin istiyoruz, öyleyse 
<code>CommentsController</code> kontrolörü (<code>app/controllers/comments_controller.rb</code>) içinde 
şunu yazarız:</p><div class="code_container">
<pre><code class="highlight ruby"><span class="k">class</span> <span class="nc">CommentsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="n">http_basic_authenticate_with</span> <span class="ss">name: </span><span class="s2">"dhh"</span><span class="p">,</span> <span class="ss">password: </span><span class="s2">"secret"</span><span class="p">,</span> <span class="ss">only: :destroy</span>

  <span class="k">def</span> <span class="nf">create</span>
    <span class="vi">@article</span> <span class="o">=</span> <span class="no">Article</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:article_id</span><span class="p">])</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>

  <span class="c1"># kısaltmak için kesildi</span>
</code></pre>
<button class="clipboard-button" data-clipboard-text='class CommentsController &lt; ApplicationController

  http_basic_authenticate_with name: "dhh", password: "secret", only: :destroy

  def create
    @article = Article.find(params[:article_id])
    # ...
  end

  # kısaltmak için kesildi
'>Copy</button>
</div>
<p>Şimdi yeni makale eklemek isterseniz, basit HTTP yetkilendirme penceresi açılır:</p><p><img src="images/getting_started/challenge.png" alt="Basic HTTP Authentication Challenge"></p><p>Doğru kullanıcı adı ve şifreyi girdikten sonra başka şifre istenene kadar ya da 
tarayıcı kapatılıp açılana kadar yetkili kullanıcı olursunuz.</p><p>Rails uygulamaları için başka yetkilendirme şekilleri de var. İki popüler olan 
yetkilendirme Rails eklentisi <a href="https://github.com/plataformatec/devise">Devise</a> 
Rails engine ve <a href="https://github.com/binarylogic/authlogic">Authlogic</a> gem 
diğer bir çoğundan ayrılıyor.</p><h4 id="diğer-güvenlik-hususları"><a class="anchorlink" href="#di%C4%9Fer-g%C3%BCvenlik-hususlar%C4%B1">11.2 Diğer Güvenlik Hususları</a></h4><p>Güvenlik, özellikle web uygulamalarında, geniş ve detaylı bir alan. Rails uygulamalarınızda 
güvenlik için ayrıntılı bilgi için <a href="security.html">Ruby on Rails Güvenlik Klavuzu</a>.</p><h3 id="sırada-ne-var-questionmark"><a class="anchorlink" href="#s%C4%B1rada-ne-var-questionmark">12 Sırada Ne Var?</a></h3><p>Şimdiye kadar ilk Rails uygulamanızı gördünüz, istediğiniz şekilde değiştirmek 
ve güncellemek artık sizin elinizde.</p><p>Unutmayın yardımsız herşeyi yapmak zorunda değilsiniz. Yardıma ihtiyacınız 
olduğunda aşağıdaki destek kaynaklarına başvurmaktan çekinmeyin:</p>
<ul>
<li><a href="index.html">Ruby on Rails Klavuzları</a></li>
<li><a href="https://discuss.rubyonrails.org/c/rubyonrails-talk">Ruby on Rails mailing list</a></li>
</ul>
<h3 id="configuration-gotchas"><a class="anchorlink" href="#configuration-gotchas">13 Configuration Gotchas</a></h3><p>The easiest way to work with Rails is to store all external data as UTF-8. If
you don't, Ruby libraries and Rails will often be able to convert your native
data into UTF-8, but this doesn't always work reliably, so you're better off
ensuring that all external data is UTF-8.</p><p>If you have made a mistake in this area, the most common symptom is a black
diamond with a question mark inside appearing in the browser. Another common
symptom is characters like "Ã¼" appearing instead of "ü". Rails takes a number
of internal steps to mitigate common causes of these problems that can be
automatically detected and corrected. However, if you have external data that is
not stored as UTF-8, it can occasionally result in these kinds of issues that
cannot be automatically detected by Rails and corrected.</p><p>Two very common sources of data that are not UTF-8:</p>
<ul>
<li>Your text editor: Most text editors (such as TextMate), default to saving
files as UTF-8. If your text editor does not, this can result in special
characters that you enter in your templates (such as é) to appear as a diamond
with a question mark inside in the browser. This also applies to your i18n
translation files. Most editors that do not already default to UTF-8 (such as
some versions of Dreamweaver) offer a way to change the default to UTF-8. Do
so.</li>
<li>Your database: Rails defaults to converting data from your database into UTF-8
at the boundary. However, if your database is not using UTF-8 internally, it
may not be able to store all characters that your users enter. For instance,
if your database is using Latin-1 internally, and your user enters a Russian,
Hebrew, or Japanese character, the data will be lost forever once it enters
the database. If possible, use UTF-8 as the internal storage of your database.</li>
</ul>


        <h3>Feedback</h3>
        <p>
          You're encouraged to help improve the quality of this guide.
        </p>
        <p>
          Please contribute if you see any typos or factual errors.
          To get started, you can read our <a href="https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation">documentation contributions</a> section.
        </p>
        <p>
          You may also find incomplete content or stuff that is not up to date.
          Please do add any missing documentation for main. Make sure to check
          <a href="https://edgeguides.rubyonrails.org">Edge Guides</a> first to verify
          if the issues are already fixed or not on the main branch.
          Check the <a href="ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</a>
          for style and conventions.
        </p>
        <p>
          If for whatever reason you spot something to fix but cannot patch it yourself, please
          <a href="https://github.com/rails/rails/issues">open an issue</a>.
        </p>
        <p>And last but not least, any kind of discussion regarding Ruby on Rails
          documentation is very welcome on the <a href="https://discuss.rubyonrails.org/c/rubyonrails-docs">rubyonrails-docs mailing list</a>.
        </p>
      </div>
    </div>
  </div>

  <hr class="hide" />
  <div id="footer">
    <div class="wrapper">
      <p>This work is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a> License</p>
<p>"Rails", "Ruby on Rails", and the Rails logo are trademarks of David Heinemeier Hansson. All rights reserved.</p>

    </div>
  </div>
</body>
</html>
