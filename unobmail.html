<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
  
  <meta content="text/html; charset=UTF-8" http-equiv="content-type">
  <title>Unobtrusive Mail Link</title>

  
  
  <style type="text/css">
body {
  font-size: 120%;
  background-color: #eeeecc;
}
  
.CodeRay {
  background-color: #f8f8f8;
  border: 1px solid silver;
  font-family: 'Courier New', 'Terminal', monospace;
  color: #000;
}
.CodeRay pre { margin: 0px }

div.CodeRay { }

span.CodeRay { white-space: pre; border: 0px; padding: 2px }

table.CodeRay { border-collapse: collapse; width: 100%; padding: 2px }
table.CodeRay td { padding: 2px 4px; vertical-align: top }

.CodeRay .line_numbers, .CodeRay .no {
  background-color: #def;
  color: gray;
  text-align: right;
}
.CodeRay .line_numbers tt { font-weight: bold }
.CodeRay .line_numbers .highlighted { color: red }
.CodeRay .line { display: block; float: left; width: 100%; }
.CodeRay .no { padding: 0px 4px }
.CodeRay .code { width: 100% }

ol.CodeRay { font-size: 10pt }
ol.CodeRay li { white-space: pre }

.CodeRay .code pre { overflow: auto }

.CodeRay .debug { color:white ! important; background:blue ! important; }

.CodeRay .af { color:#00C }
.CodeRay .an { color:#007 }
.CodeRay .at { color:#f08 }
.CodeRay .av { color:#700 }
.CodeRay .aw { color:#C00 }
.CodeRay .bi { color:#509; font-weight:bold }
.CodeRay .c  { color:#888; }

.CodeRay .ch { color:#04D }
.CodeRay .ch .k { color:#04D }
.CodeRay .ch .dl { color:#039 }

.CodeRay .cl { color:#B06; font-weight:bold }
.CodeRay .cm { color:#A08; font-weight:bold }
.CodeRay .co { color:#036; font-weight:bold }
.CodeRay .cr { color:#0A0 }
.CodeRay .cv { color:#369 }
.CodeRay .de { color:#B0B; }
.CodeRay .df { color:#099; font-weight:bold }
.CodeRay .di { color:#088; font-weight:bold }
.CodeRay .dl { color:black }
.CodeRay .do { color:#970 }
.CodeRay .dt { color:#34b }
.CodeRay .ds { color:#D42; font-weight:bold }
.CodeRay .e  { color:#666; font-weight:bold }
.CodeRay .en { color:#800; font-weight:bold }
.CodeRay .er { color:#F00; background-color:#FAA }
.CodeRay .ex { color:#C00; font-weight:bold }
.CodeRay .fl { color:#60E; font-weight:bold }
.CodeRay .fu { color:#06B; font-weight:bold }
.CodeRay .gv { color:#d70; font-weight:bold }
.CodeRay .hx { color:#058; font-weight:bold }
.CodeRay .i  { color:#00D; font-weight:bold }
.CodeRay .ic { color:#B44; font-weight:bold }

.CodeRay .il { background: #ddd; color: black }
.CodeRay .il .il { background: #ccc }
.CodeRay .il .il .il { background: #bbb }
.CodeRay .il .idl { background: #ddd; font-weight: bold; color: #666 }
.CodeRay .idl { background-color: #bbb; font-weight: bold; color: #666; }

.CodeRay .im { color:#f00; }
.CodeRay .in { color:#B2B; font-weight:bold }
.CodeRay .iv { color:#33B }
.CodeRay .la { color:#970; font-weight:bold }
.CodeRay .lv { color:#963 }
.CodeRay .oc { color:#40E; font-weight:bold }
.CodeRay .of { color:#000; font-weight:bold }
.CodeRay .op { }
.CodeRay .pc { color:#038; font-weight:bold }
.CodeRay .pd { color:#369; font-weight:bold }
.CodeRay .pp { color:#579; }
.CodeRay .ps { color:#00C; font-weight:bold }
.CodeRay .pt { color:#074; font-weight:bold }
.CodeRay .r, .kw  { color:#080; font-weight:bold }

.CodeRay .ke { color: #808; }
.CodeRay .ke .dl { color: #606; }
.CodeRay .ke .ch { color: #80f; }
.CodeRay .vl { color: #088; }

.CodeRay .rx { background-color:#fff0ff }
.CodeRay .rx .k { color:#808 }
.CodeRay .rx .dl { color:#404 }
.CodeRay .rx .mod { color:#C2C }
.CodeRay .rx .fu  { color:#404; font-weight: bold }

.CodeRay .s { background-color:#fff0f0; color: #D20; }
.CodeRay .s .s { background-color:#ffe0e0 }
.CodeRay .s .s  .s { background-color:#ffd0d0 }
.CodeRay .s .k { }
.CodeRay .s .ch { color: #b0b; }
.CodeRay .s .dl { color: #710; }

.CodeRay .sh { background-color:#f0fff0; color:#2B2 }
.CodeRay .sh .k { }
.CodeRay .sh .dl { color:#161 }

.CodeRay .sy { color:#A60 }
.CodeRay .sy .k { color:#A60 }
.CodeRay .sy .dl { color:#630 }

.CodeRay .ta { color:#070 }
.CodeRay .tf { color:#070; font-weight:bold }
.CodeRay .ts { color:#D70; font-weight:bold }
.CodeRay .ty { color:#339; font-weight:bold }
.CodeRay .v  { color:#036 }
.CodeRay .xt { color:#444 }

.CodeRay .ins { background: #afa; }
.CodeRay .del { background: #faa; }
.CodeRay .chg { color: #aaf; background: #007; }
.CodeRay .head { color: #f8f; background: #505 }

.CodeRay .ins .ins { color: #080; font-weight:bold }
.CodeRay .del .del { color: #800; font-weight:bold }
.CodeRay .chg .chg { color: #66f; }
.CodeRay .head .head { color: #f4f; }

  </style>
</head><body>
<h1>Benim Unobtrusive Mail Linkim</h1>

Mail linklerinizde adreslerin kaynaktan otomatik okunmaması için ne
yaparsınız? Herkes başka bir şey yapar ama Rails kullanıyoruz ve moda
olmuşsa bu işe unobtrusive bir yol bulmak lazım. Ben kendimce şöyle bir
şey yaptım.<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">rails generate controller maillink ujk<tt>
</tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Daha sonra "app/controllers/maillink_controller.rb" dosyasını editörde
açıp şu hale getirdim.<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="r">class</span> <span class="cl">MaillinkController</span> &lt; <span class="co">ApplicationController</span><tt><br></tt>  <span class="r">def</span> <span class="fu">ujk</span><tt><br></tt>    respond_to <span class="r">do</span> |format|<tt><br></tt>      format.js  <span class="c"># app/views/maillink/ujk.js.erb</span><tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt><span class="r">end</span><tt>
</tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Bu sayede "/maillink/ujk" adresine çağrı yapılınca
"app/views/maillink/ujk.js.erb" dosyasındaki JavaScript kodu cevap
olarak döneceğiz. Şimdi "views/maillink" klasöründeki "ujk.html.erb"
dosyasının adını "ujk.js.erb" olarak değiştirip içine şunu yazdım. <br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">window.location = <span class="s"><span class="dl">"</span><span class="k">mailto:ujk7107@gmail.com</span><span class="dl">"</span></span><tt>
</tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Sıra geldi görsel sayfama linki eklemeye , uygulamamın
"views/home/index.html.erb" dosyasına şu linki ekledim.<br>

<br>

<table class="CodeRay">
<tbody><tr>
  <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }"><pre>1<tt><br></tt>2<tt>
</tt></pre></td>
  <td class="code"><pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">        &lt;%= link_to image_tag(<span class="s"><span class="dl">"</span><span class="k">mail.png</span><span class="dl">"</span></span>, :height =&gt; <span class="s"><span class="dl">"</span><span class="k">40</span><span class="dl">"</span></span>), <tt><br></tt>                <span class="s"><span class="dl">"</span><span class="k">/maillink/ujk</span><span class="dl">"</span></span>, :remote =&gt; <span class="pc">true</span>  %&gt;<tt>
</tt></pre></td>
</tr></tbody>
</table>


<br>

İşte bu kadar artık sayfa kaynağından mail adresi görülmez, tıklamak gerekli. <a href="http://kayaciklar.org">http://kayaciklar.org</a> adresinde sağ alttaki mail linki böyle yapıldı.<br>

<br>

</body></html>