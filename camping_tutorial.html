<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
  
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>Camping Tutorial</title>

  
  
  <style type="text/css"> .CodeRay {
background-color: #f8f8f8;
border: 1px solid silver;
font-family: 'Courier New', 'Terminal', monospace;
color: #000;
}
.CodeRay pre { margin: 0px }
div.CodeRay { }
span.CodeRay { white-space: pre; border: 0px; padding: 2px }
table.CodeRay { border-collapse: collapse; width: 100%; padding: 2px }
table.CodeRay td { padding: 2px 4px; vertical-align: top }
.CodeRay .line_numbers, .CodeRay .no {
background-color: #def;
color: gray;
text-align: right;
}
.CodeRay .line_numbers tt { font-weight: bold }
.CodeRay .line_numbers .highlighted { color: red }
.CodeRay .line { display: block; float: left; width: 100%; }
.CodeRay .no { padding: 0px 4px }
.CodeRay .code { width: 100% }
ol.CodeRay { font-size: 10pt }
ol.CodeRay li { white-space: pre }
.CodeRay .code pre { overflow: auto }
.CodeRay .debug { color:white ! important; background:blue ! important; }
.CodeRay .af { color:#00C }
.CodeRay .an { color:#007 }
.CodeRay .at { color:#f08 }
.CodeRay .av { color:#700 }
.CodeRay .aw { color:#C00 }
.CodeRay .bi { color:#509; font-weight:bold }
.CodeRay .c { color:#888; }
.CodeRay .ch { color:#04D }
.CodeRay .ch .k { color:#04D }
.CodeRay .ch .dl { color:#039 }
.CodeRay .cl { color:#B06; font-weight:bold }
.CodeRay .cm { color:#A08; font-weight:bold }
.CodeRay .co { color:#036; font-weight:bold }
.CodeRay .cr { color:#0A0 }
.CodeRay .cv { color:#369 }
.CodeRay .de { color:#B0B; }
.CodeRay .df { color:#099; font-weight:bold }
.CodeRay .di { color:#088; font-weight:bold }
.CodeRay .dl { color:black }
.CodeRay .do { color:#970 }
.CodeRay .dt { color:#34b }
.CodeRay .ds { color:#D42; font-weight:bold }
.CodeRay .e { color:#666; font-weight:bold }
.CodeRay .en { color:#800; font-weight:bold }
.CodeRay .er { color:#F00; background-color:#FAA }
.CodeRay .ex { color:#C00; font-weight:bold }
.CodeRay .fl { color:#60E; font-weight:bold }
.CodeRay .fu { color:#06B; font-weight:bold }
.CodeRay .gv { color:#d70; font-weight:bold }
.CodeRay .hx { color:#058; font-weight:bold }
.CodeRay .i { color:#00D; font-weight:bold }
.CodeRay .ic { color:#B44; font-weight:bold }
.CodeRay .il { background: #ddd; color: black }
.CodeRay .il .il { background: #ccc }
.CodeRay .il .il .il { background: #bbb }
.CodeRay .il .idl { background: #ddd; font-weight: bold; color: #666 }
.CodeRay .idl { background-color: #bbb; font-weight: bold; color: #666; }
.CodeRay .im { color:#f00; }
.CodeRay .in { color:#B2B; font-weight:bold }
.CodeRay .iv { color:#33B }
.CodeRay .la { color:#970; font-weight:bold }
.CodeRay .lv { color:#963 }
.CodeRay .oc { color:#40E; font-weight:bold }
.CodeRay .of { color:#000; font-weight:bold }
.CodeRay .op { }
.CodeRay .pc { color:#038; font-weight:bold }
.CodeRay .pd { color:#369; font-weight:bold }
.CodeRay .pp { color:#579; }
.CodeRay .ps { color:#00C; font-weight:bold }
.CodeRay .pt { color:#074; font-weight:bold }
.CodeRay .r, .kw { color:#080; font-weight:bold }
.CodeRay .ke { color: #808; }
.CodeRay .ke .dl { color: #606; }
.CodeRay .ke .ch { color: #80f; }
.CodeRay .vl { color: #088; }
.CodeRay .rx { background-color:#fff0ff }
.CodeRay .rx .k { color:#808 }
.CodeRay .rx .dl { color:#404 }
.CodeRay .rx .mod { color:#C2C }
.CodeRay .rx .fu { color:#404; font-weight: bold }
.CodeRay .s { background-color:#fff0f0; color: #D20; }
.CodeRay .s .s { background-color:#ffe0e0 }
.CodeRay .s .s .s { background-color:#ffd0d0 }
.CodeRay .s .k { }
.CodeRay .s .ch { color: #b0b; }
.CodeRay .s .dl { color: #710; }
.CodeRay .sh { background-color:#f0fff0; color:#2B2 }
.CodeRay .sh .k { }
.CodeRay .sh .dl { color:#161 }
.CodeRay .sy { color:#A60 }
.CodeRay .sy .k { color:#A60 }
.CodeRay .sy .dl { color:#630 }
.CodeRay .ta { color:#070 }
.CodeRay .tf { color:#070; font-weight:bold }
.CodeRay .ts { color:#D70; font-weight:bold }
.CodeRay .ty { color:#339; font-weight:bold }
.CodeRay .v { color:#036 }
.CodeRay .xt { color:#444 }
.CodeRay .ins { background: #afa; }
.CodeRay .del { background: #faa; }
.CodeRay .chg { color: #aaf; background: #007; }
.CodeRay .head { color: #f8f; background: #505 }
.CodeRay .ins .ins { color: #080; font-weight:bold }
.CodeRay .del .del { color: #800; font-weight:bold }
.CodeRay .chg .chg { color: #66f; }
.CodeRay .head .head { color: #f4f; }
  </style>
</head><body style="background-color: rgb(238, 238, 204); padding-top: 10px; padding-right: 10%; padding-left: 5%;">
<div style="border-style: groove; background-color: rgb(170, 0, 0); font-size: 45px; color: rgb(255, 204, 0); font-weight: bold; font-family: &quot;Times New Roman&quot;,Times,serif; text-align: center;">Camping
Tutorial</div>

<h2>Ba&#351;lang&#305;ç <br>
</h2>

Yeni bir text dosya aç&#305;n ve nuts.rb ad&#305;n&#305; verin. &#304;çin de &#351;unu yaz&#305;n:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="co">Camping</span>.goes <span class="sy">:Nuts</span><tt>
</tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Kaydedin , sonra komut sat&#305;r&#305;nda &#351;unu girin:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">$ camping nuts.rb<tt>
</tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

&#350;una benzer bir mesaj almal&#305;s&#305;n&#305;z:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">** Camping running on 0.0.0.0:3301<tt>
</tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Bunun anlam&#305;, Camping server &#351;imdi makinan&#305;z&#305;n 3301 portunda çal&#305;&#351;maya
ba&#351;lad&#305;. Taray&#305;c&#305;n&#305;z&#305; aç&#305;n ve <span style="font-weight: bold;">http://localhost:3301/</span>
adresine gidin. <br>

<br>

<img style="width: 416px; height: 159px;" alt="camping_1.png" src="camping_1.png"><br>

<br>

Burada bir hata yok. Camping server çal&#305;&#351;&#305;yor ama size ne gösterece&#287;ini
bilmiyor. Öyleyse kendisine ö&#287;retelim. <br>

<hr style="width: 100%; height: 2px;"><br>

<h2>Merhaba Saat</h2>

Peki, Camping kurulu ve çal&#305;&#351;&#305;yor. Çal&#305;&#351;&#305;r durumda tutun, Camping
server çal&#305;&#351;&#305;rken dosyalarda düzenleme
yapabilirsiniz,&nbsp;otomatik olarak yüklenecektir. Server'&#305;
durdurmak isterseniz Control-C bas&#305;n. <br>

Haydi bir&#351;eyler gösterelim, nuts.rb dosyas&#305; alt k&#305;sm&#305;na &#351;unu ekleyin :<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="co">Camping</span>.goes <span class="sy">:Nuts</span><tt><br></tt><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Controllers</span><tt><br></tt><span style="font-family: mon;"><span style="font-weight: bold;"> </span></span><span class="r"> class</span> <span class="cl">Index</span> &lt; <span class="co">R</span> <span class="s"><span class="dl">'</span><span class="k">/</span><span class="dl">'</span></span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span><tt><br></tt> <span class="co">     Time</span>.now.to_s<tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt><span class="r">end</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Dosyay&#305; saklay&#305;n ve taray&#305;c&#305; penceresini tazeleyin. Taray&#305;c&#305;n&#305;z zaman&#305;
gösterecektir, &#351;öyle bi&#351;ey :<br>

<br>

<img style="width: 374px; height: 188px;" alt="camping_2.png" src="camping_2.png"><br>

<br>

&nbsp;<br>

<hr style="width: 100%; height: 2px;"><br>

<h2>Görseli Düzenlemek</h2>

Camping
microframework kodumuzu MVC (Model-View-Controller) paternine uygun
parçalamam&#305;za olanak sa&#287;lar. Haydi Nuts uyuglamam&#305;za bir görsel
ekleyelim. <span style="font-weight: bold;">module
Nuts::Controllers</span>'i &#351;öyle
de&#287;i&#351;tirin:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt><br></tt><strong>10</strong><tt><br></tt>11<tt><br></tt>12<tt><br></tt>13<tt><br></tt>14<tt><br></tt>15<tt><br></tt>16<tt><br></tt>17<tt><br></tt>18<tt><br></tt>19<tt><br></tt><strong>20</strong><tt><br></tt>21<tt><br></tt>22<tt><br></tt>23<tt><br></tt>24<tt><br></tt>25<tt><br></tt>26<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="co">Camping</span>.goes <span class="sy">:Nuts</span><tt><br></tt><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Controllers</span><tt><br></tt> <span class="r"> class</span> <span class="cl">Index</span> &lt; <span class="co">R</span> <span class="s"><span class="dl">'</span><span class="k">/</span><span class="dl">'</span></span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span><tt><br></tt> <span class="iv">     @time</span> = <span class="co">Time</span>.now<tt><br></tt>      render <span class="sy">:sundial</span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt><span class="r">end</span><tt><br></tt><tt><br></tt><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Views</span><tt><br></tt> <span class="r"> def</span> <span class="fu">layout</span><tt><br></tt>    html <span class="r">do</span><tt><br></tt>      head <span class="r">do</span><tt><br></tt>        title { <span class="s"><span class="dl">"</span><span class="k">Nuts And GORP</span><span class="dl">"</span></span> }<tt><br></tt> <span class="r">     end</span><tt><br></tt>      body { <span class="pc">self</span> &lt;&lt; <span class="r">yield</span> }<tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt><tt><br></tt> <span class="r"> def</span> <span class="fu">sundial</span><tt><br></tt>    p <span class="s"><span class="dl">"</span><span class="k">The current time is: </span><span class="il"><span class="idl">#{</span><span class="iv">@time</span>.strftime(<span class="s"><span class="dl">'</span><span class="k">%H:%M:%S</span><span class="dl">'</span></span>)<span class="idl">}</span></span><span class="dl">"</span></span><tt><br></tt> <span class="r"> end</span><tt><br></tt><span class="r">end</span><tt>
</tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Dosyay&#305; kaydedip taray&#305;c&#305;n&#305;zda sayfay&#305; tazeleyin. &#350;öyle bir mesaj
ç&#305;kacakt&#305;r :<br>

<br>

<img style="width: 425px; height: 149px;" alt="camping_3.png" src="camping_3.png"><br>

<br>

Ve sayfam&#305;z&#305;n title bar&#305;nda &#351;imdi&nbsp;<span style="font-weight: bold;">Nuts
And GORP</span>
yaz&#305;yor.<br>

<br>

Burda gördü&#287;ünüz gibi kontrolörümüzden&nbsp;<span style="font-style: italic;">render :sundial</span>
komutunu veriyoruz. Bu aynen anla&#351;&#305;ld&#305;&#287;&#305; manaya geliyor, views
modulündeki&nbsp;<span style="font-style: italic;">sundial</span>
metodu ç&#305;kt&#305;s&#305;n&#305; yay&#305;nl&#305;yor. &nbsp;Ayr&#305;ca&nbsp;<span style="font-style: italic;">layout</span>
ad&#305;nda özel bir metod da ça&#287;&#305;rd&#305;k, ad&#305;ndan da anla&#351;&#305;ld&#305;&#287;&#305; gibi bu
sayfan&#305;n&nbsp; yerle&#351;im kal&#305;b&#305; oluyor ve markaby format&#305;nda bizim
sundial metod ç&#305;kt&#305;m&#305;z bunun içinde gösteriliyor. E&#287;er HTML ile ha&#351;&#305;r
ne&#351;irseniz görseldeki ifadelerin HTML tag isimlerine benzerli&#287;ini
farketmi&#351;sinizdir. Bu yap&#305; HTML'i Ruby kullanarak yazmay&#305; sa&#287;layan
Markaby yap&#305;s&#305;d&#305;r. Zaten Markaby gem yüklü olmadan Camping server
çal&#305;&#351;t&#305;r&#305;rsan&#305;z bu sayfay&#305; göstermeye kalkt&#305;&#287;&#305;n&#305;zda Markaby gem yüklü
olmad&#305;&#287;&#305;n&#305; belirten bir hata mesaj&#305; al&#305;rs&#305;n&#305;z, bu durumda
klasik&nbsp;<span style="font-weight: bold;">sudo gem
install markaby</span>
ile yüklemelisiniz! Ben denerken 1.9.2 versiyon Ruby'de hata mesaj&#305;
ald&#305;m. "undefined method to_s" &#351;eklinde bir takip sonras&#305;nda hatan&#305;n
ç&#305;kar&#305;ld&#305;&#287;&#305; <span style="font-style: italic;">markaby/builder.rb"
</span>dosyas&#305;n&#305;n
280 nolu sat&#305;r&#305;n&#305;n üzerinde Ruby versiyon sorgulamas&#305; vard&#305;. O
sorgulamaya göre versiyon 1.9.1 den büyükse hata mesaj&#305; veriyordu, o
sat&#305;r&#305; versiyon 1.9.5 ten büyükse hata ver deyip atlat&#305;nca sorun kalkt&#305;
ama sonra ba&#351;ka ne ç&#305;kar bilemem, <span style="font-weight: bold;">pans&#305;man
tedbir</span>. <br>

<br>

Gördü&#287;ünüz
gibi kontrolör üzerinden herhangibir &#351;eyi cevap olarak dönebilirsiniz
ve bu cevap taray&#305;c&#305;n&#305;za gönderilir. Fakat buna daha sonra dönelim ve
routing (yönlendirme) <br>

yap&#305;lar&#305;n&#305; inceleyelim.<br>

<br>

<h2>Yönlendirmeler</h2>

Büyük ihtimal önceki sayfadaki acayip&nbsp;<span style="font-weight: bold;">R '/'</span>
deyimini farkettiniz. Bu Ruby'nin bizim microframework'umuzda
kullan&#305;lan ve kontrolöre nas&#305;l eri&#351;ilece&#287;ini belirten yönlendirmelerin
standart d&#305;&#351;&#305; bir ifadesi. <br>

<br>

Bu yönlendirmeler çok güçlüdürler ama biz &#351;imdi en basitinden
ba&#351;layaca&#287;&#305;z.<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre style="">1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt><br></tt><strong>10</strong><tt><br></tt>11<tt><br></tt>12<tt><br></tt>13<tt><br></tt>14<tt><br></tt>15<tt><br></tt>16<tt><br></tt>17<tt><br></tt>18<tt><br></tt>19<tt><br></tt><strong>20</strong><tt><br></tt>21<tt><br></tt>22<tt><br></tt>23<tt><br></tt>24<tt><br></tt>25<tt><br></tt>26<tt><br></tt>27<tt><br></tt>28<tt><br></tt>29<tt><br></tt><strong></strong><strong></strong><strong></strong><tt><br></tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="co"></span><span class="r">module</span> <span class="cl">Nuts::Controllers</span><tt><br></tt> <span class="c"> # localhost:3301/welcome/yo/my/site adresi</span><tt><br></tt> <span class="r"> class</span> <span class="cl">Words</span> &lt; <span class="co">R</span> <span class="s"><span class="dl">'</span><span class="k">/welcome/to/my/site</span><span class="dl">'</span></span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span><tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">You got here by: /welcome/to/my/site</span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt> <tt><br></tt> <span class="c"> # localhost:3301/nuts/1 veya nuts/234 vs. say&#305; metoda parametre oluyor</span><tt><br></tt> <span class="r"> class</span> <span class="cl">Digits</span> &lt; <span class="co">R</span> <span class="s"><span class="dl">'</span><span class="k">/nuts/(</span><span class="k">\d</span><span class="k">+)</span><span class="dl">'</span></span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span>(number)<tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">You got here by: /nuts/</span><span class="il"><span class="idl">#{</span>number<span class="idl">}</span></span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt><tt><br></tt> <span class="c"> # slash ( / ) içermeyen her&#351;eyi seçmek</span><tt><br></tt> <span class="r"> class</span> <span class="cl">Segment</span> &lt; <span class="co">R</span> <span class="s"><span class="dl">'</span><span class="k">/gorp/([^/]+)</span><span class="dl">'</span></span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span>(everything_else_than_a_slash)<tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">You got here by: /gorp/</span><span class="il"><span class="idl">#{</span>everything_else_than_a_slash<span class="idl">}</span></span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt> <tt><br></tt> <span class="c"> # bir say&#305; arkas&#305;ndan her&#351;ey (localhost:3301/5/hasan gibi)</span><tt><br></tt> <span class="r"> class</span> <span class="cl">DigitsAndEverything</span> &lt; <span class="co">R</span> <span class="s"><span class="dl">'</span><span class="k">/nuts/(</span><span class="k">\d</span><span class="k">+)/([^/]+)</span><span class="dl">'</span></span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span>(number, everything)<tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">You got here by: /nuts/</span><span class="il"><span class="idl">#{</span>number<span class="idl">}</span></span><span class="k">/</span><span class="il"><span class="idl">#{</span>everything<span class="idl">}</span></span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt><span class="r">end</span><tt><br></tt><tt><br></tt><tt><br></tt><span class="r"></span><span class="r"></span><tt><br></tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Bunlar&#305; nuts.rb dosyas&#305;na ekleyin ve tüm kontrolörlere ula&#351;t&#305;&#287;&#305;n&#305;z&#305;
test edin.<br>

<br>

Ayr&#305;ca
dikkat ettiyseniz parantez içinde tan&#305;mlanan &#351;eyler metoda parametre
olarak aktar&#305;l&#305;yor ve istedi&#287;iniz gibi kullanabilirsiniz.<br>

<hr style="width: 100%; height: 2px;">
<h2>Basit (ama ak&#305;ll&#305;) Yönlendirmeler</h2>

Bir de &#351;unlar&#305; deneyin:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt><br></tt><strong>10</strong><tt><br></tt>11<tt><br></tt>12<tt><br></tt>13<tt><br></tt>14<tt><br></tt>15<tt><br></tt>16<tt><br></tt>17<tt><br></tt>18<tt><br></tt>19<tt><br></tt><strong>20</strong><tt><br></tt>21<tt><br></tt>22<tt><br></tt>23<tt><br></tt>24<tt><br></tt>25<tt><br></tt>26<tt><br></tt>27<tt><br></tt>28<tt><br></tt>29<tt><br></tt><strong>30</strong><tt><br></tt>31<tt><br></tt>32<tt><br></tt>33<tt><br></tt>34<tt><br></tt>35<strong></strong><strong></strong><strong></strong><strong></strong><strong></strong><tt><br></tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="er"></span><span class="er"></span><span class="co">Camping</span>.goes <span class="sy">:Nuts</span><tt><br></tt><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Controllers</span><tt><br></tt><tt><br></tt> <span class="r"> class</span> <span class="cl">Index</span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span><tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">Buraya '/' ile geldiniz.</span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt> <tt><br></tt> <span class="r"> class</span> <span class="cl">WelcomeToMyPage</span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span><tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">Buraya '/welcome/to/my/page' ile geldiniz.</span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt> <tt><br></tt> <span class="r"> class</span> <span class="cl">NutsN</span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span>(number)<tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">Buraya '/nuts/</span><span class="il"><span class="idl">#{</span>number<span class="idl">}</span></span><span class="k">' ile geldiniz.</span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt> <tt><br></tt> <span class="r"> class</span> <span class="cl">GorpX</span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span>(everything_else_than_a_slash)<tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">Buraya '/gorp/</span><span class="il"><span class="idl">#{</span>everything_else_than_a_slash<span class="idl">}</span></span><span class="k">' ile geldiniz.</span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt> <tt><br></tt> <span class="r"> class</span> <span class="cl">NutsNX</span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span>(number, everything)<tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">Buraya '/nuts/</span><span class="il"><span class="idl">#{</span>number<span class="idl">}</span></span><span class="k">/</span><span class="il"><span class="idl">#{</span>everything<span class="idl">}</span></span><span class="k">' ile geldiniz.</span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt><span class="r">end</span><tt><br></tt><tt><br></tt><tt><br></tt><span class="r"></span><span class="cl"></span><span class="r"></span><span class="fu"></span><span class="r"></span><span class="r"></span><span class="s"><span class="dl"></span><span class="k"></span><span class="dl"></span></span><span class="r"></span><span class="pc"></span><span class="r"></span><span class="r"></span><span class="r"></span><span class="r"></span><span class="fu"></span><span class="s"><span class="dl"></span><span class="k"></span><span class="il"><span class="idl"></span><span class="iv"></span><span class="s"><span class="dl"></span><span class="k"></span><span class="dl"></span></span><span class="idl"></span></span><span class="dl"></span></span><span class="r"></span><span class="r"></span><tt><br></tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

<span style="font-style: italic; font-weight: bold;">R</span>-parças&#305;n&#305;
ç&#305;kar&#305;nca sistem akl&#305;n&#305;zdan geçeni okumaya ba&#351;lar. Her zaman ba&#351;ar&#305;l&#305;
olamasa da uygulaman&#305;z&#305; ne kadar basitle&#351;tiriyor gördünüz.<br>

<hr style="width: 100%; height: 2px;"><br>

<h2>Dünyay&#305; Modellemek</h2>

&#350;imdi bir&#351;eyler ö&#287;renmeye ba&#351;lad&#305;n&#305;z , biraz oynayabilecek seviye bile
oldunuz. Fakat sonraki ad&#305;ma geçi&#351; zaman&#305; : Verileri saklamak.<br>

<br>

Tekrar ba&#351;tan ba&#351;layal&#305;m :<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="er"></span><span class="co">Camping</span>.goes <span class="sy">:Nuts</span><tt><br></tt><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Models</span><tt><br></tt>  <span class="r">class</span> <span class="cl">Page</span> &lt; <span class="co">Base</span><tt><br></tt> <span class="r"> end</span><tt><br></tt><span class="r">end</span><tt><br></tt> </pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Apaç&#305;k belliki bir kontrolörümüz olmad&#305;&#287;&#305; için bu bir i&#351; yapmayacakt&#305;r.
Fakat bunun yerine <span style="font-weight: bold;">ne
yapt&#305;&#287;&#305;m&#305;z&#305;</span> inceleyelim. <br>

<br>

Page ad&#305;nda bir modelimiz var. Bunun anlam&#305; wiki sayfalar&#305;n&#305; saklay&#305;p
sonradan yay&#305;nlayabiliriz. Gerçekte, ne kadar model istersek
üretebiliriz. Kullan&#305;c&#305;lar için bir tane olmas&#305;n&#305; istemez misiniz? ve
bir tane de blog yaz&#305;lar&#305; için ? Pekala, san&#305;r&#305;m nas&#305;l yap&#305;laca&#287;&#305;na
dair fikriniz oldu.<br>

<br>

Ancak bizim modelin bir&#351;eyi eksik : iskeleti! yani yap&#305;s&#305;.<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt><br></tt><strong>10</strong><tt><br></tt>11<tt><br></tt>12<tt><br></tt>13<tt><br></tt>14<tt><br></tt>15<tt><br></tt>16<tt><br></tt>17<tt><br></tt>18<tt><br></tt>19<tt><br></tt><strong>20</strong><tt><br></tt>21<tt><br></tt>22<tt><br></tt>23<tt><br></tt>24<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><tt><br></tt><span class="co">Camping</span>.goes <span class="sy">:Nuts</span><tt><br></tt><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Models</span><tt><br></tt>  <span class="r">class</span> <span class="cl">Page</span> &lt; <span class="co">Base</span><tt><br></tt> <tt><br></tt> <span class="r"> end</span><tt><br></tt><tt><br></tt> <span class="r"> class</span> <span class="cl">BasicFields</span> &lt; <span class="co">V</span> <span class="fl">1.0</span><tt><br></tt> <span class="r">   def</span> <span class="pc">self</span>.<span class="fu">up</span><tt><br></tt>      create_table <span class="co">Page</span>.table_name <span class="r">do</span> |t|<tt><br></tt>        t.string <span class="sy">:title</span><tt><br></tt>        t.text <span class="sy">:content</span><tt><br></tt> <span class="c">       # bununla created_at ve updated_at sütunlar&#305; olu&#351;ur</span><tt><br></tt>        t.timestamps<tt><br></tt> <span class="r">     end</span><tt><br></tt>    <span class="r">end</span><tt><br></tt> <tt><br></tt> <span class="r">   def</span> <span class="pc">self</span>.<span class="fu">down</span><tt><br></tt>      drop_table <span class="co">Page</span>.table_name<tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt><span class="r">end</span><tt><br></tt> </pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

<br>

&#350;imdi modelimizin ilk versiyonuna sahip olduk. &#350;öyle deniyor:<br>

<br>

&nbsp; E&#287;er versiyon 1.0'a ç&#305;kmak istiyorsan,<br>

&nbsp;&nbsp;&nbsp; Page modelinin tablosunu üret,<br>

&nbsp;&nbsp;&nbsp; bu tablonun sütun isimleri &#351;unlar,<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "title" string
tipinde,<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "content" daha büyük
olan text tipinde,<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "created_at" time
tipinde kayd&#305;n üretildi&#287;i zaman,<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "updated_at" time
tipinde kayd&#305;n enson de&#287;i&#351;tirildi&#287;i zaman.<br>

&nbsp;&nbsp;&nbsp; <br>

&nbsp; Versiyon 1.0'&#305; geri almak isterseniz,<br>

&nbsp;&nbsp;&nbsp; Page modelinin tablosunu sil.<br>

&nbsp;&nbsp;&nbsp; <br>

&#304;&#351;te buna <span style="font-weight: bold;">migration</span>
(birle&#351;tirme) denir. Ne zaman yeni bir model eklemek isterseniz
bunlar&#305;n alt&#305;na yeni bir migration ekleyeceksiniz ve versiyon
numaras&#305;n&#305; art&#305;racaks&#305;n&#305;z. Tüm bu migration'lar di&#287;erinin üzerine LEGO
bloklar&#305; gibi eklenerek devam eder.<br>

<br>

&#350;imdi geriye Camping'e bizim migrationumuzu kullanmas&#305;n&#305; istemek kald&#305;.
Bunlar&#305; nuts.rb'nin en alt&#305;na ekleyin.<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre style="">1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<strong></strong><strong></strong><tt><br></tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="co"></span><span class="sy"></span><span class="r"></span><span class="cl"></span><span class="r"></span><span class="cl"></span><span class="co"></span><span class="r"></span><span class="cl"></span><span class="co"></span><span class="fl"></span><span class="r"></span><span class="pc"></span><span class="fu"></span><span class="co"></span><span class="r"></span><span class="sy"></span><span class="sy"></span><span class="c"></span><span class="r"></span><span class="r"></span><span class="r"></span><span class="pc"></span><span class="fu"></span><span class="co"></span><span class="r"></span><span class="r"></span><span class="r"></span> <tt><br></tt><span class="r">def</span> <span class="co">Nuts</span>.create<tt><br></tt> <span class="co"> Nuts</span>::<span class="co">Models</span>.create_schema<tt><br></tt><span class="r">end</span><tt><br></tt><tt><br></tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Camping Server çal&#305;&#351;&#305;nca otomatik olarak <span style="font-weight: bold;">Nuts.create</span>
ça&#287;r&#305;l&#305;r. Buraya hertürlü ba&#351;lang&#305;çta çal&#305;&#351;mas&#305;n&#305; istedi&#287;iniz kodu
koyabilirsiniz, ama &#351;imdi sadece migration ça&#287;&#305;rma &nbsp;rutini
koyuyoruz. Camping Server'&#305; çal&#305;&#351;t&#305;r&#305;n ve ekrana bak&#305;n :<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">-- create_table("nuts_schema_infos")<tt><br></tt> -&gt; 0.0370s<tt><br></tt>== Nuts::Models::BasicFields: migrating ======================================<tt><br></tt>-- create_table("nuts_pages")<tt><br></tt> -&gt; 0.0250s<tt><br></tt>== Nuts::Models::BasicFields: migrated (0.0260s) =============================</pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Tekrar ba&#351;lat&#305;n ve hiçbir&#351;ey olmad&#305;&#287;&#305;n&#305; görün. Tekrar ba&#351;lat&#305;nca art&#305;k
yapacak migration kalmad&#305; çünkü. Peki bu tablolar nereye konuyor? diye
sordunuz galiba. Evet bu tablolar i&#351;letim sisteminizin kullan&#305;c&#305;
klasöründe ".camping.db" ad&#305;nda bir sqlite3 veritaban&#305; dosyas&#305; içinde
yerle&#351;tirilir. &#350;imdi gidip o dosyay&#305; bulun bir sqlite3 gezgini
programla aç&#305;n ve içindeki tablolar&#305; inceleyin.<br>

<br>

Devam etmeden önce bir &#351;ey daha, modellerinizi herzaman
migrationlar&#305;n&#305;zdan önce yerle&#351;tirin.<br>

<hr style="width: 100%; height: 2px;"><br>

<h2>Modelimizi Kullanmak</h2>

Haydi <span style="font-weight: bold;">konsol</span>
ile modelimizin çal&#305;&#351;mas&#305;n&#305; test edelim.<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">$ camping -C nuts2.rb<tt><br></tt>** Starting console<tt><br></tt>irb(main):001:0&gt;<br></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

&#350;imdi sizden bir giri&#351; yapman&#305;z bekleniyor ve siz giri&#351;inizi yap&#305;p
enter bas&#305;nca hemen cevab&#305; gelecek. Ben yapt&#305;klar&#305;m&#305; buraya yaz&#305;yorum,
siz de kendi kay&#305;tlar&#305;n&#305;z&#305; üretebilirsiniz.<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td style="font-weight: bold;" class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre style="">1<tt><br></tt>2<tt><br></tt>3<br>4<br>5<br>6<br>7<br>8<br>9<br><span style="font-weight: bold;">10</span><br><tt><span style="font-weight: normal;">11</span><br style="font-weight: normal;"><span style="font-weight: normal;">12</span><br style="font-weight: normal;"><span style="font-weight: normal;">13</span><br>14<br><span style="font-weight: bold;"><span style="font-weight: bold;">15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br></span></span></tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">irb(main):001:0&gt; Page = Nuts::Models::Page<br>=&gt; Nuts::Models::Page(id: integer, title: string, content: text, created_at: dat<br>etime, updated_at: datetime)<br><br>irb(main):002:0&gt; hiking = Page.new :title =&gt; "Hiking"<br>=&gt; #&lt;Nuts::Models::Page id: nil, title: "Hiking", content: nil, created_at: nil,<br> updated_at: nil&gt;<br><br>irb(main):003:0&gt; hiking.content = "You can also set values like this."<br>=&gt; "You can also set values like this."<br><br>irb(main):004:0&gt; hiking.save<br>=&gt; true<br><br><br>irb(main):005:0&gt; page = Page.find_by_title("Hiking")<br>=&gt; #&lt;Nuts::Models::Page id: 1, title: "Hiking", content: "You can also set values<br>&nbsp;like this.", created_at: "2011-03-19 17:13:32", updated_at: "2011-03-19 17:13:32"<br><br>irb(main):005:0&gt; page = Page.find(1)<br>=&gt; #&lt;Nuts::Models::Page id: 1, title: "Hiking", content: "You can also set values<br>&nbsp;like this.", created_at: "2011-03-19 17:13:32", updated_at: "2011-03-19 17:13:32"<br><br>irb(main):006:0&gt; page.title<br>=&gt; "Hiking"<br><br>irb(main):007:0&gt; page.content<br>=&gt; "You can also set values like this."<br><br>irb(main):009:0&gt; page.created_at<br>=&gt; Sat Mar 19 17:13:32 +0200 2011<br><br>irb(main):010:0&gt; page.updated_at<br>=&gt; Sat Mar 19 17:13:32 +0200 2011<br><br>irb(main):011:0&gt; Page.find_by_title("Fishing")<br>=&gt; nil<br><br># Page.create kayd&#305; otomatik olarak kaydeder.<br>irb(main):012:0&gt; Page.create(:title =&gt; "Fishing", :content =&gt; "Go fish!")<br>  <br>irb(main):013:0&gt; Page.count<br>=&gt; 2<br><br><br></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

&#350;imdi 2 sayfam&#305;z var: Birinin ba&#351;l&#305;&#287;&#305; Hiking di&#287;erinin Fishing.<br>

<hr style="width: 100%; height: 2px;"><br>

<h2>Derleyip toplamak</h2>

Ne dersiniz bu harika sayfalar&#305; taray&#305;c&#305;m&#305;zda göstersek çok güzel olmaz
m&#305;? <br>

nuts.rb dosyas&#305;n&#305; &#351;öyle düzenleyin:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt><br></tt><strong>10</strong><tt><br></tt>11<tt><br></tt>12<tt><br></tt>13<tt><br></tt>14<tt><br></tt>15<tt><br></tt>16<tt><br></tt>17<tt><br></tt>18<tt><br></tt>19<tt><br></tt><strong>20</strong><tt><br></tt>21<tt><br></tt>22<tt><br></tt>23<tt><br></tt>24<tt><br></tt>25<tt><br></tt>26<tt><br></tt>27<tt><br></tt>28<tt><br></tt>29<tt><br></tt><strong>30</strong><tt><br></tt>31<tt><br></tt>32<tt><br></tt>33<tt><br></tt>34<tt><br></tt><strong></strong><strong></strong><strong></strong></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><tt><br></tt><span class="co"></span><span class="r">module</span> <span class="cl">Nuts::Controllers</span><tt><br></tt>  <span class="r">class</span> <span class="cl">Pages</span><tt><br></tt>    <span class="r">def</span> <span class="fu">get</span><tt><br></tt>      <span class="c"># Sadece sayfa etiketlerini seç.</span><tt><br></tt>      <span class="iv">@pages</span> = <span class="co">Page</span>.all(<span class="sy">:select</span> =&gt; <span class="s"><span class="dl">"</span><span class="k">title</span><span class="dl">"</span></span>)<tt><br></tt>      render <span class="sy">:list</span><tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt><tt><br></tt>  <span class="r">class</span> <span class="cl">PageX</span><tt><br></tt>    <span class="r">def</span> <span class="fu">get</span>(title)<tt><br></tt>      <span class="iv">@page</span> = <span class="co">Page</span>.find_by_title(title)<tt><br></tt>      render <span class="sy">:view</span><tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt><span class="r">end</span><tt><br></tt><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Views</span><tt><br></tt>  <span class="r">def</span> <span class="fu">list</span><tt><br></tt>    h1 <span class="s"><span class="dl">"</span><span class="k">Tüm Sayfalar</span><span class="dl">"</span></span><tt><br></tt>    ul <span class="r">do</span><tt><br></tt>      <span class="iv">@pages</span>.each <span class="r">do</span> |page|<tt><br></tt>        li <span class="r">do</span><tt><br></tt>          a page.title, <span class="sy">:href</span> =&gt; R(<span class="co">PageX</span>, page.title)<tt><br></tt>        <span class="r">end</span><tt><br></tt>      <span class="r">end</span><tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt><tt><br></tt>  <span class="r">def</span> <span class="fu">view</span><tt><br></tt>    h1 <span class="iv">@page</span>.title<tt><br></tt>    <span class="pc">self</span> &lt;&lt; <span class="iv">@page</span>.content<tt><br></tt>  <span class="r">end</span><tt><br></tt><span class="r">end</span><tt>
</tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Burada ilk <span style="font-weight: bold;">helper</span> metodu
görüyoruz:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">R(<span class="co">PageX</span>, page.title)<span class="sy"></span><tt><br></tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Bu bir <span style="font-weight: bold;">ayr&#305;lm&#305;&#351; yönlendirici</span>
dir ve kontrolör üzerinden bir URL üretir. Camping az say&#305;da ama etkili
helper metodlarla gelir, kendi metodlar&#305;n&#305;z&#305; da tan&#305;mlayabilirsiniz.
Camping::Helpers konusu bunu anlat&#305;yor. <br>

<br>

Burada kendinizi geli&#351;tirmek için yapabilece&#287;iniz &#351;eyler var. Baz&#305;lar&#305;
&#351;öyle:<br>

<ul>

  <li>Sayfan&#305;n nezaman üretildi&#287;ini ve en son ne zaman update
edildi&#287;ini gösterin.</li>
  <li>Sayfa yoksa ne olur?</li>
  <li>Ön sayfa ne göstermelidir?</li>
  <li>Bir layout ekleyin.</li>
  <li>Biraz canl&#305; görüntüler yap&#305;n.<br>
  </li>
</ul>

<br>

<hr style="width: 100%; height: 2px;"><br>

<br>

<h2>Son Rötu&#351;lar</h2>

Uygulamam&#305;zda koca bir çatlak var. Yeni sayfa ekleyemiyor ve edit
edemiyoruz. Haydi bunu nas&#305;l yapaca&#287;&#305;m&#305;z&#305; görelim:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt><br></tt><strong>10</strong><tt><br></tt>11<tt><br></tt>12<tt><br></tt>13<tt><br></tt>14<tt><br></tt>15<tt><br></tt>16<tt><br></tt>17<tt><br></tt>18<tt><br></tt>19<tt><br></tt><strong>20</strong><tt><br></tt>21<tt><br></tt>22<tt><br></tt>23<tt><br></tt>24<tt><br></tt>25<tt><br></tt>26<tt><br></tt>27<tt><br></tt>28<tt><br></tt>29<tt><br></tt><strong>30</strong><tt><br></tt>31<tt><br></tt>32<tt><br></tt>33<tt><br></tt>34<tt><br></tt>35<tt><br></tt>36<tt><br></tt>37<tt><br></tt>38<strong></strong><strong></strong><strong></strong><strong></strong><strong></strong></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="co"></span><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Controllers</span><tt><br></tt>  <span class="r">class</span> <span class="cl">Pages</span><tt><br></tt>    <span class="r">def</span> <span class="fu">get</span><tt><br></tt>      <span class="c"># Sadece sayfa etiketlerini seç.</span><tt><br></tt>      <span class="iv">@pages</span> = <span class="co">Page</span>.all(<span class="sy">:select</span> =&gt; <span class="s"><span class="dl">"</span><span class="k">title</span><span class="dl">"</span></span>)<tt><br></tt>      render <span class="sy">:list</span><tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt><tt><br></tt>  <span class="r">class</span> <span class="cl">PageX</span><tt><br></tt>    <span class="r">def</span> <span class="fu">get</span>(title)<tt><br></tt>      <span class="r">if</span> <span class="iv">@page</span> = <span class="co">Page</span>.find_by_title(title)<tt><br></tt>        render <span class="sy">:view</span><tt><br></tt>      <span class="r">else</span><tt><br></tt>        redirect <span class="co">PageXEdit</span>, title<tt><br></tt>      <span class="r">end</span><tt><br></tt>    <span class="r">end</span><tt><br></tt>        <tt><br></tt>    <span class="r">def</span> <span class="fu">post</span>(title)<tt><br></tt>      <span class="c"># E&#287;er yoksa yenisini üret:</span><tt><br></tt>      <span class="iv">@page</span> = <span class="co">Page</span>.find_or_initialize_by_title(title)<tt><br></tt>      <span class="c"># Süper! dimi? Bu &#351;u sat&#305;rla ayn&#305;:</span><tt><br></tt>      <span class="c"># @page = Page.find_by_title(title) || Page.new(:title =&gt; title)</span><tt><br></tt>            <tt><br></tt>      <span class="iv">@page</span>.content = <span class="iv">@input</span>.content<tt><br></tt>      <span class="iv">@page</span>.save<tt><br></tt>      redirect <span class="co">PageX</span>, title<tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt>    <tt><br></tt>  <span class="r">class</span> <span class="cl">PageXEdit</span><tt><br></tt>    <span class="r">def</span> <span class="fu">get</span>(title)<tt><br></tt>      <span class="iv">@page</span> = <span class="co">Page</span>.find_or_initialize_by_title(title)<tt><br></tt>      render <span class="sy">:edit</span><tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt><span class="r">end</span><tt><br></tt><tt><br></tt><span class="r"></span></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Bu kodlar&#305;n kemik noktas&#305; PageX kontrolörü <span style="font-weight: bold;">post</span> metodunda yatar. Bir kullan&#305;c&#305;
linke t&#305;klay&#305;nca ya da adres girince <span style="font-weight: bold;">get</span>
metoduna gider. Ama bir form olu&#351;turur ve orda veriyi toplay&#305;p
gönderirseniz <span style="font-weight: bold;">post</span> metoduna
ula&#351;&#305;rs&#305;n&#305;z.<br>

<br>

Kullanabilece&#287;iniz ba&#351;ka isimler de var fakat her zaman çal&#305;&#351;mayabilir.
Bu yüzden aceleci&nbsp; olmay&#305;n ve bir süre daha <span style="font-weight: bold;">get</span> ve <span style="font-weight: bold;">post</span> ile devam edin. Nas&#305;l
çal&#305;&#351;t&#305;&#287;&#305;n&#305; ilerde gösterece&#287;iz.<br>

<br>

Ayr&#305;ca <span style="font-weight: bold;">@input.content</span>
kullan&#305;m&#305; dikkatinizi çekmi&#351;tir. <span style="font-weight: bold;">@input</span>
hash yap&#305;s&#305; formlardaki gibi ve (/posts?page=50) URL'sindeki gibi
gönderilen parametreleri içerir.<br>

<br>

Burada bir tane de <span style="font-weight: bold;">edit</span>
görseli bulunuyor. Kendiniz daha iyi bir görsel yapabilirsiniz. Bununla
bildi&#287;iniz bir yap&#305;y&#305; birle&#351;tirmeye çal&#305;&#351;&#305;n.<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt><br></tt><strong>10</strong><tt><br></tt>11<br>12<tt><br></tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="co"></span><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Views</span><tt><br></tt>  <span class="r">def</span> <span class="fu">edit</span><tt><br></tt>    h1 <span class="iv">@page</span>.title<tt><br></tt>    form <span class="sy">:action</span> =&gt; R(<span class="co">PageX</span>, <span class="iv">@page</span>.title), <span class="sy">:method</span> =&gt; <span class="sy">:post</span> <span class="r">do</span><tt><br></tt>      textarea <span class="iv">@page</span>.content, <span class="sy">:name</span> =&gt; <span class="sy">:content</span>,<tt><br></tt>          <span class="sy">:rows</span> =&gt; <span class="i">10</span>, <span class="sy">:cols</span> =&gt; <span class="i">50</span><tt><br></tt>      br<tt><br></tt>      input <span class="sy">:type</span> =&gt; <span class="sy">:submit</span>, <span class="sy">:value</span> =&gt; Gönder<span class="s"><span class="k">!</span><span class="dl">"</span></span><tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt><span class="r">end</span><tt>
</tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

<hr style="width: 100%; height: 2px;">
<br>

<h2>Phew!</h2>

Son birkaç dakikada birhayli ilerlediniz ve bir dinlenmeyi hakettiniz,
ancak tekrar bir gözden geçirme yapal&#305;m :<br>

<ul>

  <li>Herzaman <span style="font-weight: bold;">Camping.goes :App</span>
sat&#305;r&#305;n&#305; uygulaman&#305;z&#305;n en üstüne koyun.</li>
  <li>Her yönlendirme bir kontrolöre ula&#351;mal&#305;d&#305;r.</li>
  <li>Kontrolör sadece i&#351; yapmal&#305;d&#305;r.</li>
  <li><span style="font-weight: bold;">@input</span> yap&#305;lan ça&#287;r&#305;daki
parametreleri içerir.</li>
  <li>View'lar Ruby &#351;eklinde gösterilen Html'lerdir.</li>
  <li>View'lar olu&#351;um de&#287;i&#351;kenlerine eri&#351;ebilir (instance de&#287;i&#351;kenler @
ile ba&#351;lar).</li>
  <li>Modeller tüm verilerinizi saklamak için kullan&#305;lan tablolard&#305;r.</li>
  <li>Modellerinizi migration'lar&#305;n öncesine yaz&#305;n.</li>
  <li>Helper'lar yard&#305;mc&#305; programlard&#305;r.</li>
</ul>

<br>

Maalesef kitap burada son buluyor. Camping'i takip etmeye devam edin.
Belgenin orjinalini <a href="https://github.com/camping/camping" target="_blank">https://github.com/camping/camping</a> adresinde
bulabilirsiniz.<br>
<hr style="width: 100%; height: 2px;">
<br>

<a href="http://tuxweet.linux.org.tr/umitka" target="_blank">Tuxweet</a>
- <a href="https://twitter.com/#%21/umitka" target="_blank">Twitter</a>
- <a href="http://rstat.us/users/umitka" target="_blank">Rstat.us</a>
- <a href="https://github.com/ujk" target="_blank">Github</a> - <a href="http://identi.ca/umitka" target="_blank">Identi.ca</a> - <a href="mailto:ujk7107@gmail.com">ujk7107@gmail.com</a> <br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

</body></html>