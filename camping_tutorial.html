<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
  <meta charset="UTF-8">
  <!--meta content="text/html; charset=UTF-8" http-equiv="content-type"-->
  <title>Camping Tutorial</title>

  
  
  <style type="text/css"> .CodeRay {
background-color: #f8f8f8;
border: 1px solid silver;
font-family: 'Courier New', 'Terminal', monospace;
color: #000;
}
.CodeRay pre { margin: 0px }
div.CodeRay { }
span.CodeRay { white-space: pre; border: 0px; padding: 2px }
table.CodeRay { border-collapse: collapse; width: 100%; padding: 2px }
table.CodeRay td { padding: 2px 4px; vertical-align: top }
.CodeRay .line_numbers, .CodeRay .no {
background-color: #def;
color: gray;
text-align: right;
}
.CodeRay .line_numbers tt { font-weight: bold }
.CodeRay .line_numbers .highlighted { color: red }
.CodeRay .line { display: block; float: left; width: 100%; }
.CodeRay .no { padding: 0px 4px }
.CodeRay .code { width: 100% }
ol.CodeRay { font-size: 10pt }
ol.CodeRay li { white-space: pre }
.CodeRay .code pre { overflow: auto }
.CodeRay .debug { color:white ! important; background:blue ! important; }
.CodeRay .af { color:#00C }
.CodeRay .an { color:#007 }
.CodeRay .at { color:#f08 }
.CodeRay .av { color:#700 }
.CodeRay .aw { color:#C00 }
.CodeRay .bi { color:#509; font-weight:bold }
.CodeRay .c { color:#888; }
.CodeRay .ch { color:#04D }
.CodeRay .ch .k { color:#04D }
.CodeRay .ch .dl { color:#039 }
.CodeRay .cl { color:#B06; font-weight:bold }
.CodeRay .cm { color:#A08; font-weight:bold }
.CodeRay .co { color:#036; font-weight:bold }
.CodeRay .cr { color:#0A0 }
.CodeRay .cv { color:#369 }
.CodeRay .de { color:#B0B; }
.CodeRay .df { color:#099; font-weight:bold }
.CodeRay .di { color:#088; font-weight:bold }
.CodeRay .dl { color:black }
.CodeRay .do { color:#970 }
.CodeRay .dt { color:#34b }
.CodeRay .ds { color:#D42; font-weight:bold }
.CodeRay .e { color:#666; font-weight:bold }
.CodeRay .en { color:#800; font-weight:bold }
.CodeRay .er { color:#F00; background-color:#FAA }
.CodeRay .ex { color:#C00; font-weight:bold }
.CodeRay .fl { color:#60E; font-weight:bold }
.CodeRay .fu { color:#06B; font-weight:bold }
.CodeRay .gv { color:#d70; font-weight:bold }
.CodeRay .hx { color:#058; font-weight:bold }
.CodeRay .i { color:#00D; font-weight:bold }
.CodeRay .ic { color:#B44; font-weight:bold }
.CodeRay .il { background: #ddd; color: black }
.CodeRay .il .il { background: #ccc }
.CodeRay .il .il .il { background: #bbb }
.CodeRay .il .idl { background: #ddd; font-weight: bold; color: #666 }
.CodeRay .idl { background-color: #bbb; font-weight: bold; color: #666; }
.CodeRay .im { color:#f00; }
.CodeRay .in { color:#B2B; font-weight:bold }
.CodeRay .iv { color:#33B }
.CodeRay .la { color:#970; font-weight:bold }
.CodeRay .lv { color:#963 }
.CodeRay .oc { color:#40E; font-weight:bold }
.CodeRay .of { color:#000; font-weight:bold }
.CodeRay .op { }
.CodeRay .pc { color:#038; font-weight:bold }
.CodeRay .pd { color:#369; font-weight:bold }
.CodeRay .pp { color:#579; }
.CodeRay .ps { color:#00C; font-weight:bold }
.CodeRay .pt { color:#074; font-weight:bold }
.CodeRay .r, .kw { color:#080; font-weight:bold }
.CodeRay .ke { color: #808; }
.CodeRay .ke .dl { color: #606; }
.CodeRay .ke .ch { color: #80f; }
.CodeRay .vl { color: #088; }
.CodeRay .rx { background-color:#fff0ff }
.CodeRay .rx .k { color:#808 }
.CodeRay .rx .dl { color:#404 }
.CodeRay .rx .mod { color:#C2C }
.CodeRay .rx .fu { color:#404; font-weight: bold }
.CodeRay .s { background-color:#fff0f0; color: #D20; }
.CodeRay .s .s { background-color:#ffe0e0 }
.CodeRay .s .s .s { background-color:#ffd0d0 }
.CodeRay .s .k { }
.CodeRay .s .ch { color: #b0b; }
.CodeRay .s .dl { color: #710; }
.CodeRay .sh { background-color:#f0fff0; color:#2B2 }
.CodeRay .sh .k { }
.CodeRay .sh .dl { color:#161 }
.CodeRay .sy { color:#A60 }
.CodeRay .sy .k { color:#A60 }
.CodeRay .sy .dl { color:#630 }
.CodeRay .ta { color:#070 }
.CodeRay .tf { color:#070; font-weight:bold }
.CodeRay .ts { color:#D70; font-weight:bold }
.CodeRay .ty { color:#339; font-weight:bold }
.CodeRay .v { color:#036 }
.CodeRay .xt { color:#444 }
.CodeRay .ins { background: #afa; }
.CodeRay .del { background: #faa; }
.CodeRay .chg { color: #aaf; background: #007; }
.CodeRay .head { color: #f8f; background: #505 }
.CodeRay .ins .ins { color: #080; font-weight:bold }
.CodeRay .del .del { color: #800; font-weight:bold }
.CodeRay .chg .chg { color: #66f; }
.CodeRay .head .head { color: #f4f; }
  </style>
</head><body style="background-color: rgb(238, 238, 204); padding-top: 10px; padding-right: 10%; padding-left: 5%;">
<div style="border-style: groove; background-color: rgb(170, 0, 0); font-size: 45px; color: rgb(255, 204, 0); font-weight: bold; font-family: &quot;Times New Roman&quot;,Times,serif; text-align: center;">Camping
Tutorial</div>

<h2>Başlangıç <br>
</h2>

Yeni bir text dosya açın ve nuts.rb adını verin. İçin de şunu yazın:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="co">Camping</span>.goes <span class="sy">:Nuts</span><tt>
</tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Kaydedin , sonra komut satırında şunu girin:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">$ camping nuts.rb<tt>
</tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Şuna benzer bir mesaj almalısınız:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">** Camping running on 0.0.0.0:3301<tt>
</tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Bunun anlamı, Camping server şimdi makinanızın 3301 portunda çalışmaya
başladı. Tarayıcınızı açın ve <span style="font-weight: bold;">http://localhost:3301/</span>
adresine gidin. <br>

<br>

<img style="width: 416px; height: 159px;" alt="camping_1.png" src="camping_1.png"><br>

<br>

Burada bir hata yok. Camping server çalışıyor ama size ne göstereceğini
bilmiyor. Öyleyse kendisine öğretelim. <br>

<hr style="width: 100%; height: 2px;"><br>

<h2>Merhaba Saat</h2>

Peki, Camping kurulu ve çalışıyor. Çalışır durumda tutun, Camping
server çalışırken dosyalarda düzenleme
yapabilirsiniz,&nbsp;otomatik olarak yüklenecektir. Server'ı
durdurmak isterseniz Control-C basın. <br>

Haydi birşeyler gösterelim, nuts.rb dosyası alt kısmına şunu ekleyin :<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="co">Camping</span>.goes <span class="sy">:Nuts</span><tt><br></tt><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Controllers</span><tt><br></tt><span style="font-family: mon;"><span style="font-weight: bold;"> </span></span><span class="r"> class</span> <span class="cl">Index</span> &lt; <span class="co">R</span> <span class="s"><span class="dl">'</span><span class="k">/</span><span class="dl">'</span></span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span><tt><br></tt> <span class="co">     Time</span>.now.to_s<tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt><span class="r">end</span></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Dosyayı saklayın ve tarayıcı penceresini tazeleyin. Tarayıcınız zamanı
gösterecektir, şöyle bişey :<br>

<br>

<img style="width: 374px; height: 188px;" alt="camping_2.png" src="camping_2.png"><br>

<br>

&nbsp;<br>

<hr style="width: 100%; height: 2px;"><br>

<h2>Görseli Düzenlemek</h2>

Camping
microframework kodumuzu MVC (Model-View-Controller) paternine uygun
parçalamamıza olanak sağlar. Haydi Nuts uyuglamamıza bir görsel
ekleyelim. <span style="font-weight: bold;">module
Nuts::Controllers</span>'i şöyle
değiştirin:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt><br></tt><strong>10</strong><tt><br></tt>11<tt><br></tt>12<tt><br></tt>13<tt><br></tt>14<tt><br></tt>15<tt><br></tt>16<tt><br></tt>17<tt><br></tt>18<tt><br></tt>19<tt><br></tt><strong>20</strong><tt><br></tt>21<tt><br></tt>22<tt><br></tt>23<tt><br></tt>24<tt><br></tt>25<tt><br></tt>26<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="co">Camping</span>.goes <span class="sy">:Nuts</span><tt><br></tt><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Controllers</span><tt><br></tt> <span class="r"> class</span> <span class="cl">Index</span> &lt; <span class="co">R</span> <span class="s"><span class="dl">'</span><span class="k">/</span><span class="dl">'</span></span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span><tt><br></tt> <span class="iv">     @time</span> = <span class="co">Time</span>.now<tt><br></tt>      render <span class="sy">:sundial</span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt><span class="r">end</span><tt><br></tt><tt><br></tt><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Views</span><tt><br></tt> <span class="r"> def</span> <span class="fu">layout</span><tt><br></tt>    html <span class="r">do</span><tt><br></tt>      head <span class="r">do</span><tt><br></tt>        title { <span class="s"><span class="dl">"</span><span class="k">Nuts And GORP</span><span class="dl">"</span></span> }<tt><br></tt> <span class="r">     end</span><tt><br></tt>      body { <span class="pc">self</span> &lt;&lt; <span class="r">yield</span> }<tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt><tt><br></tt> <span class="r"> def</span> <span class="fu">sundial</span><tt><br></tt>    p <span class="s"><span class="dl">"</span><span class="k">The current time is: </span><span class="il"><span class="idl">#{</span><span class="iv">@time</span>.strftime(<span class="s"><span class="dl">'</span><span class="k">%H:%M:%S</span><span class="dl">'</span></span>)<span class="idl">}</span></span><span class="dl">"</span></span><tt><br></tt> <span class="r"> end</span><tt><br></tt><span class="r">end</span><tt>
</tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Dosyayı kaydedip tarayıcınızda sayfayı tazeleyin. Şöyle bir mesaj
çıkacaktır :<br>

<br>

<img style="width: 425px; height: 149px;" alt="camping_3.png" src="camping_3.png"><br>

<br>

Ve sayfamızın title barında şimdi <span style="font-weight: bold;">Nuts
And GORP</span>
yazıyor.<br>

<br>

Burda gördüğünüz gibi kontrolörümüzden <span style="font-style: italic;">render :sundial</span>
komutunu veriyoruz. Bu aynen anlaşıldığı manaya geliyor, views
modulündeki <span style="font-style: italic;">sundial</span>
metodu çıktısını yayınlıyor.  Ayrıca <span style="font-style: italic;">layout</span>
adında özel bir metod da çağırdık, adından da anlaşıldığı gibi bu
sayfanın yerleşim kalıbı oluyor ve markaby formatında bizim
sundial metod çıktımız bunun içinde gösteriliyor. Eüer HTML ile haşır
neşirseniz görseldeki ifadelerin HTML tag isimlerine benzerliğini
farketmişsinizdir. Bu yapı HTML'i Ruby kullanarak yazmayı sağlayan
Markaby yapısıdır. Zaten Markaby gem yüklü olmadan Camping server
çalıştırırsanız bu sayfayı göstermeye kalktığınızda Markaby gem yüklü
olmadığını belirten bir hata mesajı alırsınız, bu durumda
klasik <span style="font-weight: bold;">sudo gem
install markaby</span>
ile yüklemelisiniz! Ben denerken 1.9.2 versiyon Ruby'de hata mesajı
aldım. "undefined method to_s" şeklinde bir takip sonrasında hatanın
çıkarıldığı <span style="font-style: italic;">markaby/builder.rb"
</span>dosyasının
280 nolu satırının üzerinde Ruby versiyon sorgulaması vardı. O
sorgulamaya göre versiyon 1.9.1 den büyükse hata mesajı veriyordu, o
satırı versiyon 1.9.5 ten büyükse hata ver deyip atlatınca sorun kalktı
ama sonra başka ne çıkar bilemem, <span style="font-weight: bold;">pansıman
tedbir</span>. <br>

<br>

Gördüğünüz
gibi kontrolör üzerinden herhangibir şeyi cevap olarak dönebilirsiniz
ve bu cevap tarayıcınıza gönderilir. Fakat buna daha sonra dönelim ve
routing (yönlendirme) <br>

yapılarını inceleyelim.<br>

<br>

<h2>Yönlendirmeler</h2>

Büyük ihtimal önceki sayfadaki acayip <span style="font-weight: bold;">R '/'</span>
deyimini farkettiniz. Bu Ruby'nin bizim microframework'umuzda
kullanılan ve kontrolöre nasıl erişileceğini belirten yönlendirmelerin
standart dışı bir ifadesi. <br>

<br>

Bu yönlendirmeler çok güçlçdçrler ama biz şimdi en basitinden
başlayacağız.<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre style="">1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt><br></tt><strong>10</strong><tt><br></tt>11<tt><br></tt>12<tt><br></tt>13<tt><br></tt>14<tt><br></tt>15<tt><br></tt>16<tt><br></tt>17<tt><br></tt>18<tt><br></tt>19<tt><br></tt><strong>20</strong><tt><br></tt>21<tt><br></tt>22<tt><br></tt>23<tt><br></tt>24<tt><br></tt>25<tt><br></tt>26<tt><br></tt>27<tt><br></tt>28<tt><br></tt>29<tt><br></tt><strong></strong><strong></strong><strong></strong><tt><br></tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="co"></span><span class="r">module</span> <span class="cl">Nuts::Controllers</span><tt><br></tt> <span class="c"> # localhost:3301/welcome/yo/my/site adresi</span><tt><br></tt> <span class="r"> class</span> <span class="cl">Words</span> &lt; <span class="co">R</span> <span class="s"><span class="dl">'</span><span class="k">/welcome/to/my/site</span><span class="dl">'</span></span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span><tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">You got here by: /welcome/to/my/site</span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt> <tt><br></tt> <span class="c"> # localhost:3301/nuts/1 veya nuts/234 vs. sayı metoda parametre oluyor</span><tt><br></tt> <span class="r"> class</span> <span class="cl">Digits</span> &lt; <span class="co">R</span> <span class="s"><span class="dl">'</span><span class="k">/nuts/(</span><span class="k">\d</span><span class="k">+)</span><span class="dl">'</span></span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span>(number)<tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">You got here by: /nuts/</span><span class="il"><span class="idl">#{</span>number<span class="idl">}</span></span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt><tt><br></tt> <span class="c"> # slash ( / ) içermeyen herşeyi seçmek</span><tt><br></tt> <span class="r"> class</span> <span class="cl">Segment</span> &lt; <span class="co">R</span> <span class="s"><span class="dl">'</span><span class="k">/gorp/([^/]+)</span><span class="dl">'</span></span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span>(everything_else_than_a_slash)<tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">You got here by: /gorp/</span><span class="il"><span class="idl">#{</span>everything_else_than_a_slash<span class="idl">}</span></span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt> <tt><br></tt> <span class="c"> # bir sayı arkasından herşey (localhost:3301/5/hasan gibi)</span><tt><br></tt> <span class="r"> class</span> <span class="cl">DigitsAndEverything</span> &lt; <span class="co">R</span> <span class="s"><span class="dl">'</span><span class="k">/nuts/(</span><span class="k">\d</span><span class="k">+)/([^/]+)</span><span class="dl">'</span></span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span>(number, everything)<tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">You got here by: /nuts/</span><span class="il"><span class="idl">#{</span>number<span class="idl">}</span></span><span class="k">/</span><span class="il"><span class="idl">#{</span>everything<span class="idl">}</span></span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt><span class="r">end</span><tt><br></tt><tt><br></tt><tt><br></tt><span class="r"></span><span class="r"></span><tt><br></tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Bunları nuts.rb dosyasına ekleyin ve tüm kontrolörlere ulaştığınızı
test edin.<br>

<br>

Ayrıca
dikkat ettiyseniz parantez içinde tanımlanan şeyler metoda parametre
olarak aktarılıyor ve istediğiniz gibi kullanabilirsiniz.<br>

<hr style="width: 100%; height: 2px;">
<h2>Basit (ama akıllı) Yönlendirmeler</h2>

Bir de şunları deneyin:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt><br></tt><strong>10</strong><tt><br></tt>11<tt><br></tt>12<tt><br></tt>13<tt><br></tt>14<tt><br></tt>15<tt><br></tt>16<tt><br></tt>17<tt><br></tt>18<tt><br></tt>19<tt><br></tt><strong>20</strong><tt><br></tt>21<tt><br></tt>22<tt><br></tt>23<tt><br></tt>24<tt><br></tt>25<tt><br></tt>26<tt><br></tt>27<tt><br></tt>28<tt><br></tt>29<tt><br></tt><strong>30</strong><tt><br></tt>31<tt><br></tt>32<tt><br></tt>33<tt><br></tt>34<tt><br></tt>35<strong></strong><strong></strong><strong></strong><strong></strong><strong></strong><tt><br></tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="er"></span><span class="er"></span><span class="co">Camping</span>.goes <span class="sy">:Nuts</span><tt><br></tt><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Controllers</span><tt><br></tt><tt><br></tt> <span class="r"> class</span> <span class="cl">Index</span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span><tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">Buraya '/' ile geldiniz.</span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt> <tt><br></tt> <span class="r"> class</span> <span class="cl">WelcomeToMyPage</span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span><tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">Buraya '/welcome/to/my/page' ile geldiniz.</span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt> <tt><br></tt> <span class="r"> class</span> <span class="cl">NutsN</span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span>(number)<tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">Buraya '/nuts/</span><span class="il"><span class="idl">#{</span>number<span class="idl">}</span></span><span class="k">' ile geldiniz.</span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt> <tt><br></tt> <span class="r"> class</span> <span class="cl">GorpX</span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span>(everything_else_than_a_slash)<tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">Buraya '/gorp/</span><span class="il"><span class="idl">#{</span>everything_else_than_a_slash<span class="idl">}</span></span><span class="k">' ile geldiniz.</span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt> <tt><br></tt> <span class="r"> class</span> <span class="cl">NutsNX</span><tt><br></tt> <span class="r">   def</span> <span class="fu">get</span>(number, everything)<tt><br></tt> <span class="s"><span class="dl">     "</span><span class="k">Buraya '/nuts/</span><span class="il"><span class="idl">#{</span>number<span class="idl">}</span></span><span class="k">/</span><span class="il"><span class="idl">#{</span>everything<span class="idl">}</span></span><span class="k">' ile geldiniz.</span><span class="dl">"</span></span><tt><br></tt> <span class="r">   end</span><tt><br></tt> <span class="r"> end</span><tt><br></tt><span class="r">end</span><tt><br></tt><tt><br></tt><tt><br></tt><span class="r"></span><span class="cl"></span><span class="r"></span><span class="fu"></span><span class="r"></span><span class="r"></span><span class="s"><span class="dl"></span><span class="k"></span><span class="dl"></span></span><span class="r"></span><span class="pc"></span><span class="r"></span><span class="r"></span><span class="r"></span><span class="r"></span><span class="fu"></span><span class="s"><span class="dl"></span><span class="k"></span><span class="il"><span class="idl"></span><span class="iv"></span><span class="s"><span class="dl"></span><span class="k"></span><span class="dl"></span></span><span class="idl"></span></span><span class="dl"></span></span><span class="r"></span><span class="r"></span><tt><br></tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

<span style="font-style: italic; font-weight: bold;">R</span>-parçasını
çıkarınca sistem aklınızdan geçeni okumaya başlar. Her zaman başarılı
olamasa da uygulamanızı ne kadar basitleştiriyor gördünüz.<br>

<hr style="width: 100%; height: 2px;"><br>

<h2>Dünyayı Modellemek</h2>

Şimdi birşeyler öğrenmeye başladınız , biraz oynayabilecek seviye bile
oldunuz. Fakat sonraki adıma geçiş zamanı : Verileri saklamak.<br>

<br>

Tekrar baştan başlayalım :<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="er"></span><span class="co">Camping</span>.goes <span class="sy">:Nuts</span><tt><br></tt><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Models</span><tt><br></tt>  <span class="r">class</span> <span class="cl">Page</span> &lt; <span class="co">Base</span><tt><br></tt> <span class="r"> end</span><tt><br></tt><span class="r">end</span><tt><br></tt> </pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Apaçık belli ki bir kontrolörümüz olmadığı için bu bir iş yapmayacaktır.
Fakat bunun yerine <span style="font-weight: bold;">ne
yaptığımızı</span> inceleyelim. <br>

<br>

Page adında bir modelimiz var. Bunun anlamı wiki sayfalarını saklayıp
sonradan yayınlayabiliriz. Gerçekte, ne kadar model istersek
üretebiliriz. Kullanıcılar için bir tane olmasını istemez misiniz? ve
bir tane de blog yazıları için ? Pekala, sanırım nasıl yapılacağına
dair fikriniz oldu.<br>

<br>

Ancak bizim modelin birşeyi eksik : iskeleti! yani yapısı.<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt><br></tt><strong>10</strong><tt><br></tt>11<tt><br></tt>12<tt><br></tt>13<tt><br></tt>14<tt><br></tt>15<tt><br></tt>16<tt><br></tt>17<tt><br></tt>18<tt><br></tt>19<tt><br></tt><strong>20</strong><tt><br></tt>21<tt><br></tt>22<tt><br></tt>23<tt><br></tt>24<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><tt><br></tt><span class="co">Camping</span>.goes <span class="sy">:Nuts</span><tt><br></tt><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Models</span><tt><br></tt>  <span class="r">class</span> <span class="cl">Page</span> &lt; <span class="co">Base</span><tt><br></tt> <tt><br></tt> <span class="r"> end</span><tt><br></tt><tt><br></tt> <span class="r"> class</span> <span class="cl">BasicFields</span> &lt; <span class="co">V</span> <span class="fl">1.0</span><tt><br></tt> <span class="r">   def</span> <span class="pc">self</span>.<span class="fu">up</span><tt><br></tt>      create_table <span class="co">Page</span>.table_name <span class="r">do</span> |t|<tt><br></tt>        t.string <span class="sy">:title</span><tt><br></tt>        t.text <span class="sy">:content</span><tt><br></tt> <span class="c">       # bununla created_at ve updated_at sütunları oluşur</span><tt><br></tt>        t.timestamps<tt><br></tt> <span class="r">     end</span><tt><br></tt>    <span class="r">end</span><tt><br></tt> <tt><br></tt> <span class="r">   def</span> <span class="pc">self</span>.<span class="fu">down</span><tt><br></tt>      drop_table <span class="co">Page</span>.table_name<tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt><span class="r">end</span><tt><br></tt> </pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

<br>

Şimdi modelimizin ilk versiyonuna sahip olduk. Şöyle deniyor:<br>

<br>

&nbsp; Eğer versiyon 1.0'a çıkmak istiyorsan,<br>

&nbsp;&nbsp;&nbsp; Page modelinin tablosunu üret,<br>

&nbsp;&nbsp;&nbsp; bu tablonun sütun isimleri şunlar,<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "title" string
tipinde,<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "content" daha büyük
olan text tipinde,<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "created_at" time
tipinde kaydın üretildiği zaman,<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "updated_at" time
tipinde kaydın enson değiştirildiği zaman.<br>

&nbsp;&nbsp;&nbsp; <br>

&nbsp; Versiyon 1.0'ı geri almak isterseniz,<br>

&nbsp;&nbsp;&nbsp; Page modelinin tablosunu sil.<br>

&nbsp;&nbsp;&nbsp; <br>

İşte buna <span style="font-weight: bold;">migration</span>
(birleştirme) denir. Ne zaman yeni bir model eklemek isterseniz
bunların altına yeni bir migration ekleyeceksiniz ve versiyon
numarasını artıracaksınız. Tüm bu migration'lar diğerinin üzerine LEGO
blokları gibi eklenerek devam eder.<br>

<br>

Şimdi geriye Camping'e bizim migrationumuzu kullanmasını istemek kaldı.
Bunları nuts.rb'nin en altına ekleyin.<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre style="">1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<strong></strong><strong></strong><tt><br></tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="co"></span><span class="sy"></span><span class="r"></span><span class="cl"></span><span class="r"></span><span class="cl"></span><span class="co"></span><span class="r"></span><span class="cl"></span><span class="co"></span><span class="fl"></span><span class="r"></span><span class="pc"></span><span class="fu"></span><span class="co"></span><span class="r"></span><span class="sy"></span><span class="sy"></span><span class="c"></span><span class="r"></span><span class="r"></span><span class="r"></span><span class="pc"></span><span class="fu"></span><span class="co"></span><span class="r"></span><span class="r"></span><span class="r"></span> <tt><br></tt><span class="r">def</span> <span class="co">Nuts</span>.create<tt><br></tt> <span class="co"> Nuts</span>::<span class="co">Models</span>.create_schema<tt><br></tt><span class="r">end</span><tt><br></tt><tt><br></tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Camping Server çalışınca otomatik olarak <span style="font-weight: bold;">Nuts.create</span>
çağrılır. Buraya hertürlü başlangıçta çalışmasını istediğiniz kodu
koyabilirsiniz, ama şimdi sadece migration çağırma &nbsp;rutini
koyuyoruz. Camping Server'ı çalıştırın ve ekrana bakın :<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">-- create_table("nuts_schema_infos")<tt><br></tt> -&gt; 0.0370s<tt><br></tt>== Nuts::Models::BasicFields: migrating ======================================<tt><br></tt>-- create_table("nuts_pages")<tt><br></tt> -&gt; 0.0250s<tt><br></tt>== Nuts::Models::BasicFields: migrated (0.0260s) =============================</pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Tekrar başlatın ve hiçbirşey olmadığını görün. Tekrar başlatınca artık
yapacak migration kalmadı çünkü. Peki bu tablolar nereye konuyor? diye
sordunuz galiba. Evet bu tablolar işletim sisteminizin kullanıcı
klasöründe ".camping.db" adında bir sqlite3 veritabanı dosyası içinde
yerleştirilir. Şimdi gidip o dosyayı bulun bir sqlite3 gezgini
programla açın ve içindeki tabloları inceleyin.<br>

<br>

Devam etmeden önce bir şey daha, modellerinizi herzaman
migrationlarınızdan önce yerleştirin.<br>

<hr style="width: 100%; height: 2px;"><br>

<h2>Modelimizi Kullanmak</h2>

Haydi <span style="font-weight: bold;">konsol</span>
ile modelimizin çalışmasını test edelim.<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">$ camping -C nuts2.rb<tt><br></tt>** Starting console<tt><br></tt>irb(main):001:0&gt;<br></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Şimdi sizden bir giriş yapmanız bekleniyor ve siz girişinizi yapıp
enter basınca hemen cevabı gelecek. Ben yaptıklarım&ı buraya yazıyorum,
siz de kendi kayıtlarınızı üretebilirsiniz.<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td style="font-weight: bold;" class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre style="">1<tt><br></tt>2<tt><br></tt>3<br>4<br>5<br>6<br>7<br>8<br>9<br><span style="font-weight: bold;">10</span><br><tt><span style="font-weight: normal;">11</span><br style="font-weight: normal;"><span style="font-weight: normal;">12</span><br style="font-weight: normal;"><span style="font-weight: normal;">13</span><br>14<br><span style="font-weight: bold;"><span style="font-weight: bold;">15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br></span></span></tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">irb(main):001:0&gt; Page = Nuts::Models::Page<br>=&gt; Nuts::Models::Page(id: integer, title: string, content: text, created_at: dat<br>etime, updated_at: datetime)<br><br>irb(main):002:0&gt; hiking = Page.new :title =&gt; "Hiking"<br>=&gt; #&lt;Nuts::Models::Page id: nil, title: "Hiking", content: nil, created_at: nil,<br> updated_at: nil&gt;<br><br>irb(main):003:0&gt; hiking.content = "You can also set values like this."<br>=&gt; "You can also set values like this."<br><br>irb(main):004:0&gt; hiking.save<br>=&gt; true<br><br><br>irb(main):005:0&gt; page = Page.find_by_title("Hiking")<br>=&gt; #&lt;Nuts::Models::Page id: 1, title: "Hiking", content: "You can also set values<br>&nbsp;like this.", created_at: "2011-03-19 17:13:32", updated_at: "2011-03-19 17:13:32"<br><br>irb(main):005:0&gt; page = Page.find(1)<br>=&gt; #&lt;Nuts::Models::Page id: 1, title: "Hiking", content: "You can also set values<br>&nbsp;like this.", created_at: "2011-03-19 17:13:32", updated_at: "2011-03-19 17:13:32"<br><br>irb(main):006:0&gt; page.title<br>=&gt; "Hiking"<br><br>irb(main):007:0&gt; page.content<br>=&gt; "You can also set values like this."<br><br>irb(main):009:0&gt; page.created_at<br>=&gt; Sat Mar 19 17:13:32 +0200 2011<br><br>irb(main):010:0&gt; page.updated_at<br>=&gt; Sat Mar 19 17:13:32 +0200 2011<br><br>irb(main):011:0&gt; Page.find_by_title("Fishing")<br>=&gt; nil<br><br># Page.create kaydı otomatik olarak kaydeder.<br>irb(main):012:0&gt; Page.create(:title =&gt; "Fishing", :content =&gt; "Go fish!")<br>  <br>irb(main):013:0&gt; Page.count<br>=&gt; 2<br><br><br></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Şimdi 2 sayfamız var: Birinin başlığı Hiking diğerinin Fishing.<br>

<hr style="width: 100%; height: 2px;"><br>

<h2>Derleyip toplamak</h2>

Ne dersiniz bu harika sayfaları tarayıcımızda göstersek öok güzel olmaz
mı? <br>

nuts.rb dosyasını şöyle düzenleyin:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt><br></tt><strong>10</strong><tt><br></tt>11<tt><br></tt>12<tt><br></tt>13<tt><br></tt>14<tt><br></tt>15<tt><br></tt>16<tt><br></tt>17<tt><br></tt>18<tt><br></tt>19<tt><br></tt><strong>20</strong><tt><br></tt>21<tt><br></tt>22<tt><br></tt>23<tt><br></tt>24<tt><br></tt>25<tt><br></tt>26<tt><br></tt>27<tt><br></tt>28<tt><br></tt>29<tt><br></tt><strong>30</strong><tt><br></tt>31<tt><br></tt>32<tt><br></tt>33<tt><br></tt>34<tt><br></tt><strong></strong><strong></strong><strong></strong></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><tt><br></tt><span class="co"></span><span class="r">module</span> <span class="cl">Nuts::Controllers</span><tt><br></tt>  <span class="r">class</span> <span class="cl">Pages</span><tt><br></tt>    <span class="r">def</span> <span class="fu">get</span><tt><br></tt>      <span class="c"># Sadece sayfa etiketlerini seç.</span><tt><br></tt>      <span class="iv">@pages</span> = <span class="co">Page</span>.all(<span class="sy">:select</span> =&gt; <span class="s"><span class="dl">"</span><span class="k">title</span><span class="dl">"</span></span>)<tt><br></tt>      render <span class="sy">:list</span><tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt><tt><br></tt>  <span class="r">class</span> <span class="cl">PageX</span><tt><br></tt>    <span class="r">def</span> <span class="fu">get</span>(title)<tt><br></tt>      <span class="iv">@page</span> = <span class="co">Page</span>.find_by_title(title)<tt><br></tt>      render <span class="sy">:view</span><tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt><span class="r">end</span><tt><br></tt><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Views</span><tt><br></tt>  <span class="r">def</span> <span class="fu">list</span><tt><br></tt>    h1 <span class="s"><span class="dl">"</span><span class="k">Tüm Sayfalar</span><span class="dl">"</span></span><tt><br></tt>    ul <span class="r">do</span><tt><br></tt>      <span class="iv">@pages</span>.each <span class="r">do</span> |page|<tt><br></tt>        li <span class="r">do</span><tt><br></tt>          a page.title, <span class="sy">:href</span> =&gt; R(<span class="co">PageX</span>, page.title)<tt><br></tt>        <span class="r">end</span><tt><br></tt>      <span class="r">end</span><tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt><tt><br></tt>  <span class="r">def</span> <span class="fu">view</span><tt><br></tt>    h1 <span class="iv">@page</span>.title<tt><br></tt>    <span class="pc">self</span> &lt;&lt; <span class="iv">@page</span>.content<tt><br></tt>  <span class="r">end</span><tt><br></tt><span class="r">end</span><tt>
</tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Burada ilk <span style="font-weight: bold;">helper</span> metodu
görüyoruz:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt>
</tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }">R(<span class="co">PageX</span>, page.title)<span class="sy"></span><tt><br></tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Bu bir <span style="font-weight: bold;">ayrılmış yönlendirici</span>
dir ve kontrolör üzerinden bir URL üretir. Camping az sayıda ama etkili
helper metodlarla gelir, kendi metodlarınızı da tanımlayabilirsiniz.
Camping::Helpers konusu bunu anlatıyor. <br>

<br>

Burada kendinizi geliştirmek için yapabileceğiniz şeyler var. Bazıları
şöyle:<br>

<ul>

  <li>Sayfanın nezaman üretildiğini ve en son ne zaman update
edildiğini gösterin.</li>
  <li>Sayfa yoksa ne olur?</li>
  <li>Ön sayfa ne göstermelidir?</li>
  <li>Bir layout ekleyin.</li>
  <li>Biraz canlı görüntüler yapın.<br>
  </li>
</ul>

<br>

<hr style="width: 100%; height: 2px;"><br>

<br>

<h2>Son Rötuşlar</h2>

Uygulamamızda koca bir çatlak var. Yeni sayfa ekleyemiyor ve edit
edemiyoruz. Haydi bunu nasıl yapacağımızı görelim:<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt><br></tt><strong>10</strong><tt><br></tt>11<tt><br></tt>12<tt><br></tt>13<tt><br></tt>14<tt><br></tt>15<tt><br></tt>16<tt><br></tt>17<tt><br></tt>18<tt><br></tt>19<tt><br></tt><strong>20</strong><tt><br></tt>21<tt><br></tt>22<tt><br></tt>23<tt><br></tt>24<tt><br></tt>25<tt><br></tt>26<tt><br></tt>27<tt><br></tt>28<tt><br></tt>29<tt><br></tt><strong>30</strong><tt><br></tt>31<tt><br></tt>32<tt><br></tt>33<tt><br></tt>34<tt><br></tt>35<tt><br></tt>36<tt><br></tt>37<tt><br></tt>38<strong></strong><strong></strong><strong></strong><strong></strong><strong></strong></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="co"></span><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Controllers</span><tt><br></tt>  <span class="r">class</span> <span class="cl">Pages</span><tt><br></tt>    <span class="r">def</span> <span class="fu">get</span><tt><br></tt>      <span class="c"># Sadece sayfa etiketlerini seç.</span><tt><br></tt>      <span class="iv">@pages</span> = <span class="co">Page</span>.all(<span class="sy">:select</span> =&gt; <span class="s"><span class="dl">"</span><span class="k">title</span><span class="dl">"</span></span>)<tt><br></tt>      render <span class="sy">:list</span><tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt><tt><br></tt>  <span class="r">class</span> <span class="cl">PageX</span><tt><br></tt>    <span class="r">def</span> <span class="fu">get</span>(title)<tt><br></tt>      <span class="r">if</span> <span class="iv">@page</span> = <span class="co">Page</span>.find_by_title(title)<tt><br></tt>        render <span class="sy">:view</span><tt><br></tt>      <span class="r">else</span><tt><br></tt>        redirect <span class="co">PageXEdit</span>, title<tt><br></tt>      <span class="r">end</span><tt><br></tt>    <span class="r">end</span><tt><br></tt>        <tt><br></tt>    <span class="r">def</span> <span class="fu">post</span>(title)<tt><br></tt>      <span class="c"># Eğer yoksa yenisini üret:</span><tt><br></tt>      <span class="iv">@page</span> = <span class="co">Page</span>.find_or_initialize_by_title(title)<tt><br></tt>      <span class="c"># Süper! dimi? Bu şu satırla aynı:</span><tt><br></tt>      <span class="c"># @page = Page.find_by_title(title) || Page.new(:title =&gt; title)</span><tt><br></tt>            <tt><br></tt>      <span class="iv">@page</span>.content = <span class="iv">@input</span>.content<tt><br></tt>      <span class="iv">@page</span>.save<tt><br></tt>      redirect <span class="co">PageX</span>, title<tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt>    <tt><br></tt>  <span class="r">class</span> <span class="cl">PageXEdit</span><tt><br></tt>    <span class="r">def</span> <span class="fu">get</span>(title)<tt><br></tt>      <span class="iv">@page</span> = <span class="co">Page</span>.find_or_initialize_by_title(title)<tt><br></tt>      render <span class="sy">:edit</span><tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt><span class="r">end</span><tt><br></tt><tt><br></tt><span class="r"></span></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

Bu kodların kemik noktası PageX kontrolörö <span style="font-weight: bold;">post</span> metodunda yatar. Bir kullanıcı
linke tıklayınca ya da adres girince <span style="font-weight: bold;">get</span>
metoduna gider. Ama bir form oluşturur ve orda veriyi toplayıp
gönderirseniz <span style="font-weight: bold;">post</span> metoduna
ulaşırsınız.<br>

<br>

Kullanabileceğiniz başka isimler de var fakat her zaman çalışmayabilir.
Bu yüzden aceleci olmayın ve bir süre daha <span style="font-weight: bold;">get</span> ve <span style="font-weight: bold;">post</span> ile devam edin. Nasıl
çalıştığını ilerde göstereceğiz.<br>

<br>

Ayrıca <span style="font-weight: bold;">@input.content</span>
kullanımı dikkatinizi çekmiştir. <span style="font-weight: bold;">@input</span>
hash yapısı formlardaki gibi ve (/posts?page=50) URL'sindeki gibi
gönderilen parametreleri içerir.<br>

<br>

Burada bir tane de <span style="font-weight: bold;">edit</span>
görseli bulunuyor. Kendiniz daha iyi bir görsel yapabilirsiniz. Bununla
bildiğiniz bir yapıyı birleştirmeye çalışın.<br>

<br>

<table class="CodeRay">

  <tbody>
    <tr>
      <td class="line_numbers" title="click to toggle" onclick="with (this.firstChild.style) { display = (display == '') ? 'none' : '' }">
      <pre>1<tt><br></tt>2<tt><br></tt>3<tt><br></tt>4<tt><br></tt>5<tt><br></tt>6<tt><br></tt>7<tt><br></tt>8<tt><br></tt>9<tt><br></tt><strong>10</strong><tt><br></tt>11<br>12<tt><br></tt></pre>
      </td>
      <td class="code">
      <pre ondblclick="with (this.style) { overflow = (overflow == 'auto' || overflow == '') ? 'visible' : 'auto' }"><span class="co"></span><tt><br></tt><span class="r">module</span> <span class="cl">Nuts::Views</span><tt><br></tt>  <span class="r">def</span> <span class="fu">edit</span><tt><br></tt>    h1 <span class="iv">@page</span>.title<tt><br></tt>    form <span class="sy">:action</span> =&gt; R(<span class="co">PageX</span>, <span class="iv">@page</span>.title), <span class="sy">:method</span> =&gt; <span class="sy">:post</span> <span class="r">do</span><tt><br></tt>      textarea <span class="iv">@page</span>.content, <span class="sy">:name</span> =&gt; <span class="sy">:content</span>,<tt><br></tt>          <span class="sy">:rows</span> =&gt; <span class="i">10</span>, <span class="sy">:cols</span> =&gt; <span class="i">50</span><tt><br></tt>      br<tt><br></tt>      input <span class="sy">:type</span> =&gt; <span class="sy">:submit</span>, <span class="sy">:value</span> =&gt; Gönder<span class="s"><span class="k">!</span><span class="dl">"</span></span><tt><br></tt>    <span class="r">end</span><tt><br></tt>  <span class="r">end</span><tt><br></tt><span class="r">end</span><tt>
</tt></pre>
      </td>
    </tr>
  </tbody>
</table>

<br>

<hr style="width: 100%; height: 2px;">
<br>

<h2>Phew!</h2>

Son birkaç dakikada birhayli ilerlediniz ve bir dinlenmeyi hakettiniz,
ancak tekrar bir gözden geöirme yapalım :<br>

<ul>

  <li>Herzaman <span style="font-weight: bold;">Camping.goes :App</span>
satırını uygulamanızın en üstüne koyun.</li>
  <li>Her yönlendirme bir kontrolöre ulaşmalıdır.</li>
  <li>Kontrolör sadece iş yapmalıdır.</li>
  <li><span style="font-weight: bold;">@input</span> yapılan çağrıdaki
parametreleri içerir.</li>
  <li>View'lar Ruby şeklinde gösterilen Html'lerdir.</li>
  <li>View'lar oluşum değişkenlerine erişebilir (instance değişkenler @
ile başlar).</li>
  <li>Modeller tüm verilerinizi saklamak için kullanılan tablolardır.</li>
  <li>Modellerinizi migration'ların öncesine yazın.</li>
  <li>Helper'lar yardımcı programlardır.</li>
</ul>

<br>

Maalesef kitap burada son buluyor. Camping'i takip etmeye devam edin.
Belgenin orjinalini <a href="https://github.com/camping/camping" target="_blank">https://github.com/camping/camping</a> adresinde
bulabilirsiniz.<br>
<hr style="width: 100%; height: 2px;">
<br>

<a href="http://tuxweet.linux.org.tr/umitka" target="_blank">Tuxweet</a>
- <a href="https://twitter.com/#%21/umitka" target="_blank">Twitter</a>
- <a href="http://rstat.us/users/umitka" target="_blank">Rstat.us</a>
- <a href="https://github.com/ujk" target="_blank">Github</a> - <a href="http://identi.ca/umitka" target="_blank">Identi.ca</a> - <a href="mailto:ujk7107@gmail.com">ujk7107@gmail.com</a> <br>

<br>

<br>

<br>

<br>

<br>

<br>

<br>

</body></html>